<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /bonfire/modules/builder/assets/js/modulebuilder.js source</title>
    <link rel="stylesheet" href="../../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Oct 23 19:15:14 2014 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../../';
subdir='bonfire/modules/builder/assets/js';
filename='modulebuilder.js.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/bonfire/modules/builder/assets/js/</a> -> <a href="modulebuilder.js.html">modulebuilder.js</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="modulebuilder.js.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="modulebuilder.js.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  <span class="comment">/**</span>
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment"> * @type {Object} Global object to hold properties/methods used by Bonfire</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> */</span>
<a name="l4"><span class="linenum">   4</span></a>  var bonfire = bonfire || {};
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">/**</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * @type {Object} Holds properties/methods specific to Builder</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> */</span>
<a name="l8"><span class="linenum">   8</span></a>  bonfire.builder = {
<a name="l9"><span class="linenum">   9</span></a>      <span class="comment">/**</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">     * @type {Object} Holds the class names for the open/close icons used on the page's legends</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">     */</span>
<a name="l12"><span class="linenum">  12</span></a>      legendIcon: {
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">        /** @type {String} The class name for the open icon */</span>
<a name="l14"><span class="linenum">  14</span></a>          open: 'icon-plus',
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">        /** @type {String} The class name for the close icon */</span>
<a name="l16"><span class="linenum">  16</span></a>          close: 'icon-minus'
<a name="l17"><span class="linenum">  17</span></a>      },
<a name="l18"><span class="linenum">  18</span></a>      <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment">     * @type {Object} Defines the animation options used when opening/closing sections of the page</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment">     * @link http://api.jquery.com/animate/</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment">     */</span>
<a name="l22"><span class="linenum">  22</span></a>      animation: {
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment">        /** @type {String} A string indicating which easing function to use for the transition */</span>
<a name="l24"><span class="linenum">  24</span></a>          easing: 'swing',
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment">        /** @type {Number|String} A string or number determining how long the animation will run */</span>
<a name="l26"><span class="linenum">  26</span></a>          duration: 400
<a name="l27"><span class="linenum">  27</span></a>      },
<a name="l28"><span class="linenum">  28</span></a>      <span class="comment">/**</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">     * @type {Object} Holds the default values used to create the table name from the module name</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">     */</span>
<a name="l31"><span class="linenum">  31</span></a>      prepTableDefaults: {
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment">        /** @type {String} The value to prepare for use as the table name */</span>
<a name="l33"><span class="linenum">  33</span></a>          valueToPrep: '',
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">        /** @type {Boolean} Determines whether the function sets the table name (using tableNameSelector) in addition to returning the string */</span>
<a name="l35"><span class="linenum">  35</span></a>          setTableName: true,
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">        /** @type {String} The selector for the field containing the name of the module */</span>
<a name="l37"><span class="linenum">  37</span></a>          moduleNameSelector: '#module_name',
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">        /** @type {String} The selector for the field containing the name of the table */</span>
<a name="l39"><span class="linenum">  39</span></a>          tableNameSelector: '#table_name',
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">        /** @type {String} The value to replace unwanted values in the module name, such as spaces */</span>
<a name="l41"><span class="linenum">  41</span></a>          tableNameReplacement: '_',
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">        /** @type {String} The Regular Expression used to replace unwanted values in the module name */</span>
<a name="l43"><span class="linenum">  43</span></a>          tableNameRegEx: /[^A-Za-z0-9\\s]/g
<a name="l44"><span class="linenum">  44</span></a>      },
<a name="l45"><span class="linenum">  45</span></a>      <span class="comment">/**</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">     * Prepares the module name to be used as a database table name</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">     *</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">     * @param   {Object} prepOptions Contains optional settings</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">     *             used to convert the module name into a suitable</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">     *             database table name</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">     *</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">     * @returns {String} The name to be used for the table</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">     */</span>
<a name="l54"><span class="linenum">  54</span></a>      prepTableName: function(prepOptions) {
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">        /** @type {Object} Settings object to hold the combination of defaults and options passed in the function argument */</span>
<a name="l56"><span class="linenum">  56</span></a>          var prepSettings = $.extend({}, bonfire.builder.prepTableDefaults, prepOptions),
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">        /** @type {String} The value we are preparing to use as the table name */</span>
<a name="l58"><span class="linenum">  58</span></a>              tableName = prepSettings.valueToPrep,
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">        /** @type {Object} If called as an event handler, we'll store the event data here */</span>
<a name="l60"><span class="linenum">  60</span></a>              event;
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">        // If the function is used as an event handler, our normal options may be</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">        // passed in prepOptions.data instead of prepOptions itself, so we need to</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">        // make sure we are still retrieving our options</span>
<a name="l65"><span class="linenum">  65</span></a>          if (prepOptions &amp;&amp; prepOptions.data) {
<a name="l66"><span class="linenum">  66</span></a>              event = prepOptions;
<a name="l67"><span class="linenum">  67</span></a>              prepOptions = prepOptions.data;
<a name="l68"><span class="linenum">  68</span></a>          }
<a name="l69"><span class="linenum">  69</span></a>          prepSettings = $.extend({}, bonfire.builder.prepTableDefaults, prepOptions);
<a name="l70"><span class="linenum">  70</span></a>  
<a name="l71"><span class="linenum">  71</span></a>          if ('' == tableName) {
<a name="l72"><span class="linenum">  72</span></a>              tableName = $(prepSettings.moduleNameSelector).val();
<a name="l73"><span class="linenum">  73</span></a>          }
<a name="l74"><span class="linenum">  74</span></a>          tableName = tableName.<a class="function" onClick="logFunction('replace')" href="../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(prepSettings.tableNameRegEx, prepSettings.tableNameReplacement).toLowerCase();
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>          if (prepSettings.setTableName === true) {
<a name="l77"><span class="linenum">  77</span></a>              $(prepSettings.tableNameSelector).val(tableName);
<a name="l78"><span class="linenum">  78</span></a>          }
<a name="l79"><span class="linenum">  79</span></a>          return tableName;
<a name="l80"><span class="linenum">  80</span></a>      }
<a name="l81"><span class="linenum">  81</span></a>  };
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">/**</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment"> * Toggles the visibility of the advanced table properties</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment"> * when the Create Module Table checkbox is checked.</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment"> * Also sets the name of the table as the lowercase name of</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment"> * the module, with underscores replacing spaces, if the table</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment"> * name is not already set.</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment"> *</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment"> * @returns {void}</span>
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment"> */</span>
<a name="l91"><span class="linenum">  91</span></a>  function <a class="function" onClick="logFunction('show_table_props')" href="../../../../../_functions/show_table_props.html" onMouseOver="funcPopup(event,'show_table_props')">show_table_props</a>() {
<a name="l92"><span class="linenum">  92</span></a>      <span class="comment">/**</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment">     * @type {String} The name of the database table, based on user entry or the module name</span>
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">     */</span>
<a name="l95"><span class="linenum">  95</span></a>      var tblName,
<a name="l96"><span class="linenum">  96</span></a>          <span class="comment">/**</span>
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">         * @type {Object} The animation options passed to show/hide methods</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">         */</span>
<a name="l99"><span class="linenum">  99</span></a>          anim = bonfire.builder.animation;
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>      if ($('#db_create').<a class="function" onClick="logFunction('is')" href="../../../../../_functions/is.html" onMouseOver="funcPopup(event,'is')">is</a>(':checked')) {
<a name="l102"><span class="linenum"> 102</span></a>          $('#db_details').<a class="function" onClick="logFunction('show')" href="../../../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>(anim);
<a name="l103"><span class="linenum"> 103</span></a>          $('#db_details .mb_advanced').<a class="function" onClick="logFunction('hide')" href="../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>(anim);
<a name="l104"><span class="linenum"> 104</span></a>          $('.match-existing-notes').<a class="function" onClick="logFunction('hide')" href="../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>(anim);
<a name="l105"><span class="linenum"> 105</span></a>          $('.mb_new_table').<a class="function" onClick="logFunction('show')" href="../../../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>(anim);
<a name="l106"><span class="linenum"> 106</span></a>          $('#field_numbers').<a class="function" onClick="logFunction('show')" href="../../../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>(anim);
<a name="l107"><span class="linenum"> 107</span></a>          $('#all_fields').<a class="function" onClick="logFunction('show')" href="../../../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>(anim);
<a name="l108"><span class="linenum"> 108</span></a>  
<a name="l109"><span class="linenum"> 109</span></a>          $('#primary_key_field').val('' == $('#primary_key_field').val() ? 'id' : $('#primary_key_field').val());
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>          tblName = ( ( $('#table_name').val() == '' ) ? $('#module_name').val() : $('#table_name').val() );
<a name="l112"><span class="linenum"> 112</span></a>          tblName = bonfire.builder.prepTableName({valueToPrep: tblName, setTableName: true});
<a name="l113"><span class="linenum"> 113</span></a>      } else if ($('#db_exists').<a class="function" onClick="logFunction('is')" href="../../../../../_functions/is.html" onMouseOver="funcPopup(event,'is')">is</a>(':checked')) {
<a name="l114"><span class="linenum"> 114</span></a>          $('#db_details').<a class="function" onClick="logFunction('show')" href="../../../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>(anim);
<a name="l115"><span class="linenum"> 115</span></a>          $('#db_details .mb_advanced').<a class="function" onClick="logFunction('show')" href="../../../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>(anim);
<a name="l116"><span class="linenum"> 116</span></a>          $('.match-existing-notes').<a class="function" onClick="logFunction('show')" href="../../../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>(anim);
<a name="l117"><span class="linenum"> 117</span></a>          $('.mb_new_table').<a class="function" onClick="logFunction('hide')" href="../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>(anim);
<a name="l118"><span class="linenum"> 118</span></a>          $('#field_numbers').<a class="function" onClick="logFunction('hide')" href="../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>(anim);
<a name="l119"><span class="linenum"> 119</span></a>          $('#all_fields').<a class="function" onClick="logFunction('hide')" href="../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>(anim);
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>          tblName = ( ( $('#table_name').val() == '' ) ? $('#module_name').val() : $('#table_name').val() );
<a name="l122"><span class="linenum"> 122</span></a>          tblName = bonfire.builder.prepTableName({valueToPrep: tblName, setTableName: true});
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>          if ($('#view_field_label1').val() != undefined &amp;&amp; $('#view_field_label1').val() != '') {
<a name="l125"><span class="linenum"> 125</span></a>              $('.mb_new_table').<a class="function" onClick="logFunction('show')" href="../../../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>(anim);
<a name="l126"><span class="linenum"> 126</span></a>              $('#db_details .notification').<a class="function" onClick="logFunction('hide')" href="../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>(anim);
<a name="l127"><span class="linenum"> 127</span></a>              $('#field_numbers').<a class="function" onClick="logFunction('hide')" href="../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>(anim);
<a name="l128"><span class="linenum"> 128</span></a>              $('#all_fields').<a class="function" onClick="logFunction('show')" href="../../../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>(anim);
<a name="l129"><span class="linenum"> 129</span></a>          } else {
<a name="l130"><span class="linenum"> 130</span></a>              $('#primary_key_field').val('');
<a name="l131"><span class="linenum"> 131</span></a>              $('#all_fields').empty();
<a name="l132"><span class="linenum"> 132</span></a>          }
<a name="l133"><span class="linenum"> 133</span></a>      } else {
<a name="l134"><span class="linenum"> 134</span></a>          $('#db_details').<a class="function" onClick="logFunction('hide')" href="../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>(anim);
<a name="l135"><span class="linenum"> 135</span></a>          $('#all_fields').<a class="function" onClick="logFunction('hide')" href="../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>(anim);
<a name="l136"><span class="linenum"> 136</span></a>          $('.match-existing-notes').<a class="function" onClick="logFunction('hide')" href="../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>(anim);
<a name="l137"><span class="linenum"> 137</span></a>      }
<a name="l138"><span class="linenum"> 138</span></a>  }
<a name="l139"><span class="linenum"> 139</span></a>  
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">/**</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment"> * Use LocalStorage to hold entered information for all of the fields,</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment"> * so the user doesn't have to enter them again when the page is redirected</span>
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment"> * (when choosing the number of fields). Also clears a checkbox's value if</span>
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment"> * it shouldn't be checked on reload.</span>
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment"> *</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment"> * @returns void</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment"> */</span>
<a name="l148"><span class="linenum"> 148</span></a>  function <a class="function" onClick="logFunction('store_form_data')" href="../../../../../_functions/store_form_data.html" onMouseOver="funcPopup(event,'store_form_data')">store_form_data</a>() {
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">    // loop through all the inputs and get the data</span>
<a name="l150"><span class="linenum"> 150</span></a>      $('#module_form :input').<a class="phpfunction" onClick="logFunction('each')" href="../../../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( function() {
<a name="l151"><span class="linenum"> 151</span></a>          <span class="comment">/**</span>
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">         * @type String The id for this input field</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">         */</span>
<a name="l154"><span class="linenum"> 154</span></a>          var fld_id = $(this).attr('id'),
<a name="l155"><span class="linenum"> 155</span></a>              <span class="comment">/**</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">             * @type String The value for this input field</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">             */</span>
<a name="l158"><span class="linenum"> 158</span></a>              fld_val = $(this).val();
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>          if ($(this).<a class="function" onClick="logFunction('is')" href="../../../../../_functions/is.html" onMouseOver="funcPopup(event,'is')">is</a>(':checkbox') &amp;&amp; $(this).<a class="function" onClick="logFunction('is')" href="../../../../../_functions/is.html" onMouseOver="funcPopup(event,'is')">is</a>(':not(:checked)')) {
<a name="l161"><span class="linenum"> 161</span></a>              fld_val = 'uncheck';
<a name="l162"><span class="linenum"> 162</span></a>          }
<a name="l163"><span class="linenum"> 163</span></a>  
<a name="l164"><span class="linenum"> 164</span></a>          if ($(this).<a class="function" onClick="logFunction('is')" href="../../../../../_functions/is.html" onMouseOver="funcPopup(event,'is')">is</a>(':radio') &amp;&amp; $(this).<a class="function" onClick="logFunction('is')" href="../../../../../_functions/is.html" onMouseOver="funcPopup(event,'is')">is</a>(':not(:checked)')) {
<a name="l165"><span class="linenum"> 165</span></a>              return;
<a name="l166"><span class="linenum"> 166</span></a>          }
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>          if (fld_id &amp;&amp; fld_val) {
<a name="l169"><span class="linenum"> 169</span></a>              localStorage[fld_id] = fld_val;
<a name="l170"><span class="linenum"> 170</span></a>          }
<a name="l171"><span class="linenum"> 171</span></a>      });
<a name="l172"><span class="linenum"> 172</span></a>  }
<a name="l173"><span class="linenum"> 173</span></a>  
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment">/**</span>
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment"> * Re-populate the form fields if they have been stored in LocalStorage.</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment"> * Once the fields are loaded, all LocalStorage information is cleared</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment"> *</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment"> * @returns void</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment"> */</span>
<a name="l180"><span class="linenum"> 180</span></a>  function <a class="function" onClick="logFunction('get_form_data')" href="../../../../../_functions/get_form_data.html" onMouseOver="funcPopup(event,'get_form_data')">get_form_data</a>() {
<a name="l181"><span class="linenum"> 181</span></a>      <span class="comment">/**</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">     * @type Int Loop counter</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     */</span>
<a name="l184"><span class="linenum"> 184</span></a>      var i = 0,
<a name="l185"><span class="linenum"> 185</span></a>          <span class="comment">/**</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">         * @type String The key for the current LocalStorage entry</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">         */</span>
<a name="l188"><span class="linenum"> 188</span></a>          key,
<a name="l189"><span class="linenum"> 189</span></a>          <span class="comment">/**</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">         * @type String The value for the current LocalStorage entry</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">         */</span>
<a name="l192"><span class="linenum"> 192</span></a>          value;
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>      for (i = 0; i &lt; localStorage.length; i++) {
<a name="l195"><span class="linenum"> 195</span></a>          key = localStorage.<a class="phpfunction" onClick="logFunction('key')" href="../../../../../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a>(i);
<a name="l196"><span class="linenum"> 196</span></a>          value = localStorage[key];
<a name="l197"><span class="linenum"> 197</span></a>  
<a name="l198"><span class="linenum"> 198</span></a>          if ($('#' + key).<a class="function" onClick="logFunction('is')" href="../../../../../_functions/is.html" onMouseOver="funcPopup(event,'is')">is</a>(':checkbox, :radio')) {
<a name="l199"><span class="linenum"> 199</span></a>              if ($('#' + key).val() == value) {
<a name="l200"><span class="linenum"> 200</span></a>                  $('#' + key).attr('checked', 'checked');
<a name="l201"><span class="linenum"> 201</span></a>              } else {
<a name="l202"><span class="linenum"> 202</span></a>                  $('#' + key).removeAttr('checked');
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">                //restore the proper value</span>
<a name="l204"><span class="linenum"> 204</span></a>                  value = $('#' + key).val();
<a name="l205"><span class="linenum"> 205</span></a>              }
<a name="l206"><span class="linenum"> 206</span></a>          }
<a name="l207"><span class="linenum"> 207</span></a>  
<a name="l208"><span class="linenum"> 208</span></a>          $('#' + key).val(value);
<a name="l209"><span class="linenum"> 209</span></a>      }
<a name="l210"><span class="linenum"> 210</span></a>  
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment">    //now that it is loaded, remove localStorage</span>
<a name="l212"><span class="linenum"> 212</span></a>      localStorage.<a class="function" onClick="logFunction('clear')" href="../../../../../_functions/clear.html" onMouseOver="funcPopup(event,'clear')">clear</a>();
<a name="l213"><span class="linenum"> 213</span></a>  }
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">/*-----------------------------------------------------------</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">Checks if LocalStorage holds any information, then loads it.</span>
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">------------------------------------------------------------*/</span>
<a name="l218"><span class="linenum"> 218</span></a>  if (localStorage.length &gt;= 1) {
<a name="l219"><span class="linenum"> 219</span></a>      <a class="function" onClick="logFunction('get_form_data')" href="../../../../../_functions/get_form_data.html" onMouseOver="funcPopup(event,'get_form_data')">get_form_data</a>();
<a name="l220"><span class="linenum"> 220</span></a>  }
<a name="l221"><span class="linenum"> 221</span></a>  
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment">/*-----------------------------------------------------------</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">User is choosing # of fields, store all the data in LocalStorage</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment">------------------------------------------------------------*/</span>
<a name="l225"><span class="linenum"> 225</span></a>  $('#field_numbers a').<a class="function" onClick="logFunction('click')" href="../../../../../_functions/click.html" onMouseOver="funcPopup(event,'click')">click</a>( function() {
<a name="l226"><span class="linenum"> 226</span></a>      <a class="function" onClick="logFunction('store_form_data')" href="../../../../../_functions/store_form_data.html" onMouseOver="funcPopup(event,'store_form_data')">store_form_data</a>();
<a name="l227"><span class="linenum"> 227</span></a>  });
<a name="l228"><span class="linenum"> 228</span></a>  
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">/*-----------------------------------------------------------</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">User submitted form, store data in case of errors.</span>
<a name="l231"><span class="linenum"> 231</span></a>  <span class="comment">------------------------------------------------------------*/</span>
<a name="l232"><span class="linenum"> 232</span></a>  $('#module_form').<a class="function" onClick="logFunction('submit')" href="../../../../../_functions/submit.html" onMouseOver="funcPopup(event,'submit')">submit</a>( function() {
<a name="l233"><span class="linenum"> 233</span></a>      <a class="function" onClick="logFunction('store_form_data')" href="../../../../../_functions/store_form_data.html" onMouseOver="funcPopup(event,'store_form_data')">store_form_data</a>();
<a name="l234"><span class="linenum"> 234</span></a>  });
<a name="l235"><span class="linenum"> 235</span></a>  
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">/*-----------------------------------------------------------</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">Initial visibility toggle of advanced options</span>
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment">------------------------------------------------------------*/</span>
<a name="l239"><span class="linenum"> 239</span></a>  <a class="function" onClick="logFunction('show_table_props')" href="../../../../../_functions/show_table_props.html" onMouseOver="funcPopup(event,'show_table_props')">show_table_props</a>();
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">/*-----------------------------------------------------------</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">Toggle module table</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">------------------------------------------------------------*/</span>
<a name="l244"><span class="linenum"> 244</span></a>  $('input[name=module_db]').<a class="function" onClick="logFunction('click')" href="../../../../../_functions/click.html" onMouseOver="funcPopup(event,'click')">click</a>( function() {
<a name="l245"><span class="linenum"> 245</span></a>      <a class="function" onClick="logFunction('show_table_props')" href="../../../../../_functions/show_table_props.html" onMouseOver="funcPopup(event,'show_table_props')">show_table_props</a>();
<a name="l246"><span class="linenum"> 246</span></a>  });
<a name="l247"><span class="linenum"> 247</span></a>  
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment">/*-----------------------------------------------------------</span>
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment">Toggle advanced options</span>
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">------------------------------------------------------------*/</span>
<a name="l251"><span class="linenum"> 251</span></a>  $('.mb_show_advanced').<a class="function" onClick="logFunction('click')" href="../../../../../_functions/click.html" onMouseOver="funcPopup(event,'click')">click</a>( function(e) {
<a name="l252"><span class="linenum"> 252</span></a>      <span class="comment">/**</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">     * @type Object The animation options passed into the toggle method</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">     */</span>
<a name="l255"><span class="linenum"> 255</span></a>      var anim = bonfire.builder.animation,
<a name="l256"><span class="linenum"> 256</span></a>          <span class="comment">/**</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">         * @type String The id value of the closest fieldset element</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">         */</span>
<a name="l259"><span class="linenum"> 259</span></a>          parent;
<a name="l260"><span class="linenum"> 260</span></a>  
<a name="l261"><span class="linenum"> 261</span></a>      e.preventDefault();
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>      parent = $(this).closest('fieldset').attr('id');
<a name="l264"><span class="linenum"> 264</span></a>      $('#' + parent + ' .mb_advanced').<a class="function" onClick="logFunction('toggle')" href="../../../../../_functions/toggle.html" onMouseOver="funcPopup(event,'toggle')">toggle</a>(anim);
<a name="l265"><span class="linenum"> 265</span></a>  });
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment">/*-----------------------------------------------------------</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">Toggle &quot;more validation rules&quot;</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">------------------------------------------------------------*/</span>
<a name="l269"><span class="linenum"> 269</span></a>  $('.mb_show_advanced_rules').<a class="function" onClick="logFunction('click')" href="../../../../../_functions/click.html" onMouseOver="funcPopup(event,'click')">click</a>( function(e) {
<a name="l270"><span class="linenum"> 270</span></a>      <span class="comment">/**</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">     * @type Object The animation options passed into the toggle method</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">     */</span>
<a name="l273"><span class="linenum"> 273</span></a>      var anim = bonfire.builder.animation;
<a name="l274"><span class="linenum"> 274</span></a>  
<a name="l275"><span class="linenum"> 275</span></a>      e.preventDefault();
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>      $(this).parent().parent().<a class="phpfunction" onClick="logFunction('next')" href="../../../../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>('.mb_advanced').<a class="function" onClick="logFunction('toggle')" href="../../../../../_functions/toggle.html" onMouseOver="funcPopup(event,'toggle')">toggle</a>(anim);
<a name="l278"><span class="linenum"> 278</span></a>  });
<a name="l279"><span class="linenum"> 279</span></a>  
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">/*-----------------------------------------------------------</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">Toggle module/table advanced options by clicking on the</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment">fieldset legend. Uses the div:not to not affect the visibility</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">options of the &quot;more validation rules&quot;</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">------------------------------------------------------------*/</span>
<a name="l285"><span class="linenum"> 285</span></a>  $('.body legend').<a class="function" onClick="logFunction('click')" href="../../../../../_functions/click.html" onMouseOver="funcPopup(event,'click')">click</a>( function() {
<a name="l286"><span class="linenum"> 286</span></a>      <span class="comment">/**</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment">     * @type Object The animation options passed into the toggle method</span>
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment">     */</span>
<a name="l289"><span class="linenum"> 289</span></a>      var anim = bonfire.builder.animation,
<a name="l290"><span class="linenum"> 290</span></a>          <span class="comment">/**</span>
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment">         * @type Object The name of the &quot;close&quot; icon to display on legend elements</span>
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">         */</span>
<a name="l293"><span class="linenum"> 293</span></a>          closeIcon = bonfire.builder.legendIcon.close,
<a name="l294"><span class="linenum"> 294</span></a>          <span class="comment">/**</span>
<a name="l295"><span class="linenum"> 295</span></a>  <span class="comment">         * @type Object The name of the &quot;open&quot; icon to display on legend elements</span>
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment">         */</span>
<a name="l297"><span class="linenum"> 297</span></a>          openIcon = bonfire.builder.legendIcon.open;
<a name="l298"><span class="linenum"> 298</span></a>  
<a name="l299"><span class="linenum"> 299</span></a>      $(this).parent('fieldset').children('div:not(&quot;.mb_advanced:hidden&quot;)').<a class="function" onClick="logFunction('toggle')" href="../../../../../_functions/toggle.html" onMouseOver="funcPopup(event,'toggle')">toggle</a>(anim);
<a name="l300"><span class="linenum"> 300</span></a>  
<a name="l301"><span class="linenum"> 301</span></a>      if ($(this).children('.' + closeIcon).length &gt; 0) {
<a name="l302"><span class="linenum"> 302</span></a>          $(this).children('.' + closeIcon).replaceWith('&lt;span class=&quot;' + openIcon + '&quot;&gt;&lt;/span&gt;');
<a name="l303"><span class="linenum"> 303</span></a>      } else {
<a name="l304"><span class="linenum"> 304</span></a>          $(this).children('.' + openIcon).replaceWith('&lt;span class=&quot;' + closeIcon + '&quot;&gt;&lt;/span&gt;');
<a name="l305"><span class="linenum"> 305</span></a>      }
<a name="l306"><span class="linenum"> 306</span></a>  });
<a name="l307"><span class="linenum"> 307</span></a>  
<a name="l308"><span class="linenum"> 308</span></a>  $('.body legend').prepend('&lt;span class=&quot;' + bonfire.builder.legendIcon.close + '&quot;&gt;&amp;nbsp;');
<a name="l309"><span class="linenum"> 309</span></a>  
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">/*-----------------------------------------------------------</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">Highlight faded labels when the control is focused</span>
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment">------------------------------------------------------------*/</span>
<a name="l313"><span class="linenum"> 313</span></a>  $('.faded input').<a class="function" onClick="logFunction('on')" href="../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('focus', function() {
<a name="l314"><span class="linenum"> 314</span></a>      $(this).closest('.faded').<a class="function" onClick="logFunction('addClass')" href="../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>('faded-focus');
<a name="l315"><span class="linenum"> 315</span></a>  });
<a name="l316"><span class="linenum"> 316</span></a>  $('.faded input').<a class="function" onClick="logFunction('on')" href="../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('blur', function() {
<a name="l317"><span class="linenum"> 317</span></a>      $(this).closest('.faded').<a class="function" onClick="logFunction('removeClass')" href="../../../../../_functions/removeclass.html" onMouseOver="funcPopup(event,'removeclass')">removeClass</a>('faded-focus');
<a name="l318"><span class="linenum"> 318</span></a>  });
<a name="l319"><span class="linenum"> 319</span></a>  $('.faded input:focus').closest('.faded').<a class="function" onClick="logFunction('addClass')" href="../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>('faded-focus');
<a name="l320"><span class="linenum"> 320</span></a>  
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">/*</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment"> * Update the table name when changing the module name</span>
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment"> */</span>
<a name="l324"><span class="linenum"> 324</span></a>  $('#module_name').<a class="function" onClick="logFunction('on')" href="../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('click focus blur', {valueToPrep: '', setTableName: true}, bonfire.builder.prepTableName);
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_form_data': ['get_form_data', 'Re-populate the form fields if they have been stored in LocalStorage. Once the fields are loaded, all LocalStorage information is cleared ', [['bonfire/modules/builder/assets/js','modulebuilder.js',174]], 1],
'toggle': ['toggle', 'Toggle ', [['bonfire/codeigniter/libraries','Javascript.php',547]], 14],
'hide': ['hide', 'Hide ', [['bonfire/codeigniter/libraries','Javascript.php',529]], 94],
'show_table_props': ['show_table_props', 'Toggles the visibility of the advanced table properties when the Create Module Table checkbox is checked. Also sets the name of the table as the lowercase name of the module, with underscores replacing spaces, if the table name is not already set. ', [['bonfire/modules/builder/assets/js','modulebuilder.js',82]], 2],
'is': ['is', 'is returns a boolean for if typeof obj is exactly type. ', [['public/assets/js','modernizr-2.5.3.js',270],['public/themes/admin/js','modernizr-2.5.3.js',270]], 79],
'click': ['click', 'Clicks a visible text item. Will first try buttons, then links and then images. ', [['tests/simpletest','web_tester.php',868],['bonfire/codeigniter/libraries','Javascript.php',93],['tests/simpletest','browser.php',1116]], 74],
'addclass': ['addclass', 'Add Class ', [['bonfire/codeigniter/libraries','Javascript.php',386]], 159],
'replace': ['replace', 'Replace ', [['bonfire/codeigniter/database','DB_active_rec.php',1201]], 378],
'submit': ['submit', 'Simply submits the form without the submit button value. Used when there is only one button or it is unimportant. ', [['tests/simpletest','form.php',346]], 9],
'store_form_data': ['store_form_data', 'Use LocalStorage to hold entered information for all of the fields, so the user doesn\'t have to enter them again when the page is redirected (when choosing the number of fields). Also clears a checkbox\'s value if it shouldn\'t be checked on reload. ', [['bonfire/modules/builder/assets/js','modulebuilder.js',140]], 2],
'clear': ['clear', 'Initialize the Email Data ', [['bonfire/codeigniter/libraries','Email.php',138],['bonfire/codeigniter/libraries','Table.php',378],['bonfire/codeigniter/libraries','Image_lib.php',97],['tests/simpletest','exceptions.php',217],['tests/simpletest','errors.php',80],['tests/simpletest/test','encoding_test.php',39],['tests/simpletest','simpletest.php',253],['tests/simpletest','encoding.php',209]], 16],
'on': ['on', 'Switch on testing for the group or subgroup. ', [['tests/simpletest','reporter.php',366]], 227],
'removeclass': ['removeclass', 'Remove Class ', [['bonfire/codeigniter/libraries','Javascript.php',475]], 162],
'show': ['show', 'Show ', [['bonfire/codeigniter/libraries','Javascript.php',580]], 60],
'next': ['next', '', [], 23],
'key': ['key', '', [], 22],
'each': ['each', '', [], 340]};
CLASS_DATA={
};
CONST_DATA={
};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Oct 23 19:15:14 2014</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
