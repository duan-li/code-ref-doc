<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /bonfire/docs/roles_and_permissions.md source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Oct 23 18:57:41 2014 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='bonfire/docs';
filename='roles_and_permissions.md.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/bonfire/docs/</a> -> <a href="roles_and_permissions.md.html">roles_and_permissions.md</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="roles_and_permissions.md.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="roles_and_permissions.md.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  <span class="comment"># Roles and Permissions</span>
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  Bonfire uses a  Role-Based Access Control (RBAC) system for its authentication and authorization system. This provides enough granularity and flexibility for most situations, though may not be suitable for every website.
<a name="l4"><span class="linenum">   4</span></a>  
<a name="l5"><span class="linenum">   5</span></a>  &lt;ul&gt;
<a name="l6"><span class="linenum">   6</span></a>      &lt;li&gt;&lt;a href=&quot;#stock&quot;&gt;Stock Roles&lt;/a&gt;&lt;/li&gt;
<a name="l7"><span class="linenum">   7</span></a>      &lt;li&gt;&lt;a href=&quot;#new_roles&quot;&gt;Creating New Roles&lt;/a&gt;&lt;/li&gt;
<a name="l8"><span class="linenum">   8</span></a>      &lt;li&gt;&lt;a href=&quot;#permissions&quot;&gt;Permissions&lt;/a&gt;&lt;/li&gt;
<a name="l9"><span class="linenum">   9</span></a>      &lt;li&gt;&lt;a href=&quot;#access&quot;&gt;Restricting Access&lt;/a&gt;&lt;/li&gt;
<a name="l10"><span class="linenum">  10</span></a>      &lt;li&gt;&lt;a href=&quot;#passwords&quot;&gt;Passwords&lt;/a&gt;&lt;/li&gt;
<a name="l11"><span class="linenum">  11</span></a>  &lt;/ul&gt;
<a name="l12"><span class="linenum">  12</span></a>  
<a name="l13"><span class="linenum">  13</span></a>  &lt;a name=&quot;stock&quot;&gt;&lt;/a&gt;
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">## Stock Roles</span>
<a name="l15"><span class="linenum">  15</span></a>  
<a name="l16"><span class="linenum">  16</span></a>  Bonfire ships with 4 roles by default. They are Administrator, Developer, Editor, and User. Each of these roles has some basic access provided, though you will need to ensure that they all have the appropriate permissions for your site. While their names assume certain capabilities within the site, they can all be changed as needed, though we do highly suggest that Administrator remains unchanged.
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">### Administrator</span>
<a name="l19"><span class="linenum">  19</span></a>  
<a name="l20"><span class="linenum">  20</span></a>  The Administrator is the highest level user of the site. This is often the client that you are creating the site for. This is the 'owner' of the site and, as such, is typically given the most power of the site operators. By default, Bonfire provides this role with permissions over the entire site.
<a name="l21"><span class="linenum">  21</span></a>  
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment">### Developer</span>
<a name="l23"><span class="linenum">  23</span></a>  
<a name="l24"><span class="linenum">  24</span></a>  While the Administrator is the owner of the site, there are still some tools that Bonfire provides that they will never need, like the Module Builder, Translation tools, etc. The Developer role was created to keep the dangerous tools away from the other users of the site, while still providing powerful tools for the development and maintenance process.
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment">### Editor</span>
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  Editors will typically be the staff hired by the Administrator to handle the day to day operations of the site. They will have a lot of capability, but there are still some sensitive areas that the Administrator might not want them to have access to.
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">### User</span>
<a name="l31"><span class="linenum">  31</span></a>  
<a name="l32"><span class="linenum">  32</span></a>  This is the default role that anyone registering to the site is given. As such, it will typically have very limited rights to most of the site.
<a name="l33"><span class="linenum">  33</span></a>  
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>  &lt;a name=&quot;new_roles&quot;&gt;&lt;/a&gt;
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">## Creating New Roles</span>
<a name="l37"><span class="linenum">  37</span></a>  
<a name="l38"><span class="linenum">  38</span></a>  New roles are easily created within the admin panel by navigating to &lt;tt&gt;Settings / Roles&lt;/tt&gt; and then selecting &lt;tt&gt;New Role&lt;/tt&gt; in the navigation bar. The elements of the form are:
<a name="l39"><span class="linenum">  39</span></a>  
<a name="l40"><span class="linenum">  40</span></a>  * **Role Name** - The name of the role as you want it to appear to users. It should be one word, with no spaces, though you can use underscores in their place.
<a name="l41"><span class="linenum">  41</span></a>  * **Description** - This field is primarily used on the Roles overview page, but can be used by yourself throughout your template when needed.
<a name="l42"><span class="linenum">  42</span></a>  * **Login Destination** - This is the relative path that a user is directed to when they login. For example, you can force all admins to be directed to the main admin page by setting this value to &lt;tt&gt;/admin&lt;/tt&gt;. Alternatively, you could have Users be directed to their own dashboard or account management page by entering the appropriate relative URL here.
<a name="l43"><span class="linenum">  43</span></a>  * **Default Admin Context** - When a user logs into the admin area, this allows you to set the context they are directed to, like &lt;tt&gt;/admin/content&lt;/tt&gt; The Settings and Developer contexts are unavailable for selection here.
<a name="l44"><span class="linenum">  44</span></a>  * **Default Role** - The role assigned to <span class="keyword">new </span><a class="class" onClick="logClass('users')" href="../../_classes/users.html" onMouseOver="classPopup(event,'users')">users</a> when they register at the site. By selecting it here, it will be removed from any other role that currently has it.
<a name="l45"><span class="linenum">  45</span></a>  * **Removable?** - Allows you to provide access to roles other than the Admistrator, while not giving them the power to delete certain roles, keeping them safe from accidents or malicious actions. If this is set to 'Yes', then anyone with the &lt;tt&gt;Bonfire.Roles.Delete&lt;/tt&gt; permission can delete this role.
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>  When you first create a role, no permissions will be shown. You can go back and edit the permissions available to the role by selecting the Role from the Role overview page, or by editing through the Permission Matrix.
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>  
<a name="l50"><span class="linenum">  50</span></a>  
<a name="l51"><span class="linenum">  51</span></a>  &lt;a name=&quot;permissions&quot;&gt;&lt;/a&gt;
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">## Permissions in Bonfire</span>
<a name="l53"><span class="linenum">  53</span></a>  
<a name="l54"><span class="linenum">  54</span></a>  Permissions in Bonfire are modeled after the excellent and easily-understandable permission naming system in &lt;a href=&quot;http://vanillaforums.org&quot;&gt;Vanilla Forums&lt;/a&gt;. Permissions are described in 3-part, human-readable formats that allow for nearly any type of permission to be created. This allows both the admin screens and your code to maintain a high degree of readability.
<a name="l55"><span class="linenum">  55</span></a>  
<a name="l56"><span class="linenum">  56</span></a>  &lt;a name=&quot;naming&quot;&gt;&lt;/a&gt;
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">### Naming Permissions</span>
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>  Permissions are named based on three parts.  Core Bonfire permissions follow this format:
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>      Site.action.permission
<a name="l62"><span class="linenum">  62</span></a>      e.g. Site.Signin.Allow
<a name="l63"><span class="linenum">  63</span></a>  
<a name="l64"><span class="linenum">  64</span></a>  Bonfire Core modules use the following naming convention (&quot;Bonfire&quot; is always used as the first part):
<a name="l65"><span class="linenum">  65</span></a>  
<a name="l66"><span class="linenum">  66</span></a>      Bonfire.module.action
<a name="l67"><span class="linenum">  67</span></a>      e.g. Bonfire.Roles.View
<a name="l68"><span class="linenum">  68</span></a>  
<a name="l69"><span class="linenum">  69</span></a>  In non-core <a class="function" onClick="logFunction('modules')" href="../../_functions/modules.html" onMouseOver="funcPopup(event,'modules')">modules</a> (Modules you create or by the Code Builder) the naming follows this format:
<a name="l70"><span class="linenum">  70</span></a>  
<a name="l71"><span class="linenum">  71</span></a>      module.context.action
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>  * **Module** is typically the name of your module, or a portion of it.
<a name="l74"><span class="linenum">  74</span></a>  * **Context** can be one of several things depending on your needs.
<a name="l75"><span class="linenum">  75</span></a>  * **Action** is a single action that can be checked.  Common actions are View, Add, and Manage, but can be whatever you need. Common actions are Manage, View, Edit, Delete.
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>  
<a name="l78"><span class="linenum">  78</span></a>  &lt;a name=&quot;creating_perms&quot;&gt;&lt;/a&gt;
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">### Creating Permissions</span>
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>  New permissions can easily be created through the Admin UI by navigating to Settings / Permissions.  This screen will provide a list of all existing permissions as well as the option to create new ones.
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>  Each permission has the following three properties...
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>  * **Name** is the permission itself, following the naming scheme outlined above.
<a name="l86"><span class="linenum">  86</span></a>  * **Description** is a short string describing the permission and itâ€™s use.  This is only used for display in the Permissions overview page.
<a name="l87"><span class="linenum">  87</span></a>  * **Status** allows permissions to still be available in the system, but not to actually be used.  This can be used as a placeholder for in-development features.
<a name="l88"><span class="linenum">  88</span></a>  
<a name="l89"><span class="linenum">  89</span></a>  &lt;a name=&quot;assigning_perms&quot;&gt;&lt;/a&gt;
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment">### Assigning Permissions</span>
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>  Permissions can be assigned to roles through the &lt;tt&gt;Edit Role&lt;/tt&gt; screen. Alternatively, they can be assigned to all roles at once by viewing the &lt;tt&gt;Permission Matrix&lt;/tt&gt;, available from both the Roles and Permissions screen.
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>  
<a name="l95"><span class="linenum">  95</span></a>  
<a name="l96"><span class="linenum">  96</span></a>  &lt;a name=&quot;access&quot;&gt;&lt;/a&gt;
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">## Restricting Access</span>
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>  The &lt;tt&gt;Auth&lt;/tt&gt; library provides several useful methods to restrict access, or check access, from any place in your application. If not already loaded, you can load the Auth library with the following code:
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>      <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('load')" class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" href="../../_variables/load.html">load</a>-&gt;<a class="function" onClick="logFunction('library')" href="../../_functions/library.html" onMouseOver="funcPopup(event,'library')">library</a>('users/auth');
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>  
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>  &lt;a name=&quot;restrict&quot;&gt;&lt;/a&gt;
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">### &lt;tt&gt;restrict()&lt;/tt&gt;</span>
<a name="l107"><span class="linenum"> 107</span></a>  
<a name="l108"><span class="linenum"> 108</span></a>  The &lt;tt&gt;<a class="function" onClick="logFunction('restrict')" href="../../_functions/restrict.html" onMouseOver="funcPopup(event,'restrict')">restrict</a>()&lt;/tt&gt; method can be used to protect an entire method or even class. If used without any parameters, it will simply verify that the user is logged in. If they are not, it will redirect them to the login page.
<a name="l109"><span class="linenum"> 109</span></a>  
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>      <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('auth')" class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" href="../../_variables/auth.html">auth</a>-&gt;<a class="function" onClick="logFunction('restrict')" href="../../_functions/restrict.html" onMouseOver="funcPopup(event,'restrict')">restrict</a>();
<a name="l112"><span class="linenum"> 112</span></a>  
<a name="l113"><span class="linenum"> 113</span></a>  
<a name="l114"><span class="linenum"> 114</span></a>  You can require that a user has a certain Permission granted by passing the name of the permission as the first parameter. You do not have to match the case of the original permission string, as it will be converted to lowercase prior to checking.
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>  
<a name="l117"><span class="linenum"> 117</span></a>      <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('auth')" class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" href="../../_variables/auth.html">auth</a>-&gt;<a class="function" onClick="logFunction('restrict')" href="../../_functions/restrict.html" onMouseOver="funcPopup(event,'restrict')">restrict</a>('Bonfire.Users.Manage');
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>  
<a name="l120"><span class="linenum"> 120</span></a>  If a user does not have the required permission granted to them, they will be directed to their previous page. You can change the URI they are redirected to by passing it in as the second parameter. This can be either a relative or full URI path.
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>  
<a name="l123"><span class="linenum"> 123</span></a>      <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('auth')" class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" href="../../_variables/auth.html">auth</a>-&gt;<a class="function" onClick="logFunction('restrict')" href="../../_functions/restrict.html" onMouseOver="funcPopup(event,'restrict')">restrict</a>('Bonfire.Users.Manage', '/get-outtat-here.html');
<a name="l124"><span class="linenum"> 124</span></a>  
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>  
<a name="l127"><span class="linenum"> 127</span></a>  &lt;a name=&quot;is_logged_in&quot;&gt;&lt;/a&gt;
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">### &lt;tt&gt;is_logged_in()&lt;/tt&gt;</span>
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>  You can check if a user is logged in with the &lt;tt&gt;<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>()&lt;/tt&gt; method. This can be used in your own controller and libraries, as well as in your views to display different information to logged in and logged out users.
<a name="l131"><span class="linenum"> 131</span></a>  
<a name="l132"><span class="linenum"> 132</span></a>  
<a name="l133"><span class="linenum"> 133</span></a>      if (<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('auth')" class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" href="../../_variables/auth.html">auth</a>-&gt;<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>())
<a name="l134"><span class="linenum"> 134</span></a>      {
<a name="l135"><span class="linenum"> 135</span></a>          . . .
<a name="l136"><span class="linenum"> 136</span></a>      }
<a name="l137"><span class="linenum"> 137</span></a>      else
<a name="l138"><span class="linenum"> 138</span></a>      {
<a name="l139"><span class="linenum"> 139</span></a>          . . .
<a name="l140"><span class="linenum"> 140</span></a>      }
<a name="l141"><span class="linenum"> 141</span></a>  
<a name="l142"><span class="linenum"> 142</span></a>  
<a name="l143"><span class="linenum"> 143</span></a>  Note that the first time in a session that this function is called, it will verify their identity stored in the session matches their hashed password information in the database. It then sets a flag that can be used for later checks to increase performance, while still maintaining a high level of security.
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>  &lt;a name=&quot;has_permission&quot;&gt;&lt;/a&gt;
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">### &lt;tt&gt;has_permission()&lt;/tt&gt;</span>
<a name="l147"><span class="linenum"> 147</span></a>  
<a name="l148"><span class="linenum"> 148</span></a>  The &lt;tt&gt;<a class="function" onClick="logFunction('has_permission')" href="../../_functions/has_permission.html" onMouseOver="funcPopup(event,'has_permission')">has_permission</a>()&lt;/tt&gt; method allows you to check if the current logged-in user has a specified permission. You pass the name of the permission to check in as the first parameter.
<a name="l149"><span class="linenum"> 149</span></a>  
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>      if ( ! <a class="function" onClick="logFunction('has_permission')" href="../../_functions/has_permission.html" onMouseOver="funcPopup(event,'has_permission')">has_permission</a>('Bonfire.Users.Manage'))
<a name="l153"><span class="linenum"> 153</span></a>      {
<a name="l154"><span class="linenum"> 154</span></a>          . . .
<a name="l155"><span class="linenum"> 155</span></a>      }
<a name="l156"><span class="linenum"> 156</span></a>  
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>  
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>  &lt;a name=&quot;permission_exists&quot;&gt;&lt;/a&gt;
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">### &lt;tt&gt;permission_exists()&lt;/tt&gt;</span>
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>  This function allows you to quickly check whether a permission exists in the databse or not. Simply pass in the permission name to check as the first parameter.
<a name="l164"><span class="linenum"> 164</span></a>  
<a name="l165"><span class="linenum"> 165</span></a>  
<a name="l166"><span class="linenum"> 166</span></a>      if (<a class="function" onClick="logFunction('permission_exists')" href="../../_functions/permission_exists.html" onMouseOver="funcPopup(event,'permission_exists')">permission_exists</a>('Bonfire.Users.Manage'))
<a name="l167"><span class="linenum"> 167</span></a>      {
<a name="l168"><span class="linenum"> 168</span></a>          . . .
<a name="l169"><span class="linenum"> 169</span></a>      }
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>  
<a name="l172"><span class="linenum"> 172</span></a>  &lt;a name=&quot;passwords&quot;&gt;&lt;/a&gt;
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">## Passwords</span>
<a name="l174"><span class="linenum"> 174</span></a>  
<a name="l175"><span class="linenum"> 175</span></a>  While passwords are generally managed through the users module, the auth library includes a couple of basic functions for password management.
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment">### &lt;tt&gt;check_password()&lt;/tt&gt;</span>
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>  The &lt;tt&gt;<a class="function" onClick="logFunction('check_password')" href="../../_functions/check_password.html" onMouseOver="funcPopup(event,'check_password')">check_password</a>()&lt;/tt&gt; method allows you to verify that a given password matches a password hash.
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>      if (<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('auth')" class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" href="../../_variables/auth.html">auth</a>-&gt;<a class="function" onClick="logFunction('check_password')" href="../../_functions/check_password.html" onMouseOver="funcPopup(event,'check_password')">check_password</a>('password to check', 'HashedPassword'))
<a name="l182"><span class="linenum"> 182</span></a>      {
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">        // The passwords match</span>
<a name="l184"><span class="linenum"> 184</span></a>          ...
<a name="l185"><span class="linenum"> 185</span></a>      }
<a name="l186"><span class="linenum"> 186</span></a>  
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">### &lt;tt&gt;hash_password()&lt;/tt&gt;</span>
<a name="l188"><span class="linenum"> 188</span></a>  
<a name="l189"><span class="linenum"> 189</span></a>  The &lt;tt&gt;<a class="function" onClick="logFunction('hash_password')" href="../../_functions/hash_password.html" onMouseOver="funcPopup(event,'hash_password')">hash_password</a>()&lt;/tt&gt; method allows you to hash a password with an optional number of iterations (if not supplied, the site's password_iterations setting will be used). This should not be used to check a password, since hashing the same password again won't match a stored hash.
<a name="l190"><span class="linenum"> 190</span></a>  
<a name="l191"><span class="linenum"> 191</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('password')" href="../../_variables/password.html">$password</a> = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('auth')" class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" href="../../_variables/auth.html">auth</a>-&gt;<a class="function" onClick="logFunction('hash_password')" href="../../_functions/hash_password.html" onMouseOver="funcPopup(event,'hash_password')">hash_password</a>('password');
<a name="l192"><span class="linenum"> 192</span></a>      <a class="var it1452" onMouseOver="hilite(1452)" onMouseOut="lolite()" onClick="logVariable('hash')" href="../../_variables/hash.html">$hash</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('password')" href="../../_variables/password.html">$password</a>['hash'];
<a name="l193"><span class="linenum"> 193</span></a>      <a class="var it2344" onMouseOver="hilite(2344)" onMouseOut="lolite()" onClick="logVariable('iterations_used')" href="../../_variables/iterations_used.html">$iterations_used</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('password')" href="../../_variables/password.html">$password</a>['iterations'];
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'permission_exists': ['permission_exists', 'Checks to see whether a permission is in the system ', [['bonfire/modules/permissions/models','permission_model.php',214],['bonfire/modules/users/libraries','auth.php',516],['bonfire/modules/users/libraries','auth.php',1070]], 7],
'check_password': ['check_password', 'Check the supplied password against the supplied hash ', [['bonfire/modules/users/libraries','auth.php',694]], 4],
'is_logged_in': ['is_logged_in', 'Checks the session for the required info, then verifies against the database. ', [['bonfire/modules/users/libraries','auth.php',336]], 13],
'restrict': ['restrict', 'Checks that a user is logged in (and, optionally of the correct role) and, if not, send them to the login screen. ', [['bonfire/modules/users/libraries','auth.php',351]], 48],
'hash_password': ['hash_password', 'Generates a new password hash for the given password. ', [['bonfire/modules/users/models','user_model.php',610],['bonfire/modules/users/libraries','auth.php',653]], 6],
'has_permission': ['has_permission', 'Verifies that the user is logged in and has the appropriate access permissions. ', [['bonfire/modules/users/libraries','auth.php',468],['bonfire/modules/users/libraries','auth.php',1047]], 64],
'modules': ['modules', '', [['application/third_party/MX','Loader.php',233],['bonfire/modules/sysinfo/controllers','developer.php',72]], 2],
'library': ['library', '', [['application/third_party/MX','Loader.php',137],['bonfire/codeigniter/core','Loader.php',183]], 96]};
CLASS_DATA={
'users': ['users', 'Users Controller ', [['bonfire/modules/users/controllers','users.php',18]], 4]};
CONST_DATA={
};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Oct 23 18:57:41 2014</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
