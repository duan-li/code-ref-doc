<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /bonfire/modules/roles/docs/index.md source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Oct 23 18:57:41 2014 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='bonfire/modules/roles/docs';
filename='index.md.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/bonfire/modules/roles/docs/</a> -> <a href="index.md.html">index.md</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="index.md.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="index.md.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  <span class="comment"># Roles for Developers</span>
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">## Initializing the Model</span>
<a name="l4"><span class="linenum">   4</span></a>  
<a name="l5"><span class="linenum">   5</span></a>  Like most other models in CodeIgniter, the Roles Model is initialized in your controller by using the <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('load')" class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" href="../../../../_variables/load.html">load</a>-&gt;model function:
<a name="l6"><span class="linenum">   6</span></a>  
<a name="l7"><span class="linenum">   7</span></a>      <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('load')" class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" href="../../../../_variables/load.html">load</a>-&gt;<a class="function" onClick="logFunction('model')" href="../../../../_functions/model.html" onMouseOver="funcPopup(event,'model')">model</a>('roles/role_model');
<a name="l8"><span class="linenum">   8</span></a>  
<a name="l9"><span class="linenum">   9</span></a>  Once loaded, the Activities features will be avialable by using &lt;tt&gt;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('role_model')" class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" href="../../../../_variables/role_model.html">role_model</a>&lt;/tt&gt;.
<a name="l10"><span class="linenum">  10</span></a>  
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">## Basic Usage</span>
<a name="l12"><span class="linenum">  12</span></a>  
<a name="l13"><span class="linenum">  13</span></a>  The role model extends from BF_Model, providing all of the default features of that model. In addition, the following methods are provided.
<a name="l14"><span class="linenum">  14</span></a>  
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">### find()</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  The find method works as the standard &lt;tt&gt;<a class="function" onClick="logFunction('find')" href="../../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>()&lt;/tt&gt; from BF_Model. However, it also grabs the permissions for that role and returns them as an array.
<a name="l18"><span class="linenum">  18</span></a>  
<a name="l19"><span class="linenum">  19</span></a>      <a class="var it723" onMouseOver="hilite(723)" onMouseOut="lolite()" onClick="logVariable('role')" href="../../../../_variables/role.html">$role</a> = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('role_model')" class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" href="../../../../_variables/role_model.html">role_model</a>-&gt;<a class="function" onClick="logFunction('find')" href="../../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../../_variables/id.html">$id</a>);
<a name="l20"><span class="linenum">  20</span></a>  
<a name="l21"><span class="linenum">  21</span></a>      <a class="phpfunction" onClick="logFunction('print_r')" href="../../../../_functions/print_r.html" onMouseOver="phpfuncPopup(event,'print_r')">print_r</a>(<a class="var it723" onMouseOver="hilite(723)" onMouseOut="lolite()" onClick="logVariable('role')" href="../../../../_variables/role.html">$role</a>);
<a name="l22"><span class="linenum">  22</span></a>  
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment">    // Returns:</span>
<a name="l24"><span class="linenum">  24</span></a>      stdClass Object
<a name="l25"><span class="linenum">  25</span></a>      (
<a name="l26"><span class="linenum">  26</span></a>          [role_id] =&gt; 1
<a name="l27"><span class="linenum">  27</span></a>          [role_name] =&gt; Administrator
<a name="l28"><span class="linenum">  28</span></a>          [description] =&gt; Has full control over every aspect of the site.
<a name="l29"><span class="linenum">  29</span></a>          [default] =&gt; 0
<a name="l30"><span class="linenum">  30</span></a>          [can_delete] =&gt; 0
<a name="l31"><span class="linenum">  31</span></a>          [login_destination] =&gt;
<a name="l32"><span class="linenum">  32</span></a>          [deleted] =&gt; 0
<a name="l33"><span class="linenum">  33</span></a>          [default_context] =&gt; content
<a name="l34"><span class="linenum">  34</span></a>          [permissions] =&gt; Array
<a name="l35"><span class="linenum">  35</span></a>          (
<a name="l36"><span class="linenum">  36</span></a>              [Site.Content.View] =&gt; stdClass Object
<a name="l37"><span class="linenum">  37</span></a>              (
<a name="l38"><span class="linenum">  38</span></a>                  [permission_id] =&gt; 2
<a name="l39"><span class="linenum">  39</span></a>                  [name] =&gt; Site.Content.View
<a name="l40"><span class="linenum">  40</span></a>                  [description] =&gt; Allow users to view the Content Context
<a name="l41"><span class="linenum">  41</span></a>                  [status] =&gt; active
<a name="l42"><span class="linenum">  42</span></a>              )
<a name="l43"><span class="linenum">  43</span></a>              . . .
<a name="l44"><span class="linenum">  44</span></a>          )
<a name="l45"><span class="linenum">  45</span></a>          [role_permissions] =&gt; Array
<a name="l46"><span class="linenum">  46</span></a>          (
<a name="l47"><span class="linenum">  47</span></a>              [2] =&gt; 1,
<a name="l48"><span class="linenum">  48</span></a>              [3] =&gt; 1
<a name="l49"><span class="linenum">  49</span></a>              . . .
<a name="l50"><span class="linenum">  50</span></a>          )
<a name="l51"><span class="linenum">  51</span></a>      )
<a name="l52"><span class="linenum">  52</span></a>  
<a name="l53"><span class="linenum">  53</span></a>  The &lt;tt&gt;permissions&lt;/tt&gt; array within the results contains the full contents of the permissions that are assigned to that role. The &lt;tt&gt;role_permissions&lt;/tt&gt; array contains a simple array of the permission ID that role has assigned to it.
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">### find_by_name()</span>
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>  A helper method to retrieve a role by it's name. While the same thing is possible using BF_Model's <a class="function" onClick="logFunction('find_by')" href="../../../../_functions/find_by.html" onMouseOver="funcPopup(event,'find_by')">find_by</a>('name', $..) this is a more readable method. This also retrieves the permissions and role_permissions array.
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>  The only parameter is the name of the role to find. This parameter is case sensitive.
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>      <a class="var it723" onMouseOver="hilite(723)" onMouseOut="lolite()" onClick="logVariable('role')" href="../../../../_variables/role.html">$role</a> = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('role_model')" class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" href="../../../../_variables/role_model.html">role_model</a>-&gt;<a class="function" onClick="logFunction('find_by_name')" href="../../../../_functions/find_by_name.html" onMouseOver="funcPopup(event,'find_by_name')">find_by_name</a>('administrator');
<a name="l62"><span class="linenum">  62</span></a>  
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">### update()</span>
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>  This extends the BF_Model update method to perform deal with default roles. When the update is ran, if the data passed into contains a &lt;tt&gt;default&lt;/tt&gt; value of 1, this method resets all other methods to be non-default.
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">### can_delete_role()</span>
<a name="l68"><span class="linenum">  68</span></a>  
<a name="l69"><span class="linenum">  69</span></a>  Checks the role to see if it's allowed to be deleted or not. Returns TRUE if the role is allowed to be deleted, or FALSE if not. Note that Administrators can always delete roles (except for the Administrator role).
<a name="l70"><span class="linenum">  70</span></a>  
<a name="l71"><span class="linenum">  71</span></a>      if (<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('role_model')" class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" href="../../../../_variables/role_model.html">role_model</a>-&gt;<a class="function" onClick="logFunction('can_delete_role')" href="../../../../_functions/can_delete_role.html" onMouseOver="funcPopup(event,'can_delete_role')">can_delete_role</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../../_variables/id.html">$id</a>)) . . .
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">### delete()</span>
<a name="l74"><span class="linenum">  74</span></a>  
<a name="l75"><span class="linenum">  75</span></a>  Deletes a role. First ensures the role is allowed to be deleted and is not the default role. Any users that belonged to this role are assigned to the current default role. All permissions that were assigned to this role are cleaned up in the database.  Returns TRUE if the role was able to be deleted, or FALSE if it was not.
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>      <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('role_model')" class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" href="../../../../_variables/role_model.html">role_model</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../../_variables/id.html">$id</a>);
<a name="l78"><span class="linenum">  78</span></a>  
<a name="l79"><span class="linenum">  79</span></a>  When that role is deleted, the role is always considered to be a soft_delete and the role will stay in the database. If you want the role to be permenantly deleted from the database, you can pass TRUE in as the second parameter.
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>      <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('role_model')" class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" href="../../../../_variables/role_model.html">role_model</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../../_variables/id.html">$id</a>, true);
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">### default_role_id()</span>
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>  Returns the id of the role that is currently set to be the default role for <span class="keyword">new </span><a class="class" onClick="logClass('users')" href="../../../../_classes/users.html" onMouseOver="classPopup(event,'users')">users</a>.
<a name="l86"><span class="linenum">  86</span></a>  
<a name="l87"><span class="linenum">  87</span></a>      <a class="var it2787" onMouseOver="hilite(2787)" onMouseOut="lolite()" onClick="logVariable('default_id')" href="../../../../_variables/default_id.html">$default_id</a> = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('role_model')" class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" href="../../../../_variables/role_model.html">role_model</a>-&gt;<a class="function" onClick="logFunction('default_role_id')" href="../../../../_functions/default_role_id.html" onMouseOver="funcPopup(event,'default_role_id')">default_role_id</a>();
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'can_delete_role': ['can_delete_role', 'Verifies that a role can be deleted. ', [['bonfire/modules/roles/models','role_model.php',194]], 3],
'delete': ['delete', 'Deletes the entries in the activity log for the specified area. ', [['bonfire/modules/activities/controllers','reports.php',202],['bonfire/libraries','BF_Cache_file.php',102],['bonfire/modules/settings/libraries','settings_lib.php',178],['bonfire/codeigniter/database','DB_active_rec.php',1509],['bonfire/modules/roles/models','role_permission_model.php',168],['bonfire/codeigniter/libraries/Cache/drivers','Cache_apc.php',64],['tests/simpletest','web_tester.php',733],['tests/_support','database.php',39],['bonfire/codeigniter/libraries/Cache/drivers','Cache_memcached.php',81],['bonfire/modules/permissions/models','permission_model.php',113],['bonfire/codeigniter/database','DB_cache.php',155],['bonfire/codeigniter/libraries/Cache/drivers','Cache_file.php',102],['bonfire/modules/roles/models','role_model.php',217],['bonfire/codeigniter/libraries/Cache','Cache.php',86],['bonfire/codeigniter/libraries/Cache/drivers','Cache_dummy.php',61],['application/core','MY_Model.php',777],['tests/simpletest','browser.php',540],['bonfire/modules/builder/controllers','developer.php',278],['bonfire/modules/users/models','user_model.php',561]], 83],
'default_role_id': ['default_role_id', 'Returns the id of the default role. ', [['bonfire/modules/roles/models','role_model.php',300]], 5],
'model': ['model', '', [['application/third_party/MX','Loader.php',180],['bonfire/codeigniter/core','Loader.php',221]], 60],
'find_by': ['find_by', 'Find By ', [['bonfire/modules/settings/libraries','settings_lib.php',241],['application/core','MY_Model.php',526],['bonfire/modules/users/models','user_model.php',476]], 25],
'find': ['find', '', [['bonfire/docs','bonfire_models.md',631],['bonfire/modules/roles/models','role_model.php',109],['application/core','MY_Model.php',409],['bonfire/modules/users/models','user_model.php',430],['application/third_party/MX','Modules.php',168]], 252],
'find_by_name': ['find_by_name', 'Locates a role based on the role name. Case doesn\'t matter. ', [['bonfire/modules/roles/models','role_model.php',140]], 2],
'print_r': ['print_r', '', [], 20]};
CLASS_DATA={
'users': ['users', 'Users Controller ', [['bonfire/modules/users/controllers','users.php',18]], 4]};
CONST_DATA={
};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Oct 23 18:57:41 2014</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
