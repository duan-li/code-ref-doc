<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /tests/simpletest/docs/en/mock_objects_documentation.html source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Oct 23 18:57:41 2014 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='tests/simpletest/docs/en';
filename='mock_objects_documentation.html.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/tests/simpletest/docs/en/</a> -> <a href="mock_objects_documentation.html.html">mock_objects_documentation.html</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="mock_objects_documentation.html.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="mock_objects_documentation.html.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;html&gt;
<a name="l2"><span class="linenum">   2</span></a>  &lt;head&gt;
<a name="l3"><span class="linenum">   3</span></a>  &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;
<a name="l4"><span class="linenum">   4</span></a>  &lt;title&gt;SimpleTest for PHP mock objects documentation&lt;/title&gt;
<a name="l5"><span class="linenum">   5</span></a>  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;docs.css&quot; title=&quot;Styles&quot;&gt;
<a name="l6"><span class="linenum">   6</span></a>  &lt;/head&gt;
<a name="l7"><span class="linenum">   7</span></a>  &lt;body&gt;
<a name="l8"><span class="linenum">   8</span></a>  &lt;div class=&quot;menu_back&quot;&gt;&lt;div class=&quot;menu&quot;&gt;
<a name="l9"><span class="linenum">   9</span></a>  &lt;a href=&quot;index.html&quot;&gt;SimpleTest&lt;/a&gt;
<a name="l10"><span class="linenum">  10</span></a>                  |
<a name="l11"><span class="linenum">  11</span></a>                  &lt;a href=&quot;overview.html&quot;&gt;Overview&lt;/a&gt;
<a name="l12"><span class="linenum">  12</span></a>                  |
<a name="l13"><span class="linenum">  13</span></a>                  &lt;a href=&quot;unit_test_documentation.html&quot;&gt;Unit tester&lt;/a&gt;
<a name="l14"><span class="linenum">  14</span></a>                  |
<a name="l15"><span class="linenum">  15</span></a>                  &lt;a href=&quot;group_test_documentation.html&quot;&gt;Group tests&lt;/a&gt;
<a name="l16"><span class="linenum">  16</span></a>                  |
<a name="l17"><span class="linenum">  17</span></a>                  &lt;span class=&quot;chosen&quot;&gt;Mock objects&lt;/span&gt;
<a name="l18"><span class="linenum">  18</span></a>                  |
<a name="l19"><span class="linenum">  19</span></a>                  &lt;a href=&quot;partial_mocks_documentation.html&quot;&gt;Partial mocks&lt;/a&gt;
<a name="l20"><span class="linenum">  20</span></a>                  |
<a name="l21"><span class="linenum">  21</span></a>                  &lt;a href=&quot;reporter_documentation.html&quot;&gt;Reporting&lt;/a&gt;
<a name="l22"><span class="linenum">  22</span></a>                  |
<a name="l23"><span class="linenum">  23</span></a>                  &lt;a href=&quot;expectation_documentation.html&quot;&gt;Expectations&lt;/a&gt;
<a name="l24"><span class="linenum">  24</span></a>                  |
<a name="l25"><span class="linenum">  25</span></a>                  &lt;a href=&quot;web_tester_documentation.html&quot;&gt;Web tester&lt;/a&gt;
<a name="l26"><span class="linenum">  26</span></a>                  |
<a name="l27"><span class="linenum">  27</span></a>                  &lt;a href=&quot;form_testing_documentation.html&quot;&gt;Testing forms&lt;/a&gt;
<a name="l28"><span class="linenum">  28</span></a>                  |
<a name="l29"><span class="linenum">  29</span></a>                  &lt;a href=&quot;authentication_documentation.html&quot;&gt;Authentication&lt;/a&gt;
<a name="l30"><span class="linenum">  30</span></a>                  |
<a name="l31"><span class="linenum">  31</span></a>                  &lt;a href=&quot;browser_documentation.html&quot;&gt;Scriptable browser&lt;/a&gt;
<a name="l32"><span class="linenum">  32</span></a>  &lt;/div&gt;&lt;/div&gt;
<a name="l33"><span class="linenum">  33</span></a>  &lt;h1&gt;Mock objects documentation&lt;/h1&gt;
<a name="l34"><span class="linenum">  34</span></a>          This page...
<a name="l35"><span class="linenum">  35</span></a>          &lt;ul&gt;
<a name="l36"><span class="linenum">  36</span></a>  &lt;li&gt;
<a name="l37"><span class="linenum">  37</span></a>              &lt;a href=&quot;#what&quot;&gt;What are mock objects?&lt;/a&gt;
<a name="l38"><span class="linenum">  38</span></a>          &lt;/li&gt;
<a name="l39"><span class="linenum">  39</span></a>  &lt;li&gt;
<a name="l40"><span class="linenum">  40</span></a>              &lt;a href=&quot;#creation&quot;&gt;Creating mock objects&lt;/a&gt;.
<a name="l41"><span class="linenum">  41</span></a>          &lt;/li&gt;
<a name="l42"><span class="linenum">  42</span></a>  &lt;li&gt;
<a name="l43"><span class="linenum">  43</span></a>              &lt;a href=&quot;#expectations&quot;&gt;Mocks as critics&lt;/a&gt; with expectations.
<a name="l44"><span class="linenum">  44</span></a>          &lt;/li&gt;
<a name="l45"><span class="linenum">  45</span></a>  &lt;/ul&gt;
<a name="l46"><span class="linenum">  46</span></a>  &lt;div class=&quot;content&quot;&gt;
<a name="l47"><span class="linenum">  47</span></a>          &lt;h2&gt;
<a name="l48"><span class="linenum">  48</span></a>  &lt;a class=&quot;target&quot; name=&quot;what&quot;&gt;&lt;/a&gt;What are mock objects?&lt;/h2&gt;
<a name="l49"><span class="linenum">  49</span></a>              &lt;p&gt;
<a name="l50"><span class="linenum">  50</span></a>                  Mock objects have two roles during a test case: actor and critic.
<a name="l51"><span class="linenum">  51</span></a>              &lt;/p&gt;
<a name="l52"><span class="linenum">  52</span></a>              &lt;p&gt;
<a name="l53"><span class="linenum">  53</span></a>                  The actor behaviour is to simulate objects that are difficult to
<a name="l54"><span class="linenum">  54</span></a>                  set up or time consuming to set up for a test.
<a name="l55"><span class="linenum">  55</span></a>                  The classic example is a database connection.
<a name="l56"><span class="linenum">  56</span></a>                  Setting up a test database at the start of each test would slow
<a name="l57"><span class="linenum">  57</span></a>                  testing to a crawl and would require the installation of the
<a name="l58"><span class="linenum">  58</span></a>                  database engine and test data on the test machine.
<a name="l59"><span class="linenum">  59</span></a>                  If we can simulate the connection and return data of our
<a name="l60"><span class="linenum">  60</span></a>                  choosing we not only win on the pragmatics of testing, but can
<a name="l61"><span class="linenum">  61</span></a>                  also feed our code spurious data to see how it responds.
<a name="l62"><span class="linenum">  62</span></a>                  We can simulate databases being down or other extremes
<a name="l63"><span class="linenum">  63</span></a>                  without having to create a broken database for real.
<a name="l64"><span class="linenum">  64</span></a>                  In other words, we get greater control of the test environment.
<a name="l65"><span class="linenum">  65</span></a>              &lt;/p&gt;
<a name="l66"><span class="linenum">  66</span></a>              &lt;p&gt;
<a name="l67"><span class="linenum">  67</span></a>                  If mock objects only behaved as actors they would simply be
<a name="l68"><span class="linenum">  68</span></a>                  known as &quot;server stubs&quot;.
<a name="l69"><span class="linenum">  69</span></a>                  This was originally a pattern named by Robert Binder (&lt;a href=&quot;&quot;&gt;Testing
<a name="l70"><span class="linenum">  70</span></a>                  object-oriented systems&lt;/a&gt;: models, patterns, and tools,
<a name="l71"><span class="linenum">  71</span></a>                  Addison-Wesley) in 1999.
<a name="l72"><span class="linenum">  72</span></a>              &lt;/p&gt;
<a name="l73"><span class="linenum">  73</span></a>              &lt;p&gt;
<a name="l74"><span class="linenum">  74</span></a>                  A server stub is a simulation of an object or component.
<a name="l75"><span class="linenum">  75</span></a>                  It should exactly replace a component in a system for test
<a name="l76"><span class="linenum">  76</span></a>                  or prototyping purposes, but remain lightweight.
<a name="l77"><span class="linenum">  77</span></a>                  This allows tests to run more quickly, or if the simulated
<a name="l78"><span class="linenum">  78</span></a>                  class has not been written, to run at all.
<a name="l79"><span class="linenum">  79</span></a>              &lt;/p&gt;
<a name="l80"><span class="linenum">  80</span></a>              &lt;p&gt;
<a name="l81"><span class="linenum">  81</span></a>                  However, the mock objects not only play a part (by supplying chosen
<a name="l82"><span class="linenum">  82</span></a>                  return values on demand) they are also sensitive to the
<a name="l83"><span class="linenum">  83</span></a>                  messages sent to them (via expectations).
<a name="l84"><span class="linenum">  84</span></a>                  By setting expected parameters for a method call they act
<a name="l85"><span class="linenum">  85</span></a>                  as a guard that the calls upon them are made correctly.
<a name="l86"><span class="linenum">  86</span></a>                  If expectations are not met they save us the effort of
<a name="l87"><span class="linenum">  87</span></a>                  writing a failed test assertion by performing that duty on our
<a name="l88"><span class="linenum">  88</span></a>                  behalf.
<a name="l89"><span class="linenum">  89</span></a>              &lt;/p&gt;
<a name="l90"><span class="linenum">  90</span></a>              &lt;p&gt;
<a name="l91"><span class="linenum">  91</span></a>                  In the case of an imaginary database connection they can
<a name="l92"><span class="linenum">  92</span></a>                  test that the query, say SQL, was correctly formed by
<a name="l93"><span class="linenum">  93</span></a>                  the object that is using the connection.
<a name="l94"><span class="linenum">  94</span></a>                  Set them up with fairly tight expectations and you will
<a name="l95"><span class="linenum">  95</span></a>                  hardly need manual assertions at all.
<a name="l96"><span class="linenum">  96</span></a>              &lt;/p&gt;
<a name="l97"><span class="linenum">  97</span></a>          
<a name="l98"><span class="linenum">  98</span></a>          &lt;h2&gt;
<a name="l99"><span class="linenum">  99</span></a>  &lt;a class=&quot;target&quot; name=&quot;creation&quot;&gt;&lt;/a&gt;Creating mock objects&lt;/h2&gt;
<a name="l100"><span class="linenum"> 100</span></a>              &lt;p&gt;
<a name="l101"><span class="linenum"> 101</span></a>                  All we need is an existing class or interface, say a database connection
<a name="l102"><span class="linenum"> 102</span></a>                  that looks like this...
<a name="l103"><span class="linenum"> 103</span></a>  &lt;pre&gt;
<a name="l104"><span class="linenum"> 104</span></a>  &lt;strong&gt;class DatabaseConnection {
<a name="l105"><span class="linenum"> 105</span></a>      function <a class="function" onClick="logFunction('DatabaseConnection')" href="../../../../_functions/databaseconnection.html" onMouseOver="funcPopup(event,'databaseconnection')">DatabaseConnection</a>() { }
<a name="l106"><span class="linenum"> 106</span></a>      function <a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a>) { }
<a name="l107"><span class="linenum"> 107</span></a>      function <a class="function" onClick="logFunction('selectQuery')" href="../../../../_functions/selectquery.html" onMouseOver="funcPopup(event,'selectquery')">selectQuery</a>(<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a>) { }
<a name="l108"><span class="linenum"> 108</span></a>  }&lt;/strong&gt;
<a name="l109"><span class="linenum"> 109</span></a>  &lt;/pre&gt;
<a name="l110"><span class="linenum"> 110</span></a>                  To create a mock version of the class we need to run a
<a name="l111"><span class="linenum"> 111</span></a>                  code generator...
<a name="l112"><span class="linenum"> 112</span></a>  &lt;pre&gt;
<a name="l113"><span class="linenum"> 113</span></a>  require_once('simpletest/autorun.php');
<a name="l114"><span class="linenum"> 114</span></a>  require_once('database_connection.php');
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>  &lt;strong&gt;<a class="class" onClick="logClass('Mock')" href="../../../../_classes/mock.html" onMouseOver="classPopup(event,'mock')">Mock</a>::<a class="function" onClick="logFunction('generate')" href="../../../../_functions/generate.html" onMouseOver="funcPopup(event,'generate')">generate</a>('DatabaseConnection');&lt;/strong&gt;
<a name="l117"><span class="linenum"> 117</span></a>  &lt;/pre&gt;
<a name="l118"><span class="linenum"> 118</span></a>                  This code generates a clone class called
<a name="l119"><span class="linenum"> 119</span></a>                  &lt;span class=&quot;new_code&quot;&gt;MockDatabaseConnection&lt;/span&gt;.
<a name="l120"><span class="linenum"> 120</span></a>                  This new class appears to be the same, but actually has no behaviour at all.
<a name="l121"><span class="linenum"> 121</span></a>              &lt;/p&gt;
<a name="l122"><span class="linenum"> 122</span></a>              &lt;p&gt;
<a name="l123"><span class="linenum"> 123</span></a>                  The new class is usually a subclass of &lt;span class=&quot;new_code&quot;&gt;DatabaseConnection&lt;/span&gt;.
<a name="l124"><span class="linenum"> 124</span></a>                  Unfortunately, there is no way to create a mock version of a
<a name="l125"><span class="linenum"> 125</span></a>                  class with a &lt;span class=&quot;new_code&quot;&gt;final&lt;/span&gt; method without having a living version of
<a name="l126"><span class="linenum"> 126</span></a>                  that method.
<a name="l127"><span class="linenum"> 127</span></a>                  We consider that unsafe.
<a name="l128"><span class="linenum"> 128</span></a>                  If the target is an interface, or if &lt;span class=&quot;new_code&quot;&gt;final&lt;/span&gt; methods are
<a name="l129"><span class="linenum"> 129</span></a>                  present in a target class, then a whole new class
<a name="l130"><span class="linenum"> 130</span></a>                  is created, but one implemeting the same interfaces.
<a name="l131"><span class="linenum"> 131</span></a>                  If you try to pass this separate class through a type hint that specifies
<a name="l132"><span class="linenum"> 132</span></a>                  the old concrete class name, it will fail.
<a name="l133"><span class="linenum"> 133</span></a>                  Code like that insists on type hinting to a class with &lt;span class=&quot;new_code&quot;&gt;final&lt;/span&gt;
<a name="l134"><span class="linenum"> 134</span></a>                  methods probably cannot be safely tested with mocks.
<a name="l135"><span class="linenum"> 135</span></a>              &lt;/p&gt;
<a name="l136"><span class="linenum"> 136</span></a>              &lt;p&gt;
<a name="l137"><span class="linenum"> 137</span></a>                  If you want to see the generated code, then simply &lt;span class=&quot;new_code&quot;&gt;print&lt;/span&gt;
<a name="l138"><span class="linenum"> 138</span></a>                  the output of &lt;span class=&quot;new_code&quot;&gt;<a class="class" onClick="logClass('Mock')" href="../../../../_classes/mock.html" onMouseOver="classPopup(event,'mock')">Mock</a>::<a class="function" onClick="logFunction('generate')" href="../../../../_functions/generate.html" onMouseOver="funcPopup(event,'generate')">generate</a>()&lt;/span&gt;.
<a name="l139"><span class="linenum"> 139</span></a>                  Here is the generated code for the &lt;span class=&quot;new_code&quot;&gt;DatabaseConnection&lt;/span&gt;
<a name="l140"><span class="linenum"> 140</span></a>                  class rather than the interface version...
<a name="l141"><span class="linenum"> 141</span></a>  &lt;pre&gt;
<a name="l142"><span class="linenum"> 142</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('MockDatabaseConnection')" href="../../../../_classes/mockdatabaseconnection.html" onMouseOver="classPopup(event,'mockdatabaseconnection')">MockDatabaseConnection</a> extends DatabaseConnection {
<a name="l143"><span class="linenum"> 143</span></a>      public <a class="var it471" onMouseOver="hilite(471)" onMouseOut="lolite()" onClick="logVariable('mock')" href="../../../../_variables/mock.html">$mock</a>;
<a name="l144"><span class="linenum"> 144</span></a>      protected <a class="var it472" onMouseOver="hilite(472)" onMouseOut="lolite()" onClick="logVariable('mocked_methods')" href="../../../../_variables/mocked_methods.html">$mocked_methods</a> = array('databaseconnection', 'query', 'selectquery');
<a name="l145"><span class="linenum"> 145</span></a>  
<a name="l146"><span class="linenum"> 146</span></a>      function <a class="function" onClick="logFunction('MockDatabaseConnection')" href="../../../../_functions/mockdatabaseconnection.html" onMouseOver="funcPopup(event,'mockdatabaseconnection')">MockDatabaseConnection</a>() {
<a name="l147"><span class="linenum"> 147</span></a>          <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&amp;gt;mock = <span class="keyword">new </span><a class="class" onClick="logClass('SimpleMock')" href="../../../../_classes/simplemock.html" onMouseOver="classPopup(event,'simplemock')">SimpleMock</a>();
<a name="l148"><span class="linenum"> 148</span></a>          <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&amp;gt;mock-&amp;gt;<a class="function" onClick="logFunction('disableExpectationNameChecks')" href="../../../../_functions/disableexpectationnamechecks.html" onMouseOver="funcPopup(event,'disableexpectationnamechecks')">disableExpectationNameChecks</a>();
<a name="l149"><span class="linenum"> 149</span></a>      }
<a name="l150"><span class="linenum"> 150</span></a>      ...
<a name="l151"><span class="linenum"> 151</span></a>      function <a class="function" onClick="logFunction('DatabaseConnection')" href="../../../../_functions/databaseconnection.html" onMouseOver="funcPopup(event,'databaseconnection')">DatabaseConnection</a>() {
<a name="l152"><span class="linenum"> 152</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../../_variables/args.html">$args</a> = <a class="phpfunction" onClick="logFunction('func_get_args')" href="../../../../_functions/func_get_args.html" onMouseOver="phpfuncPopup(event,'func_get_args')">func_get_args</a>();
<a name="l153"><span class="linenum"> 153</span></a>          <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> = &amp;amp;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&amp;gt;mock-&amp;gt;<a class="function" onClick="logFunction('invoke')" href="../../../../_functions/invoke.html" onMouseOver="funcPopup(event,'invoke')">invoke</a>(&quot;DatabaseConnection&quot;, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../../_variables/args.html">$args</a>);
<a name="l154"><span class="linenum"> 154</span></a>          return <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>;
<a name="l155"><span class="linenum"> 155</span></a>      }
<a name="l156"><span class="linenum"> 156</span></a>      function <a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a>) {
<a name="l157"><span class="linenum"> 157</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../../_variables/args.html">$args</a> = <a class="phpfunction" onClick="logFunction('func_get_args')" href="../../../../_functions/func_get_args.html" onMouseOver="phpfuncPopup(event,'func_get_args')">func_get_args</a>();
<a name="l158"><span class="linenum"> 158</span></a>          <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> = &amp;amp;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&amp;gt;mock-&amp;gt;<a class="function" onClick="logFunction('invoke')" href="../../../../_functions/invoke.html" onMouseOver="funcPopup(event,'invoke')">invoke</a>(&quot;query&quot;, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../../_variables/args.html">$args</a>);
<a name="l159"><span class="linenum"> 159</span></a>          return <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>;
<a name="l160"><span class="linenum"> 160</span></a>      }
<a name="l161"><span class="linenum"> 161</span></a>      function <a class="function" onClick="logFunction('selectQuery')" href="../../../../_functions/selectquery.html" onMouseOver="funcPopup(event,'selectquery')">selectQuery</a>(<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a>) {
<a name="l162"><span class="linenum"> 162</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../../_variables/args.html">$args</a> = <a class="phpfunction" onClick="logFunction('func_get_args')" href="../../../../_functions/func_get_args.html" onMouseOver="phpfuncPopup(event,'func_get_args')">func_get_args</a>();
<a name="l163"><span class="linenum"> 163</span></a>          <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> = &amp;amp;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&amp;gt;mock-&amp;gt;<a class="function" onClick="logFunction('invoke')" href="../../../../_functions/invoke.html" onMouseOver="funcPopup(event,'invoke')">invoke</a>(&quot;selectQuery&quot;, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../../_variables/args.html">$args</a>);
<a name="l164"><span class="linenum"> 164</span></a>          return <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>;
<a name="l165"><span class="linenum"> 165</span></a>      }
<a name="l166"><span class="linenum"> 166</span></a>  }
<a name="l167"><span class="linenum"> 167</span></a>  &lt;/pre&gt;
<a name="l168"><span class="linenum"> 168</span></a>                  Your output may vary depending on the exact version
<a name="l169"><span class="linenum"> 169</span></a>                  of SimpleTest you are using.
<a name="l170"><span class="linenum"> 170</span></a>              &lt;/p&gt;
<a name="l171"><span class="linenum"> 171</span></a>              &lt;p&gt;
<a name="l172"><span class="linenum"> 172</span></a>                  Besides the original methods of the class, you will see some extra
<a name="l173"><span class="linenum"> 173</span></a>                  methods that help testing.
<a name="l174"><span class="linenum"> 174</span></a>                  More on these later.
<a name="l175"><span class="linenum"> 175</span></a>              &lt;/p&gt;
<a name="l176"><span class="linenum"> 176</span></a>              &lt;p&gt;
<a name="l177"><span class="linenum"> 177</span></a>                  We can now create instances of the new class within
<a name="l178"><span class="linenum"> 178</span></a>                  our test case...
<a name="l179"><span class="linenum"> 179</span></a>  &lt;pre&gt;
<a name="l180"><span class="linenum"> 180</span></a>  require_once('simpletest/autorun.php');
<a name="l181"><span class="linenum"> 181</span></a>  require_once('database_connection.php');
<a name="l182"><span class="linenum"> 182</span></a>  
<a name="l183"><span class="linenum"> 183</span></a>  <a class="class" onClick="logClass('Mock')" href="../../../../_classes/mock.html" onMouseOver="classPopup(event,'mock')">Mock</a>::<a class="function" onClick="logFunction('generate')" href="../../../../_functions/generate.html" onMouseOver="funcPopup(event,'generate')">generate</a>('DatabaseConnection');
<a name="l184"><span class="linenum"> 184</span></a>  
<a name="l185"><span class="linenum"> 185</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('MyTestCase')" href="../../../../_classes/mytestcase.html" onMouseOver="classPopup(event,'mytestcase')">MyTestCase</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('UnitTestCase')" href="../../../../_classes/unittestcase.html" onMouseOver="classPopup(event,'unittestcase')">UnitTestCase</a> {
<a name="l186"><span class="linenum"> 186</span></a>  
<a name="l187"><span class="linenum"> 187</span></a>      function <a class="function" onClick="logFunction('testSomething')" href="../../../../_functions/testsomething.html" onMouseOver="funcPopup(event,'testsomething')">testSomething</a>() {
<a name="l188"><span class="linenum"> 188</span></a>          &lt;strong&gt;<a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('connection')" href="../../../../_variables/connection.html">$connection</a> = <span class="keyword">new </span><a class="class" onClick="logClass('MockDatabaseConnection')" href="../../../../_classes/mockdatabaseconnection.html" onMouseOver="classPopup(event,'mockdatabaseconnection')">MockDatabaseConnection</a>();&lt;/strong&gt;
<a name="l189"><span class="linenum"> 189</span></a>      }
<a name="l190"><span class="linenum"> 190</span></a>  }
<a name="l191"><span class="linenum"> 191</span></a>  &lt;/pre&gt;
<a name="l192"><span class="linenum"> 192</span></a>                  The mock version now has all the methods of the original.
<a name="l193"><span class="linenum"> 193</span></a>                  Also, any type hints will be faithfully preserved.
<a name="l194"><span class="linenum"> 194</span></a>                  Say our query methods expect a &lt;span class=&quot;new_code&quot;&gt;Query&lt;/span&gt; object...
<a name="l195"><span class="linenum"> 195</span></a>  &lt;pre&gt;
<a name="l196"><span class="linenum"> 196</span></a>  &lt;strong&gt;class DatabaseConnection {
<a name="l197"><span class="linenum"> 197</span></a>      function <a class="function" onClick="logFunction('DatabaseConnection')" href="../../../../_functions/databaseconnection.html" onMouseOver="funcPopup(event,'databaseconnection')">DatabaseConnection</a>() { }
<a name="l198"><span class="linenum"> 198</span></a>      function <a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(Query <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>) { }
<a name="l199"><span class="linenum"> 199</span></a>      function <a class="function" onClick="logFunction('selectQuery')" href="../../../../_functions/selectquery.html" onMouseOver="funcPopup(event,'selectquery')">selectQuery</a>(Query <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>) { }
<a name="l200"><span class="linenum"> 200</span></a>  }&lt;/strong&gt;
<a name="l201"><span class="linenum"> 201</span></a>  &lt;/pre&gt;
<a name="l202"><span class="linenum"> 202</span></a>                  If we now pass the wrong type of object, or worse a non-object...
<a name="l203"><span class="linenum"> 203</span></a>  &lt;pre&gt;
<a name="l204"><span class="linenum"> 204</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('MyTestCase')" href="../../../../_classes/mytestcase.html" onMouseOver="classPopup(event,'mytestcase')">MyTestCase</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('UnitTestCase')" href="../../../../_classes/unittestcase.html" onMouseOver="classPopup(event,'unittestcase')">UnitTestCase</a> {
<a name="l205"><span class="linenum"> 205</span></a>  
<a name="l206"><span class="linenum"> 206</span></a>      function <a class="function" onClick="logFunction('testSomething')" href="../../../../_functions/testsomething.html" onMouseOver="funcPopup(event,'testsomething')">testSomething</a>() {
<a name="l207"><span class="linenum"> 207</span></a>          <a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('connection')" href="../../../../_variables/connection.html">$connection</a> = <span class="keyword">new </span><a class="class" onClick="logClass('MockDatabaseConnection')" href="../../../../_classes/mockdatabaseconnection.html" onMouseOver="classPopup(event,'mockdatabaseconnection')">MockDatabaseConnection</a>();
<a name="l208"><span class="linenum"> 208</span></a>          <a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('connection')" href="../../../../_variables/connection.html">$connection</a>-&amp;gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>('insert into accounts () values ()');
<a name="l209"><span class="linenum"> 209</span></a>      }
<a name="l210"><span class="linenum"> 210</span></a>  }
<a name="l211"><span class="linenum"> 211</span></a>  &lt;/pre&gt;
<a name="l212"><span class="linenum"> 212</span></a>                  ...the code will throw a type violation at you just as the
<a name="l213"><span class="linenum"> 213</span></a>                  original class would.
<a name="l214"><span class="linenum"> 214</span></a>              &lt;/p&gt;
<a name="l215"><span class="linenum"> 215</span></a>              &lt;p&gt;
<a name="l216"><span class="linenum"> 216</span></a>                  The mock version now has all the methods of the original.
<a name="l217"><span class="linenum"> 217</span></a>                  Unfortunately, they all return &lt;span class=&quot;new_code&quot;&gt;null&lt;/span&gt;.
<a name="l218"><span class="linenum"> 218</span></a>                  As methods that always return &lt;span class=&quot;new_code&quot;&gt;null&lt;/span&gt; are not that useful,
<a name="l219"><span class="linenum"> 219</span></a>                  we need to be able to set them to something else...
<a name="l220"><span class="linenum"> 220</span></a>              &lt;/p&gt;
<a name="l221"><span class="linenum"> 221</span></a>              &lt;p&gt;
<a name="l222"><span class="linenum"> 222</span></a>                  &lt;a class=&quot;target&quot; name=&quot;stub&quot;&gt;&lt;h2&gt;Mocks as actors&lt;/h2&gt;&lt;/a&gt;
<a name="l223"><span class="linenum"> 223</span></a>              &lt;/p&gt;
<a name="l224"><span class="linenum"> 224</span></a>              &lt;p&gt;
<a name="l225"><span class="linenum"> 225</span></a>                  Changing the return value of a method from &lt;span class=&quot;new_code&quot;&gt;null&lt;/span&gt;
<a name="l226"><span class="linenum"> 226</span></a>                  to something else is pretty easy...
<a name="l227"><span class="linenum"> 227</span></a>  &lt;pre&gt;
<a name="l228"><span class="linenum"> 228</span></a>  &lt;strong&gt;<a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('connection')" href="../../../../_variables/connection.html">$connection</a>-&amp;gt;<a class="function" onClick="logFunction('returns')" href="../../../../_functions/returns.html" onMouseOver="funcPopup(event,'returns')">returns</a>('query', 37)&lt;/strong&gt;
<a name="l229"><span class="linenum"> 229</span></a>  &lt;/pre&gt;
<a name="l230"><span class="linenum"> 230</span></a>                  Now every time we call
<a name="l231"><span class="linenum"> 231</span></a>                  &lt;span class=&quot;new_code&quot;&gt;<a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('connection')" href="../../../../_variables/connection.html">$connection</a>-&amp;gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>()&lt;/span&gt; we get
<a name="l232"><span class="linenum"> 232</span></a>                  the result of 37.
<a name="l233"><span class="linenum"> 233</span></a>                  There is nothing special about 37.
<a name="l234"><span class="linenum"> 234</span></a>                  The return value can be arbitrarily complicated.
<a name="l235"><span class="linenum"> 235</span></a>              &lt;/p&gt;
<a name="l236"><span class="linenum"> 236</span></a>              &lt;p&gt;
<a name="l237"><span class="linenum"> 237</span></a>                  Parameters are irrelevant here, we always get the same
<a name="l238"><span class="linenum"> 238</span></a>                  values back each time once they have been set up this way.
<a name="l239"><span class="linenum"> 239</span></a>                  That may not sound like a convincing replica of a
<a name="l240"><span class="linenum"> 240</span></a>                  database connection, but for the half a dozen lines of
<a name="l241"><span class="linenum"> 241</span></a>                  a test method it is usually all you need.
<a name="l242"><span class="linenum"> 242</span></a>              &lt;/p&gt;
<a name="l243"><span class="linenum"> 243</span></a>              &lt;p&gt;
<a name="l244"><span class="linenum"> 244</span></a>                  Things aren't always that simple though.
<a name="l245"><span class="linenum"> 245</span></a>                  One common problem is iterators, where constantly returning
<a name="l246"><span class="linenum"> 246</span></a>                  the same value could cause an endless loop in the object
<a name="l247"><span class="linenum"> 247</span></a>                  being tested.
<a name="l248"><span class="linenum"> 248</span></a>                  For these we need to set up sequences of values.
<a name="l249"><span class="linenum"> 249</span></a>                  Let's say we have a simple iterator that looks like this...
<a name="l250"><span class="linenum"> 250</span></a>  &lt;pre&gt;
<a name="l251"><span class="linenum"> 251</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('Iterator')" href="../../../../_classes/iterator.html" onMouseOver="classPopup(event,'iterator')">Iterator</a> {
<a name="l252"><span class="linenum"> 252</span></a>      function <a class="function" onClick="logFunction('Iterator')" href="../../../../_functions/iterator.html" onMouseOver="funcPopup(event,'iterator')">Iterator</a>() { }
<a name="l253"><span class="linenum"> 253</span></a>      function <a class="function" onClick="logFunction('next')" href="../../../../_functions/next.html" onMouseOver="funcPopup(event,'next')">next</a>() { }
<a name="l254"><span class="linenum"> 254</span></a>  }
<a name="l255"><span class="linenum"> 255</span></a>  &lt;/pre&gt;
<a name="l256"><span class="linenum"> 256</span></a>                  This is about the simplest iterator you could have.
<a name="l257"><span class="linenum"> 257</span></a>                  Assuming that this iterator only returns text until it
<a name="l258"><span class="linenum"> 258</span></a>                  reaches the end, when it returns false, we can simulate it
<a name="l259"><span class="linenum"> 259</span></a>                  with...
<a name="l260"><span class="linenum"> 260</span></a>  &lt;pre&gt;
<a name="l261"><span class="linenum"> 261</span></a>  <a class="class" onClick="logClass('Mock')" href="../../../../_classes/mock.html" onMouseOver="classPopup(event,'mock')">Mock</a>::<a class="function" onClick="logFunction('generate')" href="../../../../_functions/generate.html" onMouseOver="funcPopup(event,'generate')">generate</a>('Iterator');
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('IteratorTest')" href="../../../../_classes/iteratortest.html" onMouseOver="classPopup(event,'iteratortest')">IteratorTest</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('UnitTestCase')" href="../../../../_classes/unittestcase.html" onMouseOver="classPopup(event,'unittestcase')">UnitTestCase</a>() {
<a name="l264"><span class="linenum"> 264</span></a>  
<a name="l265"><span class="linenum"> 265</span></a>      function <a class="function" onClick="logFunction('testASequence')" href="../../../../_functions/testasequence.html" onMouseOver="funcPopup(event,'testasequence')">testASequence</a>() {&lt;strong&gt;
<a name="l266"><span class="linenum"> 266</span></a>          <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('iterator')" href="../../../../_variables/iterator.html">$iterator</a> = new MockIterator();
<a name="l267"><span class="linenum"> 267</span></a>          <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('iterator')" href="../../../../_variables/iterator.html">$iterator</a>-&amp;gt;<a class="function" onClick="logFunction('returns')" href="../../../../_functions/returns.html" onMouseOver="funcPopup(event,'returns')">returns</a>('next', false);
<a name="l268"><span class="linenum"> 268</span></a>          <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('iterator')" href="../../../../_variables/iterator.html">$iterator</a>-&amp;gt;<a class="function" onClick="logFunction('returnsAt')" href="../../../../_functions/returnsat.html" onMouseOver="funcPopup(event,'returnsat')">returnsAt</a>(0, 'next', 'First string');
<a name="l269"><span class="linenum"> 269</span></a>          <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('iterator')" href="../../../../_variables/iterator.html">$iterator</a>-&amp;gt;<a class="function" onClick="logFunction('returnsAt')" href="../../../../_functions/returnsat.html" onMouseOver="funcPopup(event,'returnsat')">returnsAt</a>(1, 'next', 'Second string');&lt;/strong&gt;
<a name="l270"><span class="linenum"> 270</span></a>          ...
<a name="l271"><span class="linenum"> 271</span></a>      }
<a name="l272"><span class="linenum"> 272</span></a>  }
<a name="l273"><span class="linenum"> 273</span></a>  &lt;/pre&gt;
<a name="l274"><span class="linenum"> 274</span></a>                  When &lt;span class=&quot;new_code&quot;&gt;<a class="phpfunction" onClick="logFunction('next')" href="../../../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>()&lt;/span&gt; is called on the
<a name="l275"><span class="linenum"> 275</span></a>                  &lt;span class=&quot;new_code&quot;&gt;MockIterator&lt;/span&gt; it will first return &quot;First string&quot;,
<a name="l276"><span class="linenum"> 276</span></a>                  on the second call &quot;Second string&quot; will be returned
<a name="l277"><span class="linenum"> 277</span></a>                  and on any other call &lt;span class=&quot;new_code&quot;&gt;false&lt;/span&gt; will
<a name="l278"><span class="linenum"> 278</span></a>                  be returned.
<a name="l279"><span class="linenum"> 279</span></a>                  The sequenced return values take precedence over the constant
<a name="l280"><span class="linenum"> 280</span></a>                  return value.
<a name="l281"><span class="linenum"> 281</span></a>                  The constant one is a kind of default if you like.
<a name="l282"><span class="linenum"> 282</span></a>              &lt;/p&gt;
<a name="l283"><span class="linenum"> 283</span></a>              &lt;p&gt;
<a name="l284"><span class="linenum"> 284</span></a>                  Another tricky situation is an overloaded
<a name="l285"><span class="linenum"> 285</span></a>                  &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>()&lt;/span&gt; operation.
<a name="l286"><span class="linenum"> 286</span></a>                  An example of this is an information holder with name/value pairs.
<a name="l287"><span class="linenum"> 287</span></a>                  Say we have a configuration class like...
<a name="l288"><span class="linenum"> 288</span></a>  &lt;pre&gt;
<a name="l289"><span class="linenum"> 289</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('Configuration')" href="../../../../_classes/configuration.html" onMouseOver="classPopup(event,'configuration')">Configuration</a> {
<a name="l290"><span class="linenum"> 290</span></a>      function <a class="function" onClick="logFunction('Configuration')" href="../../../../_functions/configuration.html" onMouseOver="funcPopup(event,'configuration')">Configuration</a>() { ... }
<a name="l291"><span class="linenum"> 291</span></a>      function <a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>) { ... }
<a name="l292"><span class="linenum"> 292</span></a>  }
<a name="l293"><span class="linenum"> 293</span></a>  &lt;/pre&gt;
<a name="l294"><span class="linenum"> 294</span></a>                  This is a likely situation for using mock objects, as
<a name="l295"><span class="linenum"> 295</span></a>                  actual configuration will vary from machine to machine and
<a name="l296"><span class="linenum"> 296</span></a>                  even from test to test.
<a name="l297"><span class="linenum"> 297</span></a>                  The problem though is that all the data comes through the
<a name="l298"><span class="linenum"> 298</span></a>                  &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>()&lt;/span&gt; method and yet
<a name="l299"><span class="linenum"> 299</span></a>                  we want different results for different keys.
<a name="l300"><span class="linenum"> 300</span></a>                  Luckily the mocks have a filter system...
<a name="l301"><span class="linenum"> 301</span></a>  &lt;pre&gt;
<a name="l302"><span class="linenum"> 302</span></a>  &lt;strong&gt;<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../../_variables/config.html">$config</a> = &amp;amp;new MockConfiguration();
<a name="l303"><span class="linenum"> 303</span></a>  <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../../_variables/config.html">$config</a>-&amp;gt;<a class="function" onClick="logFunction('returns')" href="../../../../_functions/returns.html" onMouseOver="funcPopup(event,'returns')">returns</a>('get', 'primary', array('db_host'));
<a name="l304"><span class="linenum"> 304</span></a>  <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../../_variables/config.html">$config</a>-&amp;gt;<a class="function" onClick="logFunction('returns')" href="../../../../_functions/returns.html" onMouseOver="funcPopup(event,'returns')">returns</a>('get', 'admin', array('db_user'));
<a name="l305"><span class="linenum"> 305</span></a>  <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../../_variables/config.html">$config</a>-&amp;gt;<a class="function" onClick="logFunction('returns')" href="../../../../_functions/returns.html" onMouseOver="funcPopup(event,'returns')">returns</a>('get', 'secret', array('db_password'));&lt;/strong&gt;
<a name="l306"><span class="linenum"> 306</span></a>  &lt;/pre&gt;
<a name="l307"><span class="linenum"> 307</span></a>                  The extra parameter is a list of arguments to attempt
<a name="l308"><span class="linenum"> 308</span></a>                  to match.
<a name="l309"><span class="linenum"> 309</span></a>                  In this case we are trying to match only one argument which
<a name="l310"><span class="linenum"> 310</span></a>                  is the look up key.
<a name="l311"><span class="linenum"> 311</span></a>                  Now when the mock object has the
<a name="l312"><span class="linenum"> 312</span></a>                  &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>()&lt;/span&gt; method invoked
<a name="l313"><span class="linenum"> 313</span></a>                  like this...
<a name="l314"><span class="linenum"> 314</span></a>  &lt;pre&gt;
<a name="l315"><span class="linenum"> 315</span></a>  <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../../_variables/config.html">$config</a>-&amp;gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('db_user')
<a name="l316"><span class="linenum"> 316</span></a>  &lt;/pre&gt;
<a name="l317"><span class="linenum"> 317</span></a>                  ...it will return &quot;admin&quot;.
<a name="l318"><span class="linenum"> 318</span></a>                  It finds this by attempting to match the calling arguments
<a name="l319"><span class="linenum"> 319</span></a>                  to its list of returns one after another until
<a name="l320"><span class="linenum"> 320</span></a>                  a complete match is found.
<a name="l321"><span class="linenum"> 321</span></a>              &lt;/p&gt;
<a name="l322"><span class="linenum"> 322</span></a>              &lt;p&gt;
<a name="l323"><span class="linenum"> 323</span></a>                  You can set a default argument argument like so...
<a name="l324"><span class="linenum"> 324</span></a>  &lt;pre&gt;&lt;strong&gt;
<a name="l325"><span class="linenum"> 325</span></a>  <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../../_variables/config.html">$config</a>-&amp;gt;<a class="function" onClick="logFunction('returns')" href="../../../../_functions/returns.html" onMouseOver="funcPopup(event,'returns')">returns</a>('get', false, array('*'));&lt;/strong&gt;
<a name="l326"><span class="linenum"> 326</span></a>  &lt;/pre&gt;
<a name="l327"><span class="linenum"> 327</span></a>                  This is not the same as setting the return value without
<a name="l328"><span class="linenum"> 328</span></a>                  any argument requirements like this...
<a name="l329"><span class="linenum"> 329</span></a>  &lt;pre&gt;&lt;strong&gt;
<a name="l330"><span class="linenum"> 330</span></a>  <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../../_variables/config.html">$config</a>-&amp;gt;<a class="function" onClick="logFunction('returns')" href="../../../../_functions/returns.html" onMouseOver="funcPopup(event,'returns')">returns</a>('get', false);&lt;/strong&gt;
<a name="l331"><span class="linenum"> 331</span></a>  &lt;/pre&gt;
<a name="l332"><span class="linenum"> 332</span></a>                  In the first case it will accept any single argument,
<a name="l333"><span class="linenum"> 333</span></a>                  but exactly one is required.
<a name="l334"><span class="linenum"> 334</span></a>                  In the second case any number of arguments will do and
<a name="l335"><span class="linenum"> 335</span></a>                  it acts as a catchall after all other matches.
<a name="l336"><span class="linenum"> 336</span></a>                  Note that if we add further single parameter options after
<a name="l337"><span class="linenum"> 337</span></a>                  the wildcard in the first case, they will be ignored as the wildcard
<a name="l338"><span class="linenum"> 338</span></a>                  will match first.
<a name="l339"><span class="linenum"> 339</span></a>                  With complex parameter lists the ordering could be important
<a name="l340"><span class="linenum"> 340</span></a>                  or else desired matches could be masked by earlier wildcard
<a name="l341"><span class="linenum"> 341</span></a>                  ones.
<a name="l342"><span class="linenum"> 342</span></a>                  Declare the most specific matches first if you are not sure.
<a name="l343"><span class="linenum"> 343</span></a>              &lt;/p&gt;
<a name="l344"><span class="linenum"> 344</span></a>              &lt;p&gt;
<a name="l345"><span class="linenum"> 345</span></a>                  There are times when you want a specific reference to be
<a name="l346"><span class="linenum"> 346</span></a>                  dished out by the mock rather than a copy or object handle.
<a name="l347"><span class="linenum"> 347</span></a>                  This a rarity to say the least, but you might be simulating
<a name="l348"><span class="linenum"> 348</span></a>                  a container that can hold primitives such as strings.
<a name="l349"><span class="linenum"> 349</span></a>                  For example...
<a name="l350"><span class="linenum"> 350</span></a>  &lt;pre&gt;
<a name="l351"><span class="linenum"> 351</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('Pad')" href="../../../../_classes/pad.html" onMouseOver="classPopup(event,'pad')">Pad</a> {
<a name="l352"><span class="linenum"> 352</span></a>      function <a class="function" onClick="logFunction('Pad')" href="../../../../_functions/pad.html" onMouseOver="funcPopup(event,'pad')">Pad</a>() { }
<a name="l353"><span class="linenum"> 353</span></a>      function &amp;amp;note(<a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../../_variables/index.html">$index</a>) { }
<a name="l354"><span class="linenum"> 354</span></a>  }
<a name="l355"><span class="linenum"> 355</span></a>  &lt;/pre&gt;
<a name="l356"><span class="linenum"> 356</span></a>                  In this case you can set a reference into the mock's
<a name="l357"><span class="linenum"> 357</span></a>                  return list...
<a name="l358"><span class="linenum"> 358</span></a>  &lt;pre&gt;
<a name="l359"><span class="linenum"> 359</span></a>  function testTaskReads() {
<a name="l360"><span class="linenum"> 360</span></a>      <a class="var it474" onMouseOver="hilite(474)" onMouseOut="lolite()" onClick="logVariable('note')" href="../../../../_variables/note.html">$note</a> = 'Buy books';
<a name="l361"><span class="linenum"> 361</span></a>      <a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('pad')" href="../../../../_variables/pad.html">$pad</a> = new MockPad();
<a name="l362"><span class="linenum"> 362</span></a>      <a class="var it476" onMouseOver="hilite(476)" onMouseOut="lolite()" onClick="logVariable('vector')" href="../../../../_variables/vector.html">$vector</a>-&amp;gt;&lt;strong&gt;<a class="function" onClick="logFunction('returnsByReference')" href="../../../../_functions/returnsbyreference.html" onMouseOver="funcPopup(event,'returnsbyreference')">returnsByReference</a>(&lt;/strong&gt;'note', <a class="var it474" onMouseOver="hilite(474)" onMouseOut="lolite()" onClick="logVariable('note')" href="../../../../_variables/note.html">$note</a>, array(3)&lt;strong&gt;)&lt;/strong&gt;;
<a name="l363"><span class="linenum"> 363</span></a>      <a class="var it477" onMouseOver="hilite(477)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../../_variables/task.html">$task</a> = new Task(<a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('pad')" href="../../../../_variables/pad.html">$pad</a>);
<a name="l364"><span class="linenum"> 364</span></a>      ...
<a name="l365"><span class="linenum"> 365</span></a>  }
<a name="l366"><span class="linenum"> 366</span></a>  &lt;/pre&gt;
<a name="l367"><span class="linenum"> 367</span></a>                  With this arrangement you know that every time
<a name="l368"><span class="linenum"> 368</span></a>                  &lt;span class=&quot;new_code&quot;&gt;<a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('pad')" href="../../../../_variables/pad.html">$pad</a>-&amp;gt;note(3)&lt;/span&gt; is
<a name="l369"><span class="linenum"> 369</span></a>                  called it will return the same &lt;span class=&quot;new_code&quot;&gt;<a class="var it474" onMouseOver="hilite(474)" onMouseOut="lolite()" onClick="logVariable('note')" href="../../../../_variables/note.html">$note</a>&lt;/span&gt; each time,
<a name="l370"><span class="linenum"> 370</span></a>                  even if it get's modified.
<a name="l371"><span class="linenum"> 371</span></a>              &lt;/p&gt;
<a name="l372"><span class="linenum"> 372</span></a>              &lt;p&gt;
<a name="l373"><span class="linenum"> 373</span></a>                  These three factors, timing, parameters and whether to copy,
<a name="l374"><span class="linenum"> 374</span></a>                  can be combined orthogonally.
<a name="l375"><span class="linenum"> 375</span></a>                  For example...
<a name="l376"><span class="linenum"> 376</span></a>  &lt;pre&gt;
<a name="l377"><span class="linenum"> 377</span></a>  <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('buy_books')" href="../../../../_variables/buy_books.html">$buy_books</a> = 'Buy books';
<a name="l378"><span class="linenum"> 378</span></a>  <a class="var it479" onMouseOver="hilite(479)" onMouseOut="lolite()" onClick="logVariable('write_code')" href="../../../../_variables/write_code.html">$write_code</a> = 'Write code';
<a name="l379"><span class="linenum"> 379</span></a>  <a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('pad')" href="../../../../_variables/pad.html">$pad</a> = new MockPad();
<a name="l380"><span class="linenum"> 380</span></a>  <a class="var it476" onMouseOver="hilite(476)" onMouseOut="lolite()" onClick="logVariable('vector')" href="../../../../_variables/vector.html">$vector</a>-&amp;gt;&lt;strong&gt;<a class="function" onClick="logFunction('returnsByReferenceAt')" href="../../../../_functions/returnsbyreferenceat.html" onMouseOver="funcPopup(event,'returnsbyreferenceat')">returnsByReferenceAt</a>(0, 'note', <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('buy_books')" href="../../../../_variables/buy_books.html">$buy_books</a>, array('*', 3));&lt;/strong&gt;
<a name="l381"><span class="linenum"> 381</span></a>  <a class="var it476" onMouseOver="hilite(476)" onMouseOut="lolite()" onClick="logVariable('vector')" href="../../../../_variables/vector.html">$vector</a>-&amp;gt;&lt;strong&gt;<a class="function" onClick="logFunction('returnsByReferenceAt')" href="../../../../_functions/returnsbyreferenceat.html" onMouseOver="funcPopup(event,'returnsbyreferenceat')">returnsByReferenceAt</a>(1, 'note', <a class="var it479" onMouseOver="hilite(479)" onMouseOut="lolite()" onClick="logVariable('write_code')" href="../../../../_variables/write_code.html">$write_code</a>, array('*', 3));&lt;/strong&gt;
<a name="l382"><span class="linenum"> 382</span></a>  &lt;/pre&gt;
<a name="l383"><span class="linenum"> 383</span></a>                  This will return a reference to &lt;span class=&quot;new_code&quot;&gt;<a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('buy_books')" href="../../../../_variables/buy_books.html">$buy_books</a>&lt;/span&gt; and
<a name="l384"><span class="linenum"> 384</span></a>                  then to &lt;span class=&quot;new_code&quot;&gt;<a class="var it479" onMouseOver="hilite(479)" onMouseOut="lolite()" onClick="logVariable('write_code')" href="../../../../_variables/write_code.html">$write_code</a>&lt;/span&gt;, but only if two parameters
<a name="l385"><span class="linenum"> 385</span></a>                  were set the second of which must be the integer 3.
<a name="l386"><span class="linenum"> 386</span></a>                  That should cover most situations.
<a name="l387"><span class="linenum"> 387</span></a>              &lt;/p&gt;
<a name="l388"><span class="linenum"> 388</span></a>              &lt;p&gt;
<a name="l389"><span class="linenum"> 389</span></a>                  A final tricky case is one object creating another, known
<a name="l390"><span class="linenum"> 390</span></a>                  as a factory pattern.
<a name="l391"><span class="linenum"> 391</span></a>                  Suppose that on a successful query to our imaginary
<a name="l392"><span class="linenum"> 392</span></a>                  database, a result set is returned as an iterator, with
<a name="l393"><span class="linenum"> 393</span></a>                  each call to the the iterator's &lt;span class=&quot;new_code&quot;&gt;<a class="phpfunction" onClick="logFunction('next')" href="../../../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>()&lt;/span&gt; giving
<a name="l394"><span class="linenum"> 394</span></a>                  one row until false.
<a name="l395"><span class="linenum"> 395</span></a>                  This sounds like a simulation nightmare, but in fact it can all
<a name="l396"><span class="linenum"> 396</span></a>                  be mocked using the mechanics above...
<a name="l397"><span class="linenum"> 397</span></a>  &lt;pre&gt;
<a name="l398"><span class="linenum"> 398</span></a>  <a class="class" onClick="logClass('Mock')" href="../../../../_classes/mock.html" onMouseOver="classPopup(event,'mock')">Mock</a>::<a class="function" onClick="logFunction('generate')" href="../../../../_functions/generate.html" onMouseOver="funcPopup(event,'generate')">generate</a>('DatabaseConnection');
<a name="l399"><span class="linenum"> 399</span></a>  <a class="class" onClick="logClass('Mock')" href="../../../../_classes/mock.html" onMouseOver="classPopup(event,'mock')">Mock</a>::<a class="function" onClick="logFunction('generate')" href="../../../../_functions/generate.html" onMouseOver="funcPopup(event,'generate')">generate</a>('ResultIterator');
<a name="l400"><span class="linenum"> 400</span></a>  
<a name="l401"><span class="linenum"> 401</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('DatabaseTest')" href="../../../../_classes/databasetest.html" onMouseOver="classPopup(event,'databasetest')">DatabaseTest</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('UnitTestCase')" href="../../../../_classes/unittestcase.html" onMouseOver="classPopup(event,'unittestcase')">UnitTestCase</a> {
<a name="l402"><span class="linenum"> 402</span></a>  
<a name="l403"><span class="linenum"> 403</span></a>      function <a class="function" onClick="logFunction('testUserFinderReadsResultsFromDatabase')" href="../../../../_functions/testuserfinderreadsresultsfromdatabase.html" onMouseOver="funcPopup(event,'testuserfinderreadsresultsfromdatabase')">testUserFinderReadsResultsFromDatabase</a>() {&lt;strong&gt;
<a name="l404"><span class="linenum"> 404</span></a>          <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> = new MockResultIterator();
<a name="l405"><span class="linenum"> 405</span></a>          <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>-&amp;gt;<a class="function" onClick="logFunction('returns')" href="../../../../_functions/returns.html" onMouseOver="funcPopup(event,'returns')">returns</a>('next', false);
<a name="l406"><span class="linenum"> 406</span></a>          <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>-&amp;gt;<a class="function" onClick="logFunction('returnsAt')" href="../../../../_functions/returnsat.html" onMouseOver="funcPopup(event,'returnsat')">returnsAt</a>(0, 'next', array(1, 'tom'));
<a name="l407"><span class="linenum"> 407</span></a>          <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>-&amp;gt;<a class="function" onClick="logFunction('returnsAt')" href="../../../../_functions/returnsat.html" onMouseOver="funcPopup(event,'returnsat')">returnsAt</a>(1, 'next', array(3, 'dick'));
<a name="l408"><span class="linenum"> 408</span></a>          <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>-&amp;gt;<a class="function" onClick="logFunction('returnsAt')" href="../../../../_functions/returnsat.html" onMouseOver="funcPopup(event,'returnsat')">returnsAt</a>(2, 'next', array(6, 'harry'));
<a name="l409"><span class="linenum"> 409</span></a>  
<a name="l410"><span class="linenum"> 410</span></a>          <a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('connection')" href="../../../../_variables/connection.html">$connection</a> = <span class="keyword">new </span><a class="class" onClick="logClass('MockDatabaseConnection')" href="../../../../_classes/mockdatabaseconnection.html" onMouseOver="classPopup(event,'mockdatabaseconnection')">MockDatabaseConnection</a>();
<a name="l411"><span class="linenum"> 411</span></a>          <a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('connection')" href="../../../../_variables/connection.html">$connection</a>-&amp;gt;<a class="function" onClick="logFunction('returns')" href="../../../../_functions/returns.html" onMouseOver="funcPopup(event,'returns')">returns</a>('selectQuery', <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>);&lt;/strong&gt;
<a name="l412"><span class="linenum"> 412</span></a>  
<a name="l413"><span class="linenum"> 413</span></a>          <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('finder')" href="../../../../_variables/finder.html">$finder</a> = new UserFinder(&lt;strong&gt;<a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('connection')" href="../../../../_variables/connection.html">$connection</a>&lt;/strong&gt;);
<a name="l414"><span class="linenum"> 414</span></a>          <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&amp;gt;<a class="function" onClick="logFunction('assertIdentical')" href="../../../../_functions/assertidentical.html" onMouseOver="funcPopup(event,'assertidentical')">assertIdentical</a>(
<a name="l415"><span class="linenum"> 415</span></a>                  <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('finder')" href="../../../../_variables/finder.html">$finder</a>-&amp;gt;findNames(),
<a name="l416"><span class="linenum"> 416</span></a>                  array('tom', 'dick', 'harry'));
<a name="l417"><span class="linenum"> 417</span></a>      }
<a name="l418"><span class="linenum"> 418</span></a>  }
<a name="l419"><span class="linenum"> 419</span></a>  &lt;/pre&gt;
<a name="l420"><span class="linenum"> 420</span></a>                  Now only if our
<a name="l421"><span class="linenum"> 421</span></a>                  &lt;span class=&quot;new_code&quot;&gt;<a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('connection')" href="../../../../_variables/connection.html">$connection</a>&lt;/span&gt; is called with the
<a name="l422"><span class="linenum"> 422</span></a>                  &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>()&lt;/span&gt; method will the
<a name="l423"><span class="linenum"> 423</span></a>                  &lt;span class=&quot;new_code&quot;&gt;<a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>&lt;/span&gt; be returned that is
<a name="l424"><span class="linenum"> 424</span></a>                  itself exhausted after the third call to &lt;span class=&quot;new_code&quot;&gt;<a class="phpfunction" onClick="logFunction('next')" href="../../../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>()&lt;/span&gt;.
<a name="l425"><span class="linenum"> 425</span></a>                  This should be enough
<a name="l426"><span class="linenum"> 426</span></a>                  information for our &lt;span class=&quot;new_code&quot;&gt;UserFinder&lt;/span&gt; class,
<a name="l427"><span class="linenum"> 427</span></a>                  the class actually
<a name="l428"><span class="linenum"> 428</span></a>                  being tested here, to come up with goods.
<a name="l429"><span class="linenum"> 429</span></a>                  A very precise test and not a real database in sight.
<a name="l430"><span class="linenum"> 430</span></a>              &lt;/p&gt;
<a name="l431"><span class="linenum"> 431</span></a>              &lt;p&gt;
<a name="l432"><span class="linenum"> 432</span></a>                  We could refine this test further by insisting that the correct
<a name="l433"><span class="linenum"> 433</span></a>                  query is sent...
<a name="l434"><span class="linenum"> 434</span></a>  &lt;pre&gt;
<a name="l435"><span class="linenum"> 435</span></a>  <a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('connection')" href="../../../../_variables/connection.html">$connection</a>-&amp;gt;<a class="function" onClick="logFunction('returns')" href="../../../../_functions/returns.html" onMouseOver="funcPopup(event,'returns')">returns</a>('selectQuery', <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>, array(&lt;strong&gt;'select name, id from people'&lt;/strong&gt;));
<a name="l436"><span class="linenum"> 436</span></a>  &lt;/pre&gt;
<a name="l437"><span class="linenum"> 437</span></a>                  This is actually a bad idea.
<a name="l438"><span class="linenum"> 438</span></a>              &lt;/p&gt;
<a name="l439"><span class="linenum"> 439</span></a>              &lt;p&gt;
<a name="l440"><span class="linenum"> 440</span></a>                  We have a &lt;span class=&quot;new_code&quot;&gt;UserFinder&lt;/span&gt; in object land, talking to
<a name="l441"><span class="linenum"> 441</span></a>                  database tables using a large interface - the whole of SQL.
<a name="l442"><span class="linenum"> 442</span></a>                  Imagine that we have written a lot of tests that now depend
<a name="l443"><span class="linenum"> 443</span></a>                  on the exact SQL string passed.
<a name="l444"><span class="linenum"> 444</span></a>                  These queries could change en masse for all sorts of reasons
<a name="l445"><span class="linenum"> 445</span></a>                  not related to the specific test.
<a name="l446"><span class="linenum"> 446</span></a>                  For example the quoting rules could change, a table name could
<a name="l447"><span class="linenum"> 447</span></a>                  change, a link table added or whatever.
<a name="l448"><span class="linenum"> 448</span></a>                  This would require the rewriting of every single test any time
<a name="l449"><span class="linenum"> 449</span></a>                  one of these refactoring is made, yet the intended behaviour has
<a name="l450"><span class="linenum"> 450</span></a>                  stayed the same.
<a name="l451"><span class="linenum"> 451</span></a>                  Tests are supposed to help refactoring, not hinder it.
<a name="l452"><span class="linenum"> 452</span></a>                  I'd certainly like to have a test suite that passes while I change
<a name="l453"><span class="linenum"> 453</span></a>                  table names.
<a name="l454"><span class="linenum"> 454</span></a>              &lt;/p&gt;
<a name="l455"><span class="linenum"> 455</span></a>              &lt;p&gt;
<a name="l456"><span class="linenum"> 456</span></a>                  As a rule it is best not to mock a fat interface.
<a name="l457"><span class="linenum"> 457</span></a>              &lt;/p&gt;
<a name="l458"><span class="linenum"> 458</span></a>              &lt;p&gt;
<a name="l459"><span class="linenum"> 459</span></a>                  By contrast, here is the round trip test...
<a name="l460"><span class="linenum"> 460</span></a>  &lt;pre&gt;
<a name="l461"><span class="linenum"> 461</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('DatabaseTest')" href="../../../../_classes/databasetest.html" onMouseOver="classPopup(event,'databasetest')">DatabaseTest</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('UnitTestCase')" href="../../../../_classes/unittestcase.html" onMouseOver="classPopup(event,'unittestcase')">UnitTestCase</a> {&lt;strong&gt;
<a name="l462"><span class="linenum"> 462</span></a>      function <a class="function" onClick="logFunction('setUp')" href="../../../../_functions/setup.html" onMouseOver="funcPopup(event,'setup')">setUp</a>() { ... }
<a name="l463"><span class="linenum"> 463</span></a>      function <a class="function" onClick="logFunction('tearDown')" href="../../../../_functions/teardown.html" onMouseOver="funcPopup(event,'teardown')">tearDown</a>() { ... }&lt;/strong&gt;
<a name="l464"><span class="linenum"> 464</span></a>  
<a name="l465"><span class="linenum"> 465</span></a>      function <a class="function" onClick="logFunction('testUserFinderReadsResultsFromDatabase')" href="../../../../_functions/testuserfinderreadsresultsfromdatabase.html" onMouseOver="funcPopup(event,'testuserfinderreadsresultsfromdatabase')">testUserFinderReadsResultsFromDatabase</a>() {
<a name="l466"><span class="linenum"> 466</span></a>          <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('finder')" href="../../../../_variables/finder.html">$finder</a> = new UserFinder(&lt;strong&gt;new <a class="function" onClick="logFunction('DatabaseConnection')" href="../../../../_functions/databaseconnection.html" onMouseOver="funcPopup(event,'databaseconnection')">DatabaseConnection</a>()&lt;/strong&gt;);
<a name="l467"><span class="linenum"> 467</span></a>          <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('finder')" href="../../../../_variables/finder.html">$finder</a>-&amp;gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('tom');
<a name="l468"><span class="linenum"> 468</span></a>          <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('finder')" href="../../../../_variables/finder.html">$finder</a>-&amp;gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('dick');
<a name="l469"><span class="linenum"> 469</span></a>          <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('finder')" href="../../../../_variables/finder.html">$finder</a>-&amp;gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('harry');
<a name="l470"><span class="linenum"> 470</span></a>          <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&amp;gt;<a class="function" onClick="logFunction('assertIdentical')" href="../../../../_functions/assertidentical.html" onMouseOver="funcPopup(event,'assertidentical')">assertIdentical</a>(
<a name="l471"><span class="linenum"> 471</span></a>                  <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('finder')" href="../../../../_variables/finder.html">$finder</a>-&amp;gt;findNames(),
<a name="l472"><span class="linenum"> 472</span></a>                  array('tom', 'dick', 'harry'));
<a name="l473"><span class="linenum"> 473</span></a>      }
<a name="l474"><span class="linenum"> 474</span></a>  }
<a name="l475"><span class="linenum"> 475</span></a>  &lt;/pre&gt;
<a name="l476"><span class="linenum"> 476</span></a>                  This test is immune to schema changes.
<a name="l477"><span class="linenum"> 477</span></a>                  It will only fail if you actually break the functionality, which
<a name="l478"><span class="linenum"> 478</span></a>                  is what you want a test to do.
<a name="l479"><span class="linenum"> 479</span></a>              &lt;/p&gt;
<a name="l480"><span class="linenum"> 480</span></a>              &lt;p&gt;
<a name="l481"><span class="linenum"> 481</span></a>                  The catch is those &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('setUp')" href="../../../../_functions/setup.html" onMouseOver="funcPopup(event,'setup')">setUp</a>()&lt;/span&gt; and &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('tearDown')" href="../../../../_functions/teardown.html" onMouseOver="funcPopup(event,'teardown')">tearDown</a>()&lt;/span&gt;
<a name="l482"><span class="linenum"> 482</span></a>                  methods that we've rather glossed over.
<a name="l483"><span class="linenum"> 483</span></a>                  They have to clear out the database tables and ensure that the
<a name="l484"><span class="linenum"> 484</span></a>                  schema is defined correctly.
<a name="l485"><span class="linenum"> 485</span></a>                  That can be a chunk of extra work, but you usually have this code
<a name="l486"><span class="linenum"> 486</span></a>                  lying around anyway for deployment purposes.
<a name="l487"><span class="linenum"> 487</span></a>              &lt;/p&gt;
<a name="l488"><span class="linenum"> 488</span></a>              &lt;p&gt;
<a name="l489"><span class="linenum"> 489</span></a>                  One place where you definitely need a mock is simulating failures.
<a name="l490"><span class="linenum"> 490</span></a>                  Say the database goes down while &lt;span class=&quot;new_code&quot;&gt;UserFinder&lt;/span&gt; is doing
<a name="l491"><span class="linenum"> 491</span></a>                  it's work.
<a name="l492"><span class="linenum"> 492</span></a>                  Does &lt;span class=&quot;new_code&quot;&gt;UserFinder&lt;/span&gt; behave well...?
<a name="l493"><span class="linenum"> 493</span></a>  &lt;pre&gt;
<a name="l494"><span class="linenum"> 494</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('DatabaseTest')" href="../../../../_classes/databasetest.html" onMouseOver="classPopup(event,'databasetest')">DatabaseTest</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('UnitTestCase')" href="../../../../_classes/unittestcase.html" onMouseOver="classPopup(event,'unittestcase')">UnitTestCase</a> {
<a name="l495"><span class="linenum"> 495</span></a>  
<a name="l496"><span class="linenum"> 496</span></a>      function <a class="function" onClick="logFunction('testUserFinder')" href="../../../../_functions/testuserfinder.html" onMouseOver="funcPopup(event,'testuserfinder')">testUserFinder</a>() {
<a name="l497"><span class="linenum"> 497</span></a>          <a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('connection')" href="../../../../_variables/connection.html">$connection</a> = <span class="keyword">new </span><a class="class" onClick="logClass('MockDatabaseConnection')" href="../../../../_classes/mockdatabaseconnection.html" onMouseOver="classPopup(event,'mockdatabaseconnection')">MockDatabaseConnection</a>();&lt;strong&gt;
<a name="l498"><span class="linenum"> 498</span></a>          <a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('connection')" href="../../../../_variables/connection.html">$connection</a>-&amp;gt;<a class="function" onClick="logFunction('throwOn')" href="../../../../_functions/throwon.html" onMouseOver="funcPopup(event,'throwon')">throwOn</a>('selectQuery', new TimedOut('Ouch!'));&lt;/strong&gt;
<a name="l499"><span class="linenum"> 499</span></a>          <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a> = new MockAlerts();&lt;strong&gt;
<a name="l500"><span class="linenum"> 500</span></a>          <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>-&amp;gt;<a class="function" onClick="logFunction('expectOnce')" href="../../../../_functions/expectonce.html" onMouseOver="funcPopup(event,'expectonce')">expectOnce</a>('notify', 'Database is busy - please retry');&lt;/strong&gt;
<a name="l501"><span class="linenum"> 501</span></a>          <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('finder')" href="../../../../_variables/finder.html">$finder</a> = new UserFinder(<a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('connection')" href="../../../../_variables/connection.html">$connection</a>, <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>);
<a name="l502"><span class="linenum"> 502</span></a>          <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&amp;gt;<a class="function" onClick="logFunction('assertIdentical')" href="../../../../_functions/assertidentical.html" onMouseOver="funcPopup(event,'assertidentical')">assertIdentical</a>(<a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('finder')" href="../../../../_variables/finder.html">$finder</a>-&amp;gt;findNames(), array());
<a name="l503"><span class="linenum"> 503</span></a>      }
<a name="l504"><span class="linenum"> 504</span></a>  }
<a name="l505"><span class="linenum"> 505</span></a>  &lt;/pre&gt;
<a name="l506"><span class="linenum"> 506</span></a>                  We've passed the &lt;span class=&quot;new_code&quot;&gt;UserFinder&lt;/span&gt; an &lt;span class=&quot;new_code&quot;&gt;<a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>&lt;/span&gt;
<a name="l507"><span class="linenum"> 507</span></a>                  object.
<a name="l508"><span class="linenum"> 508</span></a>                  This is going to do some kind of pretty notifications in the
<a name="l509"><span class="linenum"> 509</span></a>                  user interface in the event of an error.
<a name="l510"><span class="linenum"> 510</span></a>                  We'd rather not sprinkle our code with hard wired &lt;span class=&quot;new_code&quot;&gt;print&lt;/span&gt;
<a name="l511"><span class="linenum"> 511</span></a>                  statements if we can avoid it.
<a name="l512"><span class="linenum"> 512</span></a>                  Wrapping the means of output means we can use this code anywhere.
<a name="l513"><span class="linenum"> 513</span></a>                  It also makes testing easier.
<a name="l514"><span class="linenum"> 514</span></a>              &lt;/p&gt;
<a name="l515"><span class="linenum"> 515</span></a>              &lt;p&gt;
<a name="l516"><span class="linenum"> 516</span></a>                  To pass this test, the finder has to write a nice user friendly
<a name="l517"><span class="linenum"> 517</span></a>                  message to &lt;span class=&quot;new_code&quot;&gt;<a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>&lt;/span&gt;, rather than propogating the exception.
<a name="l518"><span class="linenum"> 518</span></a>                  So far, so good.
<a name="l519"><span class="linenum"> 519</span></a>              &lt;/p&gt;
<a name="l520"><span class="linenum"> 520</span></a>              &lt;p&gt;
<a name="l521"><span class="linenum"> 521</span></a>                  How do we get the mock &lt;span class=&quot;new_code&quot;&gt;DatabaseConnection&lt;/span&gt; to throw an exception?
<a name="l522"><span class="linenum"> 522</span></a>                  We generate the exception using the &lt;span class=&quot;new_code&quot;&gt;throwOn&lt;/span&gt; method
<a name="l523"><span class="linenum"> 523</span></a>                  on the mock.
<a name="l524"><span class="linenum"> 524</span></a>              &lt;/p&gt;
<a name="l525"><span class="linenum"> 525</span></a>              &lt;p&gt;
<a name="l526"><span class="linenum"> 526</span></a>                  Finally, what if the method you want to simulate does not exist yet?
<a name="l527"><span class="linenum"> 527</span></a>                  If you set a return value on a method that is not there, SimpleTest
<a name="l528"><span class="linenum"> 528</span></a>                  will throw an error.
<a name="l529"><span class="linenum"> 529</span></a>                  What if you are using &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('__call')" href="../../../../_functions/__call.html" onMouseOver="funcPopup(event,'__call')">__call</a>()&lt;/span&gt; to simulate dynamic methods?
<a name="l530"><span class="linenum"> 530</span></a>              &lt;/p&gt;
<a name="l531"><span class="linenum"> 531</span></a>              &lt;p&gt;
<a name="l532"><span class="linenum"> 532</span></a>                  Objects with dynamic interfaces, using &lt;span class=&quot;new_code&quot;&gt;__call&lt;/span&gt;, can
<a name="l533"><span class="linenum"> 533</span></a>                  be problematic with the current mock objects implementation.
<a name="l534"><span class="linenum"> 534</span></a>                  You can mock the &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('__call')" href="../../../../_functions/__call.html" onMouseOver="funcPopup(event,'__call')">__call</a>()&lt;/span&gt; method, but this is ugly.
<a name="l535"><span class="linenum"> 535</span></a>                  Why should a test know anything about such low level implementation details?
<a name="l536"><span class="linenum"> 536</span></a>                  It just wants to simulate the call.
<a name="l537"><span class="linenum"> 537</span></a>              &lt;/p&gt;
<a name="l538"><span class="linenum"> 538</span></a>              &lt;p&gt;
<a name="l539"><span class="linenum"> 539</span></a>                  The way round this is to add extra methods to the mock when
<a name="l540"><span class="linenum"> 540</span></a>                  generating it.
<a name="l541"><span class="linenum"> 541</span></a>  &lt;pre&gt;
<a name="l542"><span class="linenum"> 542</span></a>  &lt;strong&gt;<a class="class" onClick="logClass('Mock')" href="../../../../_classes/mock.html" onMouseOver="classPopup(event,'mock')">Mock</a>::<a class="function" onClick="logFunction('generate')" href="../../../../_functions/generate.html" onMouseOver="funcPopup(event,'generate')">generate</a>('DatabaseConnection', 'MockDatabaseConnection', array('setOptions'));&lt;/strong&gt;
<a name="l543"><span class="linenum"> 543</span></a>  &lt;/pre&gt;
<a name="l544"><span class="linenum"> 544</span></a>                  In a large test suite this could cause trouble, as you probably
<a name="l545"><span class="linenum"> 545</span></a>                  already have a mock version of the class called
<a name="l546"><span class="linenum"> 546</span></a>                  &lt;span class=&quot;new_code&quot;&gt;MockDatabaseConnection&lt;/span&gt; without the extra methods.
<a name="l547"><span class="linenum"> 547</span></a>                  The code generator will not generate a mock version of the class if
<a name="l548"><span class="linenum"> 548</span></a>                  one of the same name already exists.
<a name="l549"><span class="linenum"> 549</span></a>                  You will confusingly fail to see your method if another definition
<a name="l550"><span class="linenum"> 550</span></a>                  was run first.
<a name="l551"><span class="linenum"> 551</span></a>              &lt;/p&gt;
<a name="l552"><span class="linenum"> 552</span></a>              &lt;p&gt;
<a name="l553"><span class="linenum"> 553</span></a>                  To cope with this, SimpleTest allows you to choose any name for the
<a name="l554"><span class="linenum"> 554</span></a>                  new class at the same time as you add the extra methods.
<a name="l555"><span class="linenum"> 555</span></a>  &lt;pre&gt;
<a name="l556"><span class="linenum"> 556</span></a>  <a class="class" onClick="logClass('Mock')" href="../../../../_classes/mock.html" onMouseOver="classPopup(event,'mock')">Mock</a>::<a class="function" onClick="logFunction('generate')" href="../../../../_functions/generate.html" onMouseOver="funcPopup(event,'generate')">generate</a>('DatabaseConnection', &lt;strong&gt;'MockDatabaseConnectionWithOptions'&lt;/strong&gt;, array('setOptions'));
<a name="l557"><span class="linenum"> 557</span></a>  &lt;/pre&gt;
<a name="l558"><span class="linenum"> 558</span></a>                  Here the mock will behave as if the &lt;span class=&quot;new_code&quot;&gt;setOptions()&lt;/span&gt;
<a name="l559"><span class="linenum"> 559</span></a>                  existed in the original class.
<a name="l560"><span class="linenum"> 560</span></a>              &lt;/p&gt;
<a name="l561"><span class="linenum"> 561</span></a>              &lt;p&gt;
<a name="l562"><span class="linenum"> 562</span></a>                  Mock objects can only be used within test cases, as upon expectations
<a name="l563"><span class="linenum"> 563</span></a>                  they send messages straight to the currently running test case.
<a name="l564"><span class="linenum"> 564</span></a>                  Creating them outside a test case will cause a run time error
<a name="l565"><span class="linenum"> 565</span></a>                  when an expectation is triggered and there is no running test case
<a name="l566"><span class="linenum"> 566</span></a>                  for the message to end up.
<a name="l567"><span class="linenum"> 567</span></a>                  We cover expectations next.
<a name="l568"><span class="linenum"> 568</span></a>              &lt;/p&gt;
<a name="l569"><span class="linenum"> 569</span></a>          
<a name="l570"><span class="linenum"> 570</span></a>          &lt;h2&gt;
<a name="l571"><span class="linenum"> 571</span></a>  &lt;a class=&quot;target&quot; name=&quot;expectations&quot;&gt;&lt;/a&gt;Mocks as critics&lt;/h2&gt;
<a name="l572"><span class="linenum"> 572</span></a>              &lt;p&gt;
<a name="l573"><span class="linenum"> 573</span></a>                  Although the server stubs approach insulates your tests from
<a name="l574"><span class="linenum"> 574</span></a>                  real world disruption, it is only half the benefit.
<a name="l575"><span class="linenum"> 575</span></a>                  You can have the class under test receiving the required
<a name="l576"><span class="linenum"> 576</span></a>                  messages, but is your new class sending correct ones?
<a name="l577"><span class="linenum"> 577</span></a>                  Testing this can get messy without a mock objects library.
<a name="l578"><span class="linenum"> 578</span></a>              &lt;/p&gt;
<a name="l579"><span class="linenum"> 579</span></a>              &lt;p&gt;
<a name="l580"><span class="linenum"> 580</span></a>                  By way of example, let's take a simple &lt;span class=&quot;new_code&quot;&gt;PageController&lt;/span&gt;
<a name="l581"><span class="linenum"> 581</span></a>                  class to handle a credit card payment form...
<a name="l582"><span class="linenum"> 582</span></a>  &lt;pre&gt;
<a name="l583"><span class="linenum"> 583</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('PaymentForm')" href="../../../../_classes/paymentform.html" onMouseOver="classPopup(event,'paymentform')">PaymentForm</a> extends PageController {
<a name="l584"><span class="linenum"> 584</span></a>      function <a class="function" onClick="logFunction('__construct')" href="../../../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>, <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('payment_gateway')" href="../../../../_variables/payment_gateway.html">$payment_gateway</a>) { ... }
<a name="l585"><span class="linenum"> 585</span></a>      function <a class="function" onClick="logFunction('makePayment')" href="../../../../_functions/makepayment.html" onMouseOver="funcPopup(event,'makepayment')">makePayment</a>(<a class="var it483" onMouseOver="hilite(483)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../../_variables/request.html">$request</a>) { ... }
<a name="l586"><span class="linenum"> 586</span></a>  }
<a name="l587"><span class="linenum"> 587</span></a>  &lt;/pre&gt;
<a name="l588"><span class="linenum"> 588</span></a>                  This class takes a &lt;span class=&quot;new_code&quot;&gt;PaymentGateway&lt;/span&gt; to actually talk
<a name="l589"><span class="linenum"> 589</span></a>                  to the bank.
<a name="l590"><span class="linenum"> 590</span></a>                  It also takes an &lt;span class=&quot;new_code&quot;&gt;Alert&lt;/span&gt; object to handle errors.
<a name="l591"><span class="linenum"> 591</span></a>                  This class talks to the page or template.
<a name="l592"><span class="linenum"> 592</span></a>                  It's responsible for painting the error message and highlighting any
<a name="l593"><span class="linenum"> 593</span></a>                  form fields that are incorrect.
<a name="l594"><span class="linenum"> 594</span></a>              &lt;/p&gt;
<a name="l595"><span class="linenum"> 595</span></a>              &lt;p&gt;
<a name="l596"><span class="linenum"> 596</span></a>                  It might look something like...
<a name="l597"><span class="linenum"> 597</span></a>  &lt;pre&gt;
<a name="l598"><span class="linenum"> 598</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('Alert')" href="../../../../_classes/alert.html" onMouseOver="classPopup(event,'alert')">Alert</a> {
<a name="l599"><span class="linenum"> 599</span></a>      function <a class="function" onClick="logFunction('warn')" href="../../../../_functions/warn.html" onMouseOver="funcPopup(event,'warn')">warn</a>(<a class="var it484" onMouseOver="hilite(484)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../../../_variables/warning.html">$warning</a>, <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../../_variables/id.html">$id</a>) {
<a name="l600"><span class="linenum"> 600</span></a>          print '&amp;lt;div class=&quot;warning&quot;&amp;gt;' . <a class="var it484" onMouseOver="hilite(484)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../../../_variables/warning.html">$warning</a> . '&amp;lt;/div&amp;gt;';
<a name="l601"><span class="linenum"> 601</span></a>          print '&amp;lt;style type=&quot;text/css&quot;&amp;gt;<span class="comment">#' . $id . ' { background-color: red }&amp;lt;/style&amp;gt;';</span>
<a name="l602"><span class="linenum"> 602</span></a>      }
<a name="l603"><span class="linenum"> 603</span></a>  }
<a name="l604"><span class="linenum"> 604</span></a>  &lt;/pre&gt;
<a name="l605"><span class="linenum"> 605</span></a>              &lt;/p&gt;
<a name="l606"><span class="linenum"> 606</span></a>              &lt;p&gt;
<a name="l607"><span class="linenum"> 607</span></a>                  Our interest is in the &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('makePayment')" href="../../../../_functions/makepayment.html" onMouseOver="funcPopup(event,'makepayment')">makePayment</a>()&lt;/span&gt; method.
<a name="l608"><span class="linenum"> 608</span></a>                  If we fail to enter a &quot;CVV2&quot; number (the three digit number
<a name="l609"><span class="linenum"> 609</span></a>                  on the back of the credit card), we want to show an error rather than
<a name="l610"><span class="linenum"> 610</span></a>                  try to process the payment.
<a name="l611"><span class="linenum"> 611</span></a>                  In test form...
<a name="l612"><span class="linenum"> 612</span></a>  &lt;pre&gt;
<a name="l613"><span class="linenum"> 613</span></a>  &amp;lt;?php
<a name="l614"><span class="linenum"> 614</span></a>  require_once('simpletest/autorun.php');
<a name="l615"><span class="linenum"> 615</span></a>  require_once('payment_form.php');
<a name="l616"><span class="linenum"> 616</span></a>  <a class="class" onClick="logClass('Mock')" href="../../../../_classes/mock.html" onMouseOver="classPopup(event,'mock')">Mock</a>::<a class="function" onClick="logFunction('generate')" href="../../../../_functions/generate.html" onMouseOver="funcPopup(event,'generate')">generate</a>('Alert');
<a name="l617"><span class="linenum"> 617</span></a>  <a class="class" onClick="logClass('Mock')" href="../../../../_classes/mock.html" onMouseOver="classPopup(event,'mock')">Mock</a>::<a class="function" onClick="logFunction('generate')" href="../../../../_functions/generate.html" onMouseOver="funcPopup(event,'generate')">generate</a>('PaymentGateway');
<a name="l618"><span class="linenum"> 618</span></a>  
<a name="l619"><span class="linenum"> 619</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('PaymentFormFailuresShouldBeGraceful')" href="../../../../_classes/paymentformfailuresshouldbegraceful.html" onMouseOver="classPopup(event,'paymentformfailuresshouldbegraceful')">PaymentFormFailuresShouldBeGraceful</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('UnitTestCase')" href="../../../../_classes/unittestcase.html" onMouseOver="classPopup(event,'unittestcase')">UnitTestCase</a> {
<a name="l620"><span class="linenum"> 620</span></a>  
<a name="l621"><span class="linenum"> 621</span></a>      function <a class="function" onClick="logFunction('testMissingCvv2CausesAlert')" href="../../../../_functions/testmissingcvv2causesalert.html" onMouseOver="funcPopup(event,'testmissingcvv2causesalert')">testMissingCvv2CausesAlert</a>() {
<a name="l622"><span class="linenum"> 622</span></a>          <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a> = new MockAlert();
<a name="l623"><span class="linenum"> 623</span></a>          &lt;strong&gt;<a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>-&amp;gt;<a class="function" onClick="logFunction('expectOnce')" href="../../../../_functions/expectonce.html" onMouseOver="funcPopup(event,'expectonce')">expectOnce</a>(
<a name="l624"><span class="linenum"> 624</span></a>                      'warn',
<a name="l625"><span class="linenum"> 625</span></a>                      array('Missing three digit security code', 'cvv2'));&lt;/strong&gt;
<a name="l626"><span class="linenum"> 626</span></a>          <a class="var it190" onMouseOver="hilite(190)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../../_variables/controller.html">$controller</a> = <span class="keyword">new </span><a class="class" onClick="logClass('PaymentForm')" href="../../../../_classes/paymentform.html" onMouseOver="classPopup(event,'paymentform')">PaymentForm</a>(&lt;strong&gt;<a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>&lt;/strong&gt;, new MockPaymentGateway());
<a name="l627"><span class="linenum"> 627</span></a>          <a class="var it190" onMouseOver="hilite(190)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../../_variables/controller.html">$controller</a>-&amp;gt;<a class="function" onClick="logFunction('makePayment')" href="../../../../_functions/makepayment.html" onMouseOver="funcPopup(event,'makepayment')">makePayment</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&amp;gt;<a class="function" onClick="logFunction('requestWithMissingCvv2')" href="../../../../_functions/requestwithmissingcvv2.html" onMouseOver="funcPopup(event,'requestwithmissingcvv2')">requestWithMissingCvv2</a>());
<a name="l628"><span class="linenum"> 628</span></a>      }
<a name="l629"><span class="linenum"> 629</span></a>  
<a name="l630"><span class="linenum"> 630</span></a>      function <a class="function" onClick="logFunction('requestWithMissingCvv2')" href="../../../../_functions/requestwithmissingcvv2.html" onMouseOver="funcPopup(event,'requestwithmissingcvv2')">requestWithMissingCvv2</a>() { ... }
<a name="l631"><span class="linenum"> 631</span></a>  }
<a name="l632"><span class="linenum"> 632</span></a>  ?&amp;gt;
<a name="l633"><span class="linenum"> 633</span></a>  &lt;/pre&gt;
<a name="l634"><span class="linenum"> 634</span></a>                  The first question you may be asking is, where are the assertions?
<a name="l635"><span class="linenum"> 635</span></a>              &lt;/p&gt;
<a name="l636"><span class="linenum"> 636</span></a>              &lt;p&gt;
<a name="l637"><span class="linenum"> 637</span></a>                  The call to &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expectOnce')" href="../../../../_functions/expectonce.html" onMouseOver="funcPopup(event,'expectonce')">expectOnce</a>('warn', array(...))&lt;/span&gt; instructs the mock
<a name="l638"><span class="linenum"> 638</span></a>                  to expect a call to &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('warn')" href="../../../../_functions/warn.html" onMouseOver="funcPopup(event,'warn')">warn</a>()&lt;/span&gt; before the test ends.
<a name="l639"><span class="linenum"> 639</span></a>                  When it gets a call to &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('warn')" href="../../../../_functions/warn.html" onMouseOver="funcPopup(event,'warn')">warn</a>()&lt;/span&gt;, it checks the arguments.
<a name="l640"><span class="linenum"> 640</span></a>                  If the arguments don't match, then a failure is generated.
<a name="l641"><span class="linenum"> 641</span></a>                  It also fails if the method is never called at all.
<a name="l642"><span class="linenum"> 642</span></a>              &lt;/p&gt;
<a name="l643"><span class="linenum"> 643</span></a>              &lt;p&gt;
<a name="l644"><span class="linenum"> 644</span></a>                  The test above not only asserts that &lt;span class=&quot;new_code&quot;&gt;warn&lt;/span&gt; was called,
<a name="l645"><span class="linenum"> 645</span></a>                  but that it received the string &quot;Missing three digit security code&quot;
<a name="l646"><span class="linenum"> 646</span></a>                  and also the tag &quot;cvv2&quot;.
<a name="l647"><span class="linenum"> 647</span></a>                  The equivalent of &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('assertIdentical')" href="../../../../_functions/assertidentical.html" onMouseOver="funcPopup(event,'assertidentical')">assertIdentical</a>()&lt;/span&gt; is applied to both
<a name="l648"><span class="linenum"> 648</span></a>                  fields when the parameters are compared.
<a name="l649"><span class="linenum"> 649</span></a>              &lt;/p&gt;
<a name="l650"><span class="linenum"> 650</span></a>              &lt;p&gt;
<a name="l651"><span class="linenum"> 651</span></a>                  If you are not interested in the actual message, and we are not
<a name="l652"><span class="linenum"> 652</span></a>                  for user interface code that changes often, we can skip that
<a name="l653"><span class="linenum"> 653</span></a>                  parameter with the &quot;*&quot; operator...
<a name="l654"><span class="linenum"> 654</span></a>  &lt;pre&gt;
<a name="l655"><span class="linenum"> 655</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('PaymentFormFailuresShouldBeGraceful')" href="../../../../_classes/paymentformfailuresshouldbegraceful.html" onMouseOver="classPopup(event,'paymentformfailuresshouldbegraceful')">PaymentFormFailuresShouldBeGraceful</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('UnitTestCase')" href="../../../../_classes/unittestcase.html" onMouseOver="classPopup(event,'unittestcase')">UnitTestCase</a> {
<a name="l656"><span class="linenum"> 656</span></a>  
<a name="l657"><span class="linenum"> 657</span></a>      function <a class="function" onClick="logFunction('testMissingCvv2CausesAlert')" href="../../../../_functions/testmissingcvv2causesalert.html" onMouseOver="funcPopup(event,'testmissingcvv2causesalert')">testMissingCvv2CausesAlert</a>() {
<a name="l658"><span class="linenum"> 658</span></a>          <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a> = new MockAlert();
<a name="l659"><span class="linenum"> 659</span></a>          <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>-&amp;gt;<a class="function" onClick="logFunction('expectOnce')" href="../../../../_functions/expectonce.html" onMouseOver="funcPopup(event,'expectonce')">expectOnce</a>('warn', array(&lt;strong&gt;'*'&lt;/strong&gt;, 'cvv2'));
<a name="l660"><span class="linenum"> 660</span></a>          <a class="var it190" onMouseOver="hilite(190)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../../_variables/controller.html">$controller</a> = <span class="keyword">new </span><a class="class" onClick="logClass('PaymentForm')" href="../../../../_classes/paymentform.html" onMouseOver="classPopup(event,'paymentform')">PaymentForm</a>(<a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>, new MockPaymentGateway());
<a name="l661"><span class="linenum"> 661</span></a>          <a class="var it190" onMouseOver="hilite(190)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../../_variables/controller.html">$controller</a>-&amp;gt;<a class="function" onClick="logFunction('makePayment')" href="../../../../_functions/makepayment.html" onMouseOver="funcPopup(event,'makepayment')">makePayment</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&amp;gt;<a class="function" onClick="logFunction('requestWithMissingCvv2')" href="../../../../_functions/requestwithmissingcvv2.html" onMouseOver="funcPopup(event,'requestwithmissingcvv2')">requestWithMissingCvv2</a>());
<a name="l662"><span class="linenum"> 662</span></a>      }
<a name="l663"><span class="linenum"> 663</span></a>  
<a name="l664"><span class="linenum"> 664</span></a>      function <a class="function" onClick="logFunction('requestWithMissingCvv2')" href="../../../../_functions/requestwithmissingcvv2.html" onMouseOver="funcPopup(event,'requestwithmissingcvv2')">requestWithMissingCvv2</a>() { ... }
<a name="l665"><span class="linenum"> 665</span></a>  }
<a name="l666"><span class="linenum"> 666</span></a>  &lt;/pre&gt;
<a name="l667"><span class="linenum"> 667</span></a>                  We can weaken the test further by missing
<a name="l668"><span class="linenum"> 668</span></a>                  out the parameters array...
<a name="l669"><span class="linenum"> 669</span></a>  &lt;pre&gt;
<a name="l670"><span class="linenum"> 670</span></a>  function <a class="function" onClick="logFunction('testMissingCvv2CausesAlert')" href="../../../../_functions/testmissingcvv2causesalert.html" onMouseOver="funcPopup(event,'testmissingcvv2causesalert')">testMissingCvv2CausesAlert</a>() {
<a name="l671"><span class="linenum"> 671</span></a>      <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a> = new MockAlert();
<a name="l672"><span class="linenum"> 672</span></a>      &lt;strong&gt;<a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>-&amp;gt;<a class="function" onClick="logFunction('expectOnce')" href="../../../../_functions/expectonce.html" onMouseOver="funcPopup(event,'expectonce')">expectOnce</a>('warn');&lt;/strong&gt;
<a name="l673"><span class="linenum"> 673</span></a>      <a class="var it190" onMouseOver="hilite(190)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../../_variables/controller.html">$controller</a> = <span class="keyword">new </span><a class="class" onClick="logClass('PaymentForm')" href="../../../../_classes/paymentform.html" onMouseOver="classPopup(event,'paymentform')">PaymentForm</a>(<a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>, new MockPaymentGateway());
<a name="l674"><span class="linenum"> 674</span></a>      <a class="var it190" onMouseOver="hilite(190)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../../_variables/controller.html">$controller</a>-&amp;gt;<a class="function" onClick="logFunction('makePayment')" href="../../../../_functions/makepayment.html" onMouseOver="funcPopup(event,'makepayment')">makePayment</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&amp;gt;<a class="function" onClick="logFunction('requestWithMissingCvv2')" href="../../../../_functions/requestwithmissingcvv2.html" onMouseOver="funcPopup(event,'requestwithmissingcvv2')">requestWithMissingCvv2</a>());
<a name="l675"><span class="linenum"> 675</span></a>  }
<a name="l676"><span class="linenum"> 676</span></a>  &lt;/pre&gt;
<a name="l677"><span class="linenum"> 677</span></a>                  This will only test that the method is called,
<a name="l678"><span class="linenum"> 678</span></a>                  which is a bit drastic in this case.
<a name="l679"><span class="linenum"> 679</span></a>                  Later on, we'll see how we can weaken the expectations more precisely.
<a name="l680"><span class="linenum"> 680</span></a>              &lt;/p&gt;
<a name="l681"><span class="linenum"> 681</span></a>              &lt;p&gt;
<a name="l682"><span class="linenum"> 682</span></a>                  Tests without assertions can be both compact and very expressive.
<a name="l683"><span class="linenum"> 683</span></a>                  Because we intercept the call on the way into an object, here of
<a name="l684"><span class="linenum"> 684</span></a>                  the &lt;span class=&quot;new_code&quot;&gt;Alert&lt;/span&gt; class, we avoid having to assert its state
<a name="l685"><span class="linenum"> 685</span></a>                  afterwards.
<a name="l686"><span class="linenum"> 686</span></a>                  This not only avoids the assertions in the tests, but also having
<a name="l687"><span class="linenum"> 687</span></a>                  to add extra test only accessors to the original code.
<a name="l688"><span class="linenum"> 688</span></a>                  If you catch yourself adding such accessors, called &quot;state based testing&quot;,
<a name="l689"><span class="linenum"> 689</span></a>                  it's probably time to consider using mocks in the tests.
<a name="l690"><span class="linenum"> 690</span></a>                  This is called &quot;behaviour based testing&quot;, and is normally superior.
<a name="l691"><span class="linenum"> 691</span></a>              &lt;/p&gt;
<a name="l692"><span class="linenum"> 692</span></a>              &lt;p&gt;
<a name="l693"><span class="linenum"> 693</span></a>                  Let's add another test.
<a name="l694"><span class="linenum"> 694</span></a>                  Let's make sure that we don't even attempt a payment without a CVV2...
<a name="l695"><span class="linenum"> 695</span></a>  &lt;pre&gt;
<a name="l696"><span class="linenum"> 696</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('PaymentFormFailuresShouldBeGraceful')" href="../../../../_classes/paymentformfailuresshouldbegraceful.html" onMouseOver="classPopup(event,'paymentformfailuresshouldbegraceful')">PaymentFormFailuresShouldBeGraceful</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('UnitTestCase')" href="../../../../_classes/unittestcase.html" onMouseOver="classPopup(event,'unittestcase')">UnitTestCase</a> {
<a name="l697"><span class="linenum"> 697</span></a>  
<a name="l698"><span class="linenum"> 698</span></a>      function <a class="function" onClick="logFunction('testMissingCvv2CausesAlert')" href="../../../../_functions/testmissingcvv2causesalert.html" onMouseOver="funcPopup(event,'testmissingcvv2causesalert')">testMissingCvv2CausesAlert</a>() { ... }
<a name="l699"><span class="linenum"> 699</span></a>  
<a name="l700"><span class="linenum"> 700</span></a>      function <a class="function" onClick="logFunction('testNoPaymentAttemptedWithMissingCvv2')" href="../../../../_functions/testnopaymentattemptedwithmissingcvv2.html" onMouseOver="funcPopup(event,'testnopaymentattemptedwithmissingcvv2')">testNoPaymentAttemptedWithMissingCvv2</a>() {
<a name="l701"><span class="linenum"> 701</span></a>          <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('payment_gateway')" href="../../../../_variables/payment_gateway.html">$payment_gateway</a> = new MockPaymentGateway();
<a name="l702"><span class="linenum"> 702</span></a>          &lt;strong&gt;<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('payment_gateway')" href="../../../../_variables/payment_gateway.html">$payment_gateway</a>-&amp;gt;<a class="function" onClick="logFunction('expectNever')" href="../../../../_functions/expectnever.html" onMouseOver="funcPopup(event,'expectnever')">expectNever</a>('pay');&lt;/strong&gt;
<a name="l703"><span class="linenum"> 703</span></a>          <a class="var it190" onMouseOver="hilite(190)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../../_variables/controller.html">$controller</a> = <span class="keyword">new </span><a class="class" onClick="logClass('PaymentForm')" href="../../../../_classes/paymentform.html" onMouseOver="classPopup(event,'paymentform')">PaymentForm</a>(new MockAlert(), <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('payment_gateway')" href="../../../../_variables/payment_gateway.html">$payment_gateway</a>);
<a name="l704"><span class="linenum"> 704</span></a>          <a class="var it190" onMouseOver="hilite(190)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../../_variables/controller.html">$controller</a>-&amp;gt;<a class="function" onClick="logFunction('makePayment')" href="../../../../_functions/makepayment.html" onMouseOver="funcPopup(event,'makepayment')">makePayment</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&amp;gt;<a class="function" onClick="logFunction('requestWithMissingCvv2')" href="../../../../_functions/requestwithmissingcvv2.html" onMouseOver="funcPopup(event,'requestwithmissingcvv2')">requestWithMissingCvv2</a>());
<a name="l705"><span class="linenum"> 705</span></a>      }
<a name="l706"><span class="linenum"> 706</span></a>  
<a name="l707"><span class="linenum"> 707</span></a>      ...
<a name="l708"><span class="linenum"> 708</span></a>  }
<a name="l709"><span class="linenum"> 709</span></a>  &lt;/pre&gt;
<a name="l710"><span class="linenum"> 710</span></a>                  Asserting a negative can be very hard in tests, but
<a name="l711"><span class="linenum"> 711</span></a>                  &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expectNever')" href="../../../../_functions/expectnever.html" onMouseOver="funcPopup(event,'expectnever')">expectNever</a>()&lt;/span&gt; makes it easy.
<a name="l712"><span class="linenum"> 712</span></a>              &lt;/p&gt;
<a name="l713"><span class="linenum"> 713</span></a>              &lt;p&gt;
<a name="l714"><span class="linenum"> 714</span></a>                  &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expectOnce')" href="../../../../_functions/expectonce.html" onMouseOver="funcPopup(event,'expectonce')">expectOnce</a>()&lt;/span&gt; and &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expectNever')" href="../../../../_functions/expectnever.html" onMouseOver="funcPopup(event,'expectnever')">expectNever</a>()&lt;/span&gt; are
<a name="l715"><span class="linenum"> 715</span></a>                  sufficient for most tests, but
<a name="l716"><span class="linenum"> 716</span></a>                  occasionally you want to test multiple events.
<a name="l717"><span class="linenum"> 717</span></a>                  Normally for usability purposes we want all missing fields
<a name="l718"><span class="linenum"> 718</span></a>                  in the form to light up, not just the first one.
<a name="l719"><span class="linenum"> 719</span></a>                  This means that we should get multiple calls to
<a name="l720"><span class="linenum"> 720</span></a>                  &lt;span class=&quot;new_code&quot;&gt;<a class="class" onClick="logClass('Alert')" href="../../../../_classes/alert.html" onMouseOver="classPopup(event,'alert')">Alert</a>::<a class="function" onClick="logFunction('warn')" href="../../../../_functions/warn.html" onMouseOver="funcPopup(event,'warn')">warn</a>()&lt;/span&gt;, not just one...
<a name="l721"><span class="linenum"> 721</span></a>  &lt;pre&gt;
<a name="l722"><span class="linenum"> 722</span></a>  function <a class="function" onClick="logFunction('testAllRequiredFieldsHighlightedOnEmptyRequest')" href="../../../../_functions/testallrequiredfieldshighlightedonemptyrequest.html" onMouseOver="funcPopup(event,'testallrequiredfieldshighlightedonemptyrequest')">testAllRequiredFieldsHighlightedOnEmptyRequest</a>() {
<a name="l723"><span class="linenum"> 723</span></a>      <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a> = new MockAlert();&lt;strong&gt;
<a name="l724"><span class="linenum"> 724</span></a>      <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>-&amp;gt;<a class="function" onClick="logFunction('expectAt')" href="../../../../_functions/expectat.html" onMouseOver="funcPopup(event,'expectat')">expectAt</a>(0, 'warn', array('*', 'cc_number'));
<a name="l725"><span class="linenum"> 725</span></a>      <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>-&amp;gt;<a class="function" onClick="logFunction('expectAt')" href="../../../../_functions/expectat.html" onMouseOver="funcPopup(event,'expectat')">expectAt</a>(1, 'warn', array('*', 'expiry'));
<a name="l726"><span class="linenum"> 726</span></a>      <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>-&amp;gt;<a class="function" onClick="logFunction('expectAt')" href="../../../../_functions/expectat.html" onMouseOver="funcPopup(event,'expectat')">expectAt</a>(2, 'warn', array('*', 'cvv2'));
<a name="l727"><span class="linenum"> 727</span></a>      <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>-&amp;gt;<a class="function" onClick="logFunction('expectAt')" href="../../../../_functions/expectat.html" onMouseOver="funcPopup(event,'expectat')">expectAt</a>(3, 'warn', array('*', 'card_holder'));
<a name="l728"><span class="linenum"> 728</span></a>      <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>-&amp;gt;<a class="function" onClick="logFunction('expectAt')" href="../../../../_functions/expectat.html" onMouseOver="funcPopup(event,'expectat')">expectAt</a>(4, 'warn', array('*', 'address'));
<a name="l729"><span class="linenum"> 729</span></a>      <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>-&amp;gt;<a class="function" onClick="logFunction('expectAt')" href="../../../../_functions/expectat.html" onMouseOver="funcPopup(event,'expectat')">expectAt</a>(5, 'warn', array('*', 'postcode'));
<a name="l730"><span class="linenum"> 730</span></a>      <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>-&amp;gt;<a class="function" onClick="logFunction('expectAt')" href="../../../../_functions/expectat.html" onMouseOver="funcPopup(event,'expectat')">expectAt</a>(6, 'warn', array('*', 'country'));
<a name="l731"><span class="linenum"> 731</span></a>      <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>-&amp;gt;<a class="function" onClick="logFunction('expectCallCount')" href="../../../../_functions/expectcallcount.html" onMouseOver="funcPopup(event,'expectcallcount')">expectCallCount</a>('warn', 7);&lt;/strong&gt;
<a name="l732"><span class="linenum"> 732</span></a>      <a class="var it190" onMouseOver="hilite(190)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../../_variables/controller.html">$controller</a> = <span class="keyword">new </span><a class="class" onClick="logClass('PaymentForm')" href="../../../../_classes/paymentform.html" onMouseOver="classPopup(event,'paymentform')">PaymentForm</a>(<a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('alert')" href="../../../../_variables/alert.html">$alert</a>, new MockPaymentGateway());
<a name="l733"><span class="linenum"> 733</span></a>      <a class="var it190" onMouseOver="hilite(190)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../../_variables/controller.html">$controller</a>-&amp;gt;<a class="function" onClick="logFunction('makePayment')" href="../../../../_functions/makepayment.html" onMouseOver="funcPopup(event,'makepayment')">makePayment</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&amp;gt;<a class="function" onClick="logFunction('requestWithMissingCvv2')" href="../../../../_functions/requestwithmissingcvv2.html" onMouseOver="funcPopup(event,'requestwithmissingcvv2')">requestWithMissingCvv2</a>());
<a name="l734"><span class="linenum"> 734</span></a>  }
<a name="l735"><span class="linenum"> 735</span></a>  &lt;/pre&gt;
<a name="l736"><span class="linenum"> 736</span></a>                  The counter in &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expectAt')" href="../../../../_functions/expectat.html" onMouseOver="funcPopup(event,'expectat')">expectAt</a>()&lt;/span&gt; is the number of times
<a name="l737"><span class="linenum"> 737</span></a>                  the method has been called already.
<a name="l738"><span class="linenum"> 738</span></a>                  Here we are asserting that every field will be highlighted.
<a name="l739"><span class="linenum"> 739</span></a>              &lt;/p&gt;
<a name="l740"><span class="linenum"> 740</span></a>              &lt;p&gt;
<a name="l741"><span class="linenum"> 741</span></a>                  Note that we are forced to assert the order too.
<a name="l742"><span class="linenum"> 742</span></a>                  SimpleTest does not yet have a way to avoid this, but
<a name="l743"><span class="linenum"> 743</span></a>                  this will be fixed in future versions.
<a name="l744"><span class="linenum"> 744</span></a>              &lt;/p&gt;
<a name="l745"><span class="linenum"> 745</span></a>              &lt;p&gt;
<a name="l746"><span class="linenum"> 746</span></a>                  Here is the full list of expectations you can set on a mock object
<a name="l747"><span class="linenum"> 747</span></a>                  in &lt;a href=&quot;http://simpletest.org/&quot;&gt;SimpleTest&lt;/a&gt;.
<a name="l748"><span class="linenum"> 748</span></a>                  As with the assertions, these methods take an optional failure message.
<a name="l749"><span class="linenum"> 749</span></a>                  &lt;table&gt;
<a name="l750"><span class="linenum"> 750</span></a>                      &lt;thead&gt;&lt;tr&gt;
<a name="l751"><span class="linenum"> 751</span></a>  &lt;th&gt;Expectation&lt;/th&gt;
<a name="l752"><span class="linenum"> 752</span></a>  &lt;th&gt;Description&lt;/th&gt;
<a name="l753"><span class="linenum"> 753</span></a>  &lt;/tr&gt;&lt;/thead&gt;
<a name="l754"><span class="linenum"> 754</span></a>                      &lt;tbody&gt;
<a name="l755"><span class="linenum"> 755</span></a>                          &lt;tr&gt;
<a name="l756"><span class="linenum"> 756</span></a>                              &lt;td&gt;&lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expect')" href="../../../../_functions/expect.html" onMouseOver="funcPopup(event,'expect')">expect</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../../../_variables/method.html">$method</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../../_variables/args.html">$args</a>)&lt;/span&gt;&lt;/td&gt;
<a name="l757"><span class="linenum"> 757</span></a>                              &lt;td&gt;Arguments must match if called&lt;/td&gt;
<a name="l758"><span class="linenum"> 758</span></a>                          &lt;/tr&gt;
<a name="l759"><span class="linenum"> 759</span></a>                          &lt;tr&gt;
<a name="l760"><span class="linenum"> 760</span></a>                              &lt;td&gt;&lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expectAt')" href="../../../../_functions/expectat.html" onMouseOver="funcPopup(event,'expectat')">expectAt</a>(<a class="var it485" onMouseOver="hilite(485)" onMouseOut="lolite()" onClick="logVariable('timing')" href="../../../../_variables/timing.html">$timing</a>, <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../../../_variables/method.html">$method</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../../_variables/args.html">$args</a>)&lt;/span&gt;&lt;/td&gt;
<a name="l761"><span class="linenum"> 761</span></a>                              &lt;td&gt;Arguments must match when called on the &lt;span class=&quot;new_code&quot;&gt;<a class="var it485" onMouseOver="hilite(485)" onMouseOut="lolite()" onClick="logVariable('timing')" href="../../../../_variables/timing.html">$timing</a>&lt;/span&gt;'th time&lt;/td&gt;
<a name="l762"><span class="linenum"> 762</span></a>                          &lt;/tr&gt;
<a name="l763"><span class="linenum"> 763</span></a>                          &lt;tr&gt;
<a name="l764"><span class="linenum"> 764</span></a>                              &lt;td&gt;&lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expectCallCount')" href="../../../../_functions/expectcallcount.html" onMouseOver="funcPopup(event,'expectcallcount')">expectCallCount</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../../../_variables/method.html">$method</a>, <a class="var it486" onMouseOver="hilite(486)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a>)&lt;/span&gt;&lt;/td&gt;
<a name="l765"><span class="linenum"> 765</span></a>                              &lt;td&gt;The method must be called exactly this many times&lt;/td&gt;
<a name="l766"><span class="linenum"> 766</span></a>                          &lt;/tr&gt;
<a name="l767"><span class="linenum"> 767</span></a>                          &lt;tr&gt;
<a name="l768"><span class="linenum"> 768</span></a>                              &lt;td&gt;&lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expectMaximumCallCount')" href="../../../../_functions/expectmaximumcallcount.html" onMouseOver="funcPopup(event,'expectmaximumcallcount')">expectMaximumCallCount</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../../../_variables/method.html">$method</a>, <a class="var it486" onMouseOver="hilite(486)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a>)&lt;/span&gt;&lt;/td&gt;
<a name="l769"><span class="linenum"> 769</span></a>                              &lt;td&gt;Call this method no more than &lt;span class=&quot;new_code&quot;&gt;<a class="var it486" onMouseOver="hilite(486)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a>&lt;/span&gt; times&lt;/td&gt;
<a name="l770"><span class="linenum"> 770</span></a>                          &lt;/tr&gt;
<a name="l771"><span class="linenum"> 771</span></a>                          &lt;tr&gt;
<a name="l772"><span class="linenum"> 772</span></a>                              &lt;td&gt;&lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expectMinimumCallCount')" href="../../../../_functions/expectminimumcallcount.html" onMouseOver="funcPopup(event,'expectminimumcallcount')">expectMinimumCallCount</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../../../_variables/method.html">$method</a>, <a class="var it486" onMouseOver="hilite(486)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a>)&lt;/span&gt;&lt;/td&gt;
<a name="l773"><span class="linenum"> 773</span></a>                              &lt;td&gt;Must be called at least &lt;span class=&quot;new_code&quot;&gt;<a class="var it486" onMouseOver="hilite(486)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a>&lt;/span&gt; times&lt;/td&gt;
<a name="l774"><span class="linenum"> 774</span></a>                          &lt;/tr&gt;
<a name="l775"><span class="linenum"> 775</span></a>                          &lt;tr&gt;
<a name="l776"><span class="linenum"> 776</span></a>                              &lt;td&gt;&lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expectNever')" href="../../../../_functions/expectnever.html" onMouseOver="funcPopup(event,'expectnever')">expectNever</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../../../_variables/method.html">$method</a>)&lt;/span&gt;&lt;/td&gt;
<a name="l777"><span class="linenum"> 777</span></a>                              &lt;td&gt;Must never be called&lt;/td&gt;
<a name="l778"><span class="linenum"> 778</span></a>                          &lt;/tr&gt;
<a name="l779"><span class="linenum"> 779</span></a>                          &lt;tr&gt;
<a name="l780"><span class="linenum"> 780</span></a>                              &lt;td&gt;&lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expectOnce')" href="../../../../_functions/expectonce.html" onMouseOver="funcPopup(event,'expectonce')">expectOnce</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../../../_variables/method.html">$method</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../../_variables/args.html">$args</a>)&lt;/span&gt;&lt;/td&gt;
<a name="l781"><span class="linenum"> 781</span></a>                              &lt;td&gt;Must be called once and with the expected arguments if supplied&lt;/td&gt;
<a name="l782"><span class="linenum"> 782</span></a>                          &lt;/tr&gt;
<a name="l783"><span class="linenum"> 783</span></a>                          &lt;tr&gt;
<a name="l784"><span class="linenum"> 784</span></a>                              &lt;td&gt;&lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expectAtLeastOnce')" href="../../../../_functions/expectatleastonce.html" onMouseOver="funcPopup(event,'expectatleastonce')">expectAtLeastOnce</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../../../_variables/method.html">$method</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../../_variables/args.html">$args</a>)&lt;/span&gt;&lt;/td&gt;
<a name="l785"><span class="linenum"> 785</span></a>                              &lt;td&gt;Must be called at least once, and always with any expected arguments&lt;/td&gt;
<a name="l786"><span class="linenum"> 786</span></a>                          &lt;/tr&gt;
<a name="l787"><span class="linenum"> 787</span></a>                      &lt;/tbody&gt;
<a name="l788"><span class="linenum"> 788</span></a>                  &lt;/table&gt;
<a name="l789"><span class="linenum"> 789</span></a>                  Where the parameters are...
<a name="l790"><span class="linenum"> 790</span></a>                  &lt;dl&gt;
<a name="l791"><span class="linenum"> 791</span></a>                      &lt;dt class=&quot;new_code&quot;&gt;<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../../../_variables/method.html">$method</a>&lt;/dt&gt;
<a name="l792"><span class="linenum"> 792</span></a>                      &lt;dd&gt;The method name, as a string, to apply the condition to.&lt;/dd&gt;
<a name="l793"><span class="linenum"> 793</span></a>                      &lt;dt class=&quot;new_code&quot;&gt;<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../../_variables/args.html">$args</a>&lt;/dt&gt;
<a name="l794"><span class="linenum"> 794</span></a>                      &lt;dd&gt;
<a name="l795"><span class="linenum"> 795</span></a>                          The arguments as a list. Wildcards can be included in the same
<a name="l796"><span class="linenum"> 796</span></a>                          manner as for &lt;span class=&quot;new_code&quot;&gt;setReturn()&lt;/span&gt;.
<a name="l797"><span class="linenum"> 797</span></a>                          This argument is optional for &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expectOnce')" href="../../../../_functions/expectonce.html" onMouseOver="funcPopup(event,'expectonce')">expectOnce</a>()&lt;/span&gt;
<a name="l798"><span class="linenum"> 798</span></a>                          and &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expectAtLeastOnce')" href="../../../../_functions/expectatleastonce.html" onMouseOver="funcPopup(event,'expectatleastonce')">expectAtLeastOnce</a>()&lt;/span&gt;.
<a name="l799"><span class="linenum"> 799</span></a>                      &lt;/dd&gt;
<a name="l800"><span class="linenum"> 800</span></a>                      &lt;dt class=&quot;new_code&quot;&gt;<a class="var it485" onMouseOver="hilite(485)" onMouseOut="lolite()" onClick="logVariable('timing')" href="../../../../_variables/timing.html">$timing</a>&lt;/dt&gt;
<a name="l801"><span class="linenum"> 801</span></a>                      &lt;dd&gt;
<a name="l802"><span class="linenum"> 802</span></a>                          The only point in time to test the condition.
<a name="l803"><span class="linenum"> 803</span></a>                          The first call starts at zero and the count is for
<a name="l804"><span class="linenum"> 804</span></a>                          each method independently.
<a name="l805"><span class="linenum"> 805</span></a>                      &lt;/dd&gt;
<a name="l806"><span class="linenum"> 806</span></a>                      &lt;dt class=&quot;new_code&quot;&gt;<a class="var it486" onMouseOver="hilite(486)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a>&lt;/dt&gt;
<a name="l807"><span class="linenum"> 807</span></a>                      &lt;dd&gt;The number of calls expected.&lt;/dd&gt;
<a name="l808"><span class="linenum"> 808</span></a>                  &lt;/dl&gt;
<a name="l809"><span class="linenum"> 809</span></a>              &lt;/p&gt;
<a name="l810"><span class="linenum"> 810</span></a>              &lt;p&gt;
<a name="l811"><span class="linenum"> 811</span></a>                  If you have just one call in your test, make sure you're using
<a name="l812"><span class="linenum"> 812</span></a>                  &lt;span class=&quot;new_code&quot;&gt;expectOnce&lt;/span&gt;.&lt;br&gt;
<a name="l813"><span class="linenum"> 813</span></a>                  Using &lt;span class=&quot;new_code&quot;&gt;<a class="var it487" onMouseOver="hilite(487)" onMouseOut="lolite()" onClick="logVariable('mocked')" href="../../../../_variables/mocked.html">$mocked</a>-&amp;gt;<a class="function" onClick="logFunction('expectAt')" href="../../../../_functions/expectat.html" onMouseOver="funcPopup(event,'expectat')">expectAt</a>(0, 'method', 'args);&lt;/span&gt;
<a name="l814"><span class="linenum"> 814</span></a>                  on its own will allow the method to never be called.
<a name="l815"><span class="linenum"> 815</span></a>                  Checking the arguments and the overall call count
<a name="l816"><span class="linenum"> 816</span></a>                  are currently independant.
<a name="l817"><span class="linenum"> 817</span></a>                  Add an &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expectCallCount')" href="../../../../_functions/expectcallcount.html" onMouseOver="funcPopup(event,'expectcallcount')">expectCallCount</a>()&lt;/span&gt; expectation when you
<a name="l818"><span class="linenum"> 818</span></a>                  are using &lt;span class=&quot;new_code&quot;&gt;<a class="function" onClick="logFunction('expectAt')" href="../../../../_functions/expectat.html" onMouseOver="funcPopup(event,'expectat')">expectAt</a>()&lt;/span&gt; unless zero calls is allowed.
<a name="l819"><span class="linenum"> 819</span></a>              &lt;/p&gt;
<a name="l820"><span class="linenum"> 820</span></a>              &lt;p&gt;
<a name="l821"><span class="linenum"> 821</span></a>                  Like the assertions within test cases, all of the expectations
<a name="l822"><span class="linenum"> 822</span></a>                  can take a message override as an extra parameter.
<a name="l823"><span class="linenum"> 823</span></a>                  Also the original failure message can be embedded in the output
<a name="l824"><span class="linenum"> 824</span></a>                  as &quot;%s&quot;.
<a name="l825"><span class="linenum"> 825</span></a>              &lt;/p&gt;
<a name="l826"><span class="linenum"> 826</span></a>          
<a name="l827"><span class="linenum"> 827</span></a>      &lt;/div&gt;
<a name="l828"><span class="linenum"> 828</span></a>          References and related information...
<a name="l829"><span class="linenum"> 829</span></a>          &lt;ul&gt;
<a name="l830"><span class="linenum"> 830</span></a>  &lt;li&gt;
<a name="l831"><span class="linenum"> 831</span></a>              The original
<a name="l832"><span class="linenum"> 832</span></a>              &lt;a href=&quot;http://www.mockobjects.com/&quot;&gt;Mock objects&lt;/a&gt; paper.
<a name="l833"><span class="linenum"> 833</span></a>          &lt;/li&gt;
<a name="l834"><span class="linenum"> 834</span></a>  &lt;li&gt;
<a name="l835"><span class="linenum"> 835</span></a>              SimpleTest project page on &lt;a href=&quot;http://sourceforge.net/projects/simpletest/&quot;&gt;SourceForge&lt;/a&gt;.
<a name="l836"><span class="linenum"> 836</span></a>          &lt;/li&gt;
<a name="l837"><span class="linenum"> 837</span></a>  &lt;li&gt;
<a name="l838"><span class="linenum"> 838</span></a>              SimpleTest home page on &lt;a href=&quot;http://www.lastcraft.com/simple_test.php&quot;&gt;LastCraft&lt;/a&gt;.
<a name="l839"><span class="linenum"> 839</span></a>          &lt;/li&gt;
<a name="l840"><span class="linenum"> 840</span></a>  &lt;/ul&gt;
<a name="l841"><span class="linenum"> 841</span></a>  &lt;div class=&quot;menu_back&quot;&gt;&lt;div class=&quot;menu&quot;&gt;
<a name="l842"><span class="linenum"> 842</span></a>  &lt;a href=&quot;index.html&quot;&gt;SimpleTest&lt;/a&gt;
<a name="l843"><span class="linenum"> 843</span></a>                  |
<a name="l844"><span class="linenum"> 844</span></a>                  &lt;a href=&quot;overview.html&quot;&gt;Overview&lt;/a&gt;
<a name="l845"><span class="linenum"> 845</span></a>                  |
<a name="l846"><span class="linenum"> 846</span></a>                  &lt;a href=&quot;unit_test_documentation.html&quot;&gt;Unit tester&lt;/a&gt;
<a name="l847"><span class="linenum"> 847</span></a>                  |
<a name="l848"><span class="linenum"> 848</span></a>                  &lt;a href=&quot;group_test_documentation.html&quot;&gt;Group tests&lt;/a&gt;
<a name="l849"><span class="linenum"> 849</span></a>                  |
<a name="l850"><span class="linenum"> 850</span></a>                  &lt;span class=&quot;chosen&quot;&gt;Mock objects&lt;/span&gt;
<a name="l851"><span class="linenum"> 851</span></a>                  |
<a name="l852"><span class="linenum"> 852</span></a>                  &lt;a href=&quot;partial_mocks_documentation.html&quot;&gt;Partial mocks&lt;/a&gt;
<a name="l853"><span class="linenum"> 853</span></a>                  |
<a name="l854"><span class="linenum"> 854</span></a>                  &lt;a href=&quot;reporter_documentation.html&quot;&gt;Reporting&lt;/a&gt;
<a name="l855"><span class="linenum"> 855</span></a>                  |
<a name="l856"><span class="linenum"> 856</span></a>                  &lt;a href=&quot;expectation_documentation.html&quot;&gt;Expectations&lt;/a&gt;
<a name="l857"><span class="linenum"> 857</span></a>                  |
<a name="l858"><span class="linenum"> 858</span></a>                  &lt;a href=&quot;web_tester_documentation.html&quot;&gt;Web tester&lt;/a&gt;
<a name="l859"><span class="linenum"> 859</span></a>                  |
<a name="l860"><span class="linenum"> 860</span></a>                  &lt;a href=&quot;form_testing_documentation.html&quot;&gt;Testing forms&lt;/a&gt;
<a name="l861"><span class="linenum"> 861</span></a>                  |
<a name="l862"><span class="linenum"> 862</span></a>                  &lt;a href=&quot;authentication_documentation.html&quot;&gt;Authentication&lt;/a&gt;
<a name="l863"><span class="linenum"> 863</span></a>                  |
<a name="l864"><span class="linenum"> 864</span></a>                  &lt;a href=&quot;browser_documentation.html&quot;&gt;Scriptable browser&lt;/a&gt;
<a name="l865"><span class="linenum"> 865</span></a>  &lt;/div&gt;&lt;/div&gt;
<a name="l866"><span class="linenum"> 866</span></a>  &lt;div class=&quot;copyright&quot;&gt;
<a name="l867"><span class="linenum"> 867</span></a>              Copyright&lt;br&gt;Marcus Baker 2006
<a name="l868"><span class="linenum"> 868</span></a>          &lt;/div&gt;
<a name="l869"><span class="linenum"> 869</span></a>  &lt;/body&gt;
<a name="l870"><span class="linenum"> 870</span></a>  &lt;/html&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'expectatleastonce': ['expectatleastonce', 'Convenience method for requiring a method call. ', [['tests/simpletest','mock_objects.php',983]], 12],
'makepayment': ['makepayment', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',626],['tests/simpletest/docs/en','mock_objects_documentation.html',585]], 12],
'__construct': ['__construct', 'Constructor ', [['bonfire/modules/activities/controllers','reports.php',35],['tests/simpletest','arguments.php',17],['tests/simpletest','arguments.php',143],['bonfire/libraries','BF_Cache_file.php',32],['bonfire/codeigniter/libraries','Email.php',81],['bonfire/libraries','assets.php',166],['bonfire/codeigniter/database/drivers/mongodb','mongodb_driver.php',39],['bonfire/codeigniter/database','DB_driver.php',75],['bonfire/modules/settings/libraries','settings_lib.php',54],['tests/simpletest/extensions','my_reporter.php',14],['tests/simpletest/docs/fr','mock_objects_documentation.html',625],['application/core','MY_Security.php',15],['bonfire/modules/settings/controllers','settings.php',35],['tests/simpletest','eclipse.php',25],['tests/simpletest','eclipse.php',276],['tests/simpletest/docs/en','reporter_documentation.html',347],['tests/simpletest/docs/en','reporter_documentation.html',446],['tests/simpletest/docs/en','reporter_documentation.html',558],['tests/simpletest/docs/en','group_test_documentation.html',105],['tests/simpletest/docs/en','group_test_documentation.html',130],['tests/simpletest/docs/en','group_test_documentation.html',184],['tests/simpletest/docs/en','group_test_documentation.html',201],['application/hooks','App_hooks.php',56],['bonfire/libraries','JSMin.php',80],['bonfire/codeigniter/libraries','Xmlrpcs.php',46],['bonfire/codeigniter/libraries','Unit_test.php',38],['tests','run.php',98],['tests','run.php',179],['tests/simpletest','reporter.php',25],['tests/simpletest','reporter.php',196],['tests/simpletest','reporter.php',317],['tests/simpletest','scorer.php',27],['tests/simpletest','scorer.php',246],['tests/simpletest','scorer.php',419],['bonfire/modules/roles/controllers','settings.php',35],['bonfire/codeigniter/libraries','Migration.php',38],['bonfire/codeigniter/libraries','Table.php',40],['bonfire/modules/ui/libraries','contexts.php',144],['bonfire/codeigniter/database/drivers/pdo','pdo_driver.php',51],['bonfire/modules/builder/libraries','modulebuilder.php',77],['tests/simpletest/test','mock_objects_test.php',455],['bonfire/modules/translate/controllers','developer.php',44],['bonfire/libraries','template.php',197],['tests/bonfire/libraries','assets_test.php',5],['bonfire/codeigniter/libraries','Upload.php',57],['tests/simpletest/docs/fr','expectation_documentation.html',295],['tests/bonfire/modules/users','user_model_test.php',7],['tests/simpletest','http.php',26],['tests/simpletest','http.php',121],['tests/simpletest','http.php',203],['tests/simpletest','http.php',306],['tests/simpletest','http.php',489],['bonfire/codeigniter/core','Utf8.php',31],['tests/simpletest','url.php',39],['tests/simpletest','collector.php',104],['bonfire/codeigniter/libraries','Image_lib.php',79],['tests/simpletest','mock_objects.php',33],['tests/simpletest','mock_objects.php',160],['tests/simpletest','mock_objects.php',203],['tests/simpletest','mock_objects.php',246],['tests/simpletest','mock_objects.php',289],['tests/simpletest','mock_objects.php',378],['tests/simpletest','mock_objects.php',499],['tests/simpletest','mock_objects.php',527],['tests/simpletest','mock_objects.php',553],['tests/simpletest','mock_objects.php',582],['tests/simpletest','mock_objects.php',608],['tests/simpletest','mock_objects.php',1194],['tests/simpletest','mock_objects.php',1254],['tests/simpletest/test','collector_test.php',9],['bonfire/codeigniter/core','Input.php',76],['bonfire/codeigniter/core','Lang.php',42],['bonfire/modules/users/controllers','users.php',35],['bonfire/modules/sysinfo/controllers','developer.php',33],['tests/simpletest','cookies.php',31],['tests/simpletest','cookies.php',231],['tests/simpletest','selector.php',25],['tests/simpletest','selector.php',60],['tests/simpletest','selector.php',91],['tests/simpletest','selector.php',118],['tests/bonfire/helpers','MY_array_helper_test.php',5],['bonfire/codeigniter/libraries','Trackback.php',38],['tests/simpletest/test','frames_test.php',245],['bonfire/codeigniter/database/drivers/odbc','odbc_driver.php',51],['tests/simpletest','tag.php',121],['tests/simpletest','tag.php',266],['tests/simpletest','tag.php',292],['tests/simpletest','tag.php',309],['tests/simpletest','tag.php',342],['tests/simpletest','tag.php',449],['tests/simpletest','tag.php',492],['tests/simpletest','tag.php',550],['tests/simpletest','tag.php',625],['tests/simpletest','tag.php',682],['tests/simpletest','tag.php',767],['tests/simpletest','tag.php',810],['tests/simpletest','tag.php',898],['tests/simpletest','tag.php',992],['tests/simpletest','tag.php',1053],['tests/simpletest','tag.php',1110],['tests/simpletest','tag.php',1466],['tests/simpletest','tag.php',1492],['tests/simpletest','tag.php',1509],['bonfire/codeigniter/libraries','User_agent.php',51],['tests/simpletest','web_tester.php',26],['tests/simpletest','web_tester.php',138],['tests/simpletest','web_tester.php',268],['tests/simpletest','web_tester.php',313],['tests/simpletest','web_tester.php',386],['tests/simpletest','web_tester.php',437],['bonfire/codeigniter/libraries','Pagination.php',63],['tests/simpletest','default_reporter.php',36],['tests/simpletest','default_reporter.php',132],['tests/_support','database.php',70],['tests/simpletest','unit_tester.php',25],['bonfire/codeigniter/database','DB_utility.php',30],['tests/simpletest','recorder.php',27],['bonfire/modules/users/controllers','settings.php',35],['bonfire/libraries','CSSMin.php',127],['bonfire/libraries','CSSMin.php',189],['bonfire/libraries','CSSMin.php',243],['bonfire/libraries','CSSMin.php',296],['bonfire/libraries','CSSMin.php',353],['bonfire/libraries','CSSMin.php',1017],['bonfire/libraries','CSSMin.php',1200],['bonfire/libraries','CSSMin.php',1428],['bonfire/libraries','CSSMin.php',1950],['bonfire/libraries','CSSMin.php',2642],['bonfire/libraries','CSSMin.php',2915],['bonfire/libraries','CSSMin.php',3561],['bonfire/libraries','CSSMin.php',3812],['bonfire/libraries','CSSMin.php',3920],['bonfire/libraries','CSSMin.php',4110],['bonfire/libraries','CSSMin.php',4285],['bonfire/libraries','CSSMin.php',4417],['bonfire/libraries','CSSMin.php',4460],['bonfire/libraries','CSSMin.php',4710],['bonfire/libraries','CSSMin.php',4999],['bonfire/modules/permissions/models','permission_model.php',100],['bonfire/codeigniter/core','Output.php',88],['application/core','Base_Controller.php',65],['bonfire/codeigniter/libraries','Session.php',50],['bonfire/codeigniter/libraries','Encrypt.php',38],['bonfire/codeigniter/libraries','Calendar.php',41],['tests/simpletest/test','interfaces_test.php',119],['tests/simpletest','remote.php',27],['tests/simpletest/extensions','pear_test_case.php',27],['bonfire/codeigniter/database','DB_cache.php',30],['tests/simpletest/docs/fr','group_test_documentation.html',111],['tests/simpletest/docs/fr','group_test_documentation.html',137],['tests/simpletest/docs/fr','group_test_documentation.html',195],['tests/simpletest/docs/fr','group_test_documentation.html',212],['bonfire/modules/emailer/controllers','settings.php',34],['application/controllers/admin','content.php',34],['application/controllers','home.php',33],['tests/simpletest','exceptions.php',24],['tests/simpletest','exceptions.php',73],['tests/simpletest','exceptions.php',142],['application/third_party/MX','Base.php',44],['application/libraries','MY_Form_validation.php',46],['bonfire/codeigniter/core','Hooks.php',50],['application/controllers/admin','reports.php',34],['application/third_party/MX','Controller.php',43],['application/controllers/admin','home.php',34],['tests/simpletest','errors.php',24],['tests/simpletest','errors.php',73],['tests/simpletest/docs/en','expectation_documentation.html',333],['bonfire/modules/activities/controllers','activities.php',35],['bonfire/codeigniter/libraries','Form_validation.php',39],['bonfire/codeigniter/libraries/Cache/drivers','Cache_file.php',32],['tests/bonfire/helpers','MY_date_helper_test.php',5],['bonfire/codeigniter/libraries','Ftp.php',38],['application/core','Admin_Controller.php',25],['bonfire/modules/database/controllers','developer.php',44],['bonfire/modules/docs/controllers','docs.php',13],['tests/simpletest/extensions','testdox.php',18],['tests/simpletest','php_parser.php',34],['tests/simpletest','php_parser.php',127],['tests/simpletest','php_parser.php',187],['tests/simpletest','php_parser.php',452],['tests/simpletest','php_parser.php',550],['bonfire/codeigniter/libraries','Cart.php',38],['tests/simpletest','frames.php',30],['bonfire/codeigniter/core','Config.php',50],['bonfire/codeigniter/libraries','Profiler.php',54],['bonfire/docs','tut_blog.md',138],['bonfire/docs','tut_blog.md',217],['bonfire/docs','tut_blog.md',324],['bonfire/docs','tut_blog.md',504],['bonfire/modules/permissions/controllers','settings.php',33],['bonfire/codeigniter/core','Router.php',81],['tests/simpletest','shell_tester.php',23],['tests/simpletest','shell_tester.php',76],['tests/bonfire/core','MY_Model_test.php',14],['bonfire/modules/roles/models','role_model.php',90],['bonfire/codeigniter/libraries','Xmlrpc.php',72],['bonfire/codeigniter/libraries','Xmlrpc.php',363],['bonfire/codeigniter/libraries','Xmlrpc.php',439],['bonfire/codeigniter/libraries','Xmlrpc.php',617],['bonfire/codeigniter/libraries','Xmlrpc.php',1214],['bonfire/libraries','installer_lib.php',69],['tests/simpletest','expectation.php',27],['tests/simpletest','expectation.php',226],['tests/simpletest','expectation.php',281],['tests/simpletest','expectation.php',331],['tests/simpletest','expectation.php',404],['tests/simpletest','expectation.php',451],['tests/simpletest','expectation.php',524],['tests/simpletest','expectation.php',572],['tests/simpletest','expectation.php',619],['tests/simpletest','expectation.php',694],['tests/simpletest','expectation.php',742],['tests/simpletest','expectation.php',819],['tests/simpletest','expectation.php',862],['tests/simpletest','expectation.php',907],['bonfire/codeigniter/libraries/Cache','Cache.php',39],['tests/bonfire/libraries','console_test.php',10],['bonfire/codeigniter/libraries/javascript','Jquery.php',37],['application/core','Front_Controller.php',20],['tests/simpletest','detached.php',26],['tests/simpletest/docs/en','mock_objects_documentation.html',584],['bonfire/modules/logs/controllers','developer.php',35],['application/third_party/MX','Ci.php',43],['tests/simpletest','simpletest.php',320],['tests/bonfire/modules/activities','activity_model_test.php',7],['tests/simpletest/test','expectation_test.php',92],['tests/simpletest/test','expectation_test.php',106],['tests/simpletest/test','expectation_test.php',154],['application/core','MY_Model.php',362],['tests/_support','my_reporter.php',14],['bonfire/modules/emailer/libraries','emailer.php',93],['bonfire/modules/ui/controllers','settings.php',35],['bonfire/libraries','Console.php',61],['application/libraries','MY_Parser.php',24],['tests/bonfire/helpers','address_helper_test.php',7],['tests/simpletest','user_agent.php',42],['tests/simpletest','page.php',41],['bonfire/codeigniter/core','Model.php',29],['bonfire/codeigniter/database','DB_forge.php',32],['bonfire/codeigniter/libraries','Javascript.php',31],['bonfire/modules/builder/views/files','controller.php',37],['tests/simpletest','xml.php',25],['bonfire/modules/migrations/libraries','Migrations.php',138],['application/controllers','install.php',5],['tests/simpletest','reflection_php5.php',17],['tests/simpletest','test_case.php',44],['bonfire/codeigniter/libraries','Sha1.php',47],['application/core','Authenticated_Controller.php',20],['bonfire/libraries','events.php',46],['tests/simpletest','encoding.php',24],['tests/simpletest','encoding.php',94],['tests/simpletest','encoding.php',194],['tests/simpletest','encoding.php',331],['tests/simpletest','encoding.php',386],['tests/simpletest','encoding.php',414],['tests/simpletest','encoding.php',445],['tests/simpletest','encoding.php',504],['tests/simpletest','encoding.php',572],['tests/simpletest','encoding.php',602],['bonfire/codeigniter/core','Loader.php',119],['bonfire/codeigniter/core','Controller.php',34],['tests/simpletest','browser.php',165],['bonfire/modules/migrations/controllers','developer.php',34],['bonfire/codeigniter/core','Security.php',99],['bonfire/modules/builder/controllers','developer.php',37],['bonfire/docs','layouts_and_views.md',190],['tests/simpletest/docs/fr','reporter_documentation.html',356],['tests/simpletest/docs/fr','reporter_documentation.html',456],['tests/simpletest/docs/fr','reporter_documentation.html',568],['bonfire/codeigniter/libraries','Log.php',35],['bonfire/modules/users/models','user_model.php',182],['tests/simpletest','form.php',34],['tests/simpletest','invoker.php',33],['tests/simpletest','invoker.php',92],['bonfire/codeigniter/core','URI.php',61],['bonfire/modules/users/libraries','auth.php',94],['application/core','MY_Lang.php',30],['application/libraries','Profiler.php',57],['bonfire/codeigniter/libraries','Zip.php',42],['tests/simpletest','socket.php',24],['tests/simpletest','socket.php',79],['tests/simpletest','socket.php',176],['tests/simpletest','socket.php',288],['bonfire/codeigniter/core','Exceptions.php',64],['bonfire/libraries','form.php',91]], 179],
'expect': ['expect', 'Sets up an expected call with a set of expected parameters in that call. All calls will be compared to these expectations regardless of when the call is made. ', [['tests/simpletest','mock_objects.php',867]], 36],
'databaseconnection': ['databaseconnection', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',119],['tests/simpletest/docs/fr','mock_objects_documentation.html',167],['tests/simpletest/docs/fr','mock_objects_documentation.html',212],['tests/simpletest/docs/en','mock_objects_documentation.html',105],['tests/simpletest/docs/en','mock_objects_documentation.html',151],['tests/simpletest/docs/en','mock_objects_documentation.html',197]], 2],
'__call': ['__call', '__call magic method ', [['bonfire/codeigniter/libraries','Driver.php',164],['tests/simpletest/test','mock_objects_test.php',644]], 5],
'expectnever': ['expectnever', 'Convenience method for barring a method call. ', [['tests/simpletest','mock_objects.php',958]], 49],
'expectminimumcallcount': ['expectminimumcallcount', 'Sets the number of times to call a method to prevent a failure on the tally. ', [['tests/simpletest','mock_objects.php',943]], 10],
'warn': ['warn', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',642],['tests/simpletest/docs/en','mock_objects_documentation.html',599]], 6],
'next': ['next', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',272],['public/assets/js','bootstrap.js',1764],['bonfire/libraries','JSMin.php',313],['tests/simpletest/test/support','spl_examples.php',6],['tests/simpletest/docs/en','mock_objects_documentation.html',253],['public/themes/admin/js','bootstrap.js',1764]], 23],
'returnsat': ['returnsat', 'Sets a return for a parameter list that will be passed only when the required call count is reached. ', [['tests/simpletest','mock_objects.php',767]], 29],
'pad': ['pad', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',374],['tests/simpletest/docs/en','mock_objects_documentation.html',352]], 0],
'iterator': ['iterator', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',271],['tests/simpletest/docs/en','mock_objects_documentation.html',252]], 0],
'mockdatabaseconnection': ['mockdatabaseconnection', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',162],['tests/simpletest/docs/en','mock_objects_documentation.html',146]], 8],
'returns': ['returns', 'Sets a return for a parameter list that will be passed on by all calls to this method that match. ', [['tests/simpletest','mock_objects.php',754]], 145],
'expectonce': ['expectonce', 'Convenience method for a single method call. ', [['tests/simpletest','mock_objects.php',968]], 218],
'expectcallcount': ['expectcallcount', 'Sets an expectation for the number of times a method will be called. The tally method is used to check this. ', [['tests/simpletest','mock_objects.php',912]], 56],
'testmissingcvv2causesalert': ['testmissingcvv2causesalert', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',664],['tests/simpletest/docs/fr','mock_objects_documentation.html',702],['tests/simpletest/docs/fr','mock_objects_documentation.html',715],['tests/simpletest/docs/fr','mock_objects_documentation.html',750],['tests/simpletest/docs/en','mock_objects_documentation.html',621],['tests/simpletest/docs/en','mock_objects_documentation.html',657],['tests/simpletest/docs/en','mock_objects_documentation.html',670],['tests/simpletest/docs/en','mock_objects_documentation.html',698]], 0],
'add': ['add', 'Stashes a reference against a method call. ', [['tests/simpletest','mock_objects.php',296],['tests/simpletest','errors.php',111],['bonfire/modules/ui/controllers','settings.php',118],['tests/simpletest','test_case.php',507],['tests/simpletest','encoding.php',217]], 111],
'requestwithmissingcvv2': ['requestwithmissingcvv2', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',673],['tests/simpletest/docs/fr','mock_objects_documentation.html',709],['tests/simpletest/docs/en','mock_objects_documentation.html',630],['tests/simpletest/docs/en','mock_objects_documentation.html',664]], 10],
'get': ['get', 'Fetch from cache ', [['bonfire/libraries','BF_Cache_file.php',47],['tests/simpletest/docs/fr','mock_objects_documentation.html',310],['bonfire/codeigniter/database','DB_active_rec.php',937],['bonfire/libraries','JSMin.php',187],['bonfire/libraries','template.php',648],['bonfire/codeigniter/core','Input.php',136],['bonfire/codeigniter/libraries/Cache/drivers','Cache_apc.php',30],['tests/simpletest','web_tester.php',689],['tests/_support','database.php',31],['bonfire/codeigniter/libraries/Cache/drivers','Cache_memcached.php',42],['bonfire/codeigniter/libraries/Cache/drivers','Cache_file.php',47],['bonfire/codeigniter/libraries/Cache','Cache.php',54],['bonfire/codeigniter/libraries/Cache/drivers','Cache_dummy.php',30],['tests/simpletest/docs/en','mock_objects_documentation.html',291],['tests/simpletest','simpletest.php',299],['tests/simpletest','browser.php',489]], 432],
'generate': ['generate', 'Generate the table ', [['bonfire/codeigniter/libraries','Table.php',226],['tests/simpletest','mock_objects.php',1201],['tests/simpletest','mock_objects.php',1270],['bonfire/codeigniter/libraries','Calendar.php',89],['bonfire/codeigniter/libraries','Sha1.php',52]], 86],
'query': ['query', 'Execute the query ', [['bonfire/codeigniter/database','DB_driver.php',236],['tests/simpletest/docs/fr','mock_objects_documentation.html',120],['tests/simpletest/docs/fr','mock_objects_documentation.html',172],['tests/simpletest/docs/fr','mock_objects_documentation.html',213],['tests/simpletest/docs/en','mock_objects_documentation.html',106],['tests/simpletest/docs/en','mock_objects_documentation.html',156],['tests/simpletest/docs/en','mock_objects_documentation.html',198]], 67],
'selectquery': ['selectquery', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',121],['tests/simpletest/docs/fr','mock_objects_documentation.html',177],['tests/simpletest/docs/fr','mock_objects_documentation.html',214],['tests/simpletest/docs/en','mock_objects_documentation.html',107],['tests/simpletest/docs/en','mock_objects_documentation.html',161],['tests/simpletest/docs/en','mock_objects_documentation.html',199]], 0],
'disableexpectationnamechecks': ['disableexpectationnamechecks', 'Disables a name check when setting expectations. This hack is needed for the partial mocks. ', [['tests/simpletest','mock_objects.php',665]], 4],
'returnsbyreference': ['returnsbyreference', 'Sets a return for a parameter list that will be passed by reference for all calls. ', [['tests/simpletest','mock_objects.php',826]], 7],
'expectat': ['expectat', 'Sets up an expected call with a set of expected parameters in that call. The expected call count will be adjusted if it is set too low to reach this call. ', [['tests/simpletest','mock_objects.php',887]], 184],
'invoke': ['invoke', 'Returns the expected value for the method name and checks expectations. Will generate any test assertions as a result of expectations if there is a test present. ', [['tests/simpletest','mock_objects.php',1099],['tests/simpletest','exceptions.php',32],['tests/simpletest','errors.php',32],['tests/simpletest','invoker.php',60],['tests/simpletest','invoker.php',119]], 13],
'teardown': ['teardown', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',492],['bonfire/helpers','markdown_helper.php',288],['bonfire/helpers','markdown_helper.php',1754],['tests/simpletest/test','errors_test.php',18],['tests/simpletest/test','errors_test.php',47],['tests/simpletest/test','errors_test.php',93],['tests/simpletest/test','exceptions_test.php',127],['tests/simpletest/test','exceptions_test.php',175],['tests/bonfire/core','MY_Model_test.php',39],['tests/simpletest/docs/en','mock_objects_documentation.html',463],['tests/simpletest/docs/en','unit_test_documentation.html',80],['tests/simpletest/docs/en','unit_test_documentation.html',346],['tests/simpletest/docs/fr','unit_test_documentation.html',87],['tests/simpletest/docs/fr','unit_test_documentation.html',346],['tests/simpletest/docs/fr','index.html',351],['tests/simpletest','test_case.php',208],['tests/simpletest/docs/en','index.html',328]], 15],
'configuration': ['configuration', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',309],['tests/simpletest/docs/en','mock_objects_documentation.html',290]], 0],
'throwon': ['throwon', 'Sets up a trigger to throw an exception upon the method call. ', [['tests/simpletest','mock_objects.php',998]], 7],
'testasequence': ['testasequence', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',284],['tests/simpletest/docs/en','mock_objects_documentation.html',265]], 0],
'testallrequiredfieldshighlightedonemptyrequest': ['testallrequiredfieldshighlightedonemptyrequest', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',776],['tests/simpletest/docs/en','mock_objects_documentation.html',722]], 0],
'testuserfinder': ['testuserfinder', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',526],['tests/simpletest/docs/en','mock_objects_documentation.html',496]], 0],
'setup': ['setup', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',491],['tests/simpletest/test','user_agent_test.php',15],['tests/simpletest/test','mock_objects_test.php',474],['tests/bonfire/modules/users','user_model_test.php',22],['bonfire/helpers','markdown_helper.php',275],['bonfire/helpers','markdown_helper.php',1734],['tests/simpletest/test','errors_test.php',12],['tests/simpletest/test','errors_test.php',42],['tests/simpletest/test','errors_test.php',89],['tests/simpletest/test','exceptions_test.php',144],['tests/simpletest/test','exceptions_test.php',160],['tests/bonfire/core','MY_Model_test.php',24],['bonfire/libraries','installer_lib.php',417],['tests/simpletest/test','acceptance_test.php',194],['tests/simpletest/test','acceptance_test.php',291],['tests/simpletest/test','acceptance_test.php',335],['tests/simpletest/test','acceptance_test.php',390],['tests/simpletest/test','acceptance_test.php',506],['tests/simpletest/test','acceptance_test.php',520],['tests/simpletest/test','acceptance_test.php',566],['tests/simpletest/test','acceptance_test.php',671],['tests/simpletest/test','acceptance_test.php',1091],['tests/simpletest/test','acceptance_test.php',1182],['tests/simpletest/test','acceptance_test.php',1219],['tests/simpletest/test','acceptance_test.php',1287],['tests/simpletest/test','acceptance_test.php',1361],['tests/simpletest/test','acceptance_test.php',1608],['tests/simpletest/test','acceptance_test.php',1652],['tests/simpletest/docs/en','mock_objects_documentation.html',462],['tests/simpletest/docs/en','unit_test_documentation.html',76],['tests/simpletest/docs/en','unit_test_documentation.html',342],['tests/bonfire/modules/activities','activity_model_test.php',19],['tests/simpletest/docs/fr','unit_test_documentation.html',83],['tests/simpletest/docs/fr','unit_test_documentation.html',342],['tests/simpletest/docs/fr','index.html',347],['tests/simpletest','test_case.php',199],['tests/simpletest/docs/en','index.html',324]], 17],
'expectmaximumcallcount': ['expectmaximumcallcount', 'Sets the number of times a method may be called before a test failure is triggered. ', [['tests/simpletest','mock_objects.php',928]], 11],
'testuserfinderreadsresultsfromdatabase': ['testuserfinderreadsresultsfromdatabase', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',427],['tests/simpletest/docs/fr','mock_objects_documentation.html',494],['tests/simpletest/docs/en','mock_objects_documentation.html',403],['tests/simpletest/docs/en','mock_objects_documentation.html',465]], 0],
'assertidentical': ['assertidentical', 'Will trigger a pass if the two parameters have the same value and same type. Otherwise a fail. ', [['tests/simpletest','unit_tester.php',196]], 319],
'testsomething': ['testsomething', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',202],['tests/simpletest/docs/fr','mock_objects_documentation.html',222],['tests/simpletest/docs/en','mock_objects_documentation.html',187],['tests/simpletest/docs/en','mock_objects_documentation.html',206]], 0],
'testnopaymentattemptedwithmissingcvv2': ['testnopaymentattemptedwithmissingcvv2', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',752],['tests/simpletest/docs/en','mock_objects_documentation.html',700]], 0],
'returnsbyreferenceat': ['returnsbyreferenceat', 'Sets a return for a parameter list that will be passed by value only when the required call count is reached. ', [['tests/simpletest','mock_objects.php',844]], 8],
'next': ['next', '', [], 23],
'func_get_args': ['func_get_args', '', [], 16]};
CLASS_DATA={
'mytestcase': ['mytestcase', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',200],['tests/simpletest/docs/fr','mock_objects_documentation.html',220],['tests/simpletest/docs/en','mock_objects_documentation.html',185],['tests/simpletest/docs/en','mock_objects_documentation.html',204]], 2],
'pad': ['pad', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',373],['tests/simpletest/docs/en','mock_objects_documentation.html',351]], 0],
'iterator': ['iterator', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',270],['tests/simpletest/docs/en','mock_objects_documentation.html',251]], 1],
'mockdatabaseconnection': ['mockdatabaseconnection', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',158],['tests/simpletest/docs/en','mock_objects_documentation.html',142]], 8],
'configuration': ['configuration', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',308],['tests/simpletest/docs/en','mock_objects_documentation.html',289]], 0],
'paymentformfailuresshouldbegraceful': ['paymentformfailuresshouldbegraceful', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',662],['tests/simpletest/docs/fr','mock_objects_documentation.html',700],['tests/simpletest/docs/fr','mock_objects_documentation.html',748],['tests/simpletest/docs/en','mock_objects_documentation.html',619],['tests/simpletest/docs/en','mock_objects_documentation.html',655],['tests/simpletest/docs/en','mock_objects_documentation.html',696]], 0],
'simplemock': ['simplemock', 'A base class or delegate that extends an empty collection of methods that can have their return values set and expectations made of the calls upon them. The mock will assert the expectations against it\'s attached test case in addition to the server stub behaviour or returning preprogrammed responses. ', [['tests/simpletest','mock_objects.php',628]], 3],
'iteratortest': ['iteratortest', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',282],['tests/simpletest/docs/en','mock_objects_documentation.html',263]], 0],
'paymentform': ['paymentform', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',624],['tests/simpletest/docs/en','mock_objects_documentation.html',583]], 10],
'mock': ['mock', 'Static methods only service class for code generation of mock objects. ', [['tests/simpletest','mock_objects.php',1186]], 103],
'databasetest': ['databasetest', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',425],['tests/simpletest/docs/fr','mock_objects_documentation.html',490],['tests/simpletest/docs/fr','mock_objects_documentation.html',524],['tests/simpletest/docs/en','mock_objects_documentation.html',401],['tests/simpletest/docs/en','mock_objects_documentation.html',461],['tests/simpletest/docs/en','mock_objects_documentation.html',494]], 0],
'alert': ['alert', '', [['tests/simpletest/docs/fr','mock_objects_documentation.html',641],['tests/simpletest/docs/en','mock_objects_documentation.html',598]], 5],
'unittestcase': ['unittestcase', 'Standard unit test class for day to day testing of PHP code XP style. Adds some useful standard assertions. ', [['tests/simpletest','unit_tester.php',16]], 210]};
CONST_DATA={
};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Oct 23 18:57:41 2014</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
